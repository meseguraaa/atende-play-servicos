{"version":3,"sources":["turbopack:///[project]/src/app/admin/report/analytics/page.tsx"],"sourcesContent":["// app/admin/reports/analytics/page.tsx\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport { prisma } from '@/lib/prisma';\nimport { cookies } from 'next/headers';\nimport { requireAdminForModule } from '@/lib/admin-permissions';\nimport { MonthPicker } from '@/components/month-picker';\nimport { UnitFilter } from '@/components/admin/reports/unit-filter';\nimport { CompareWithFilter } from '@/components/admin/reports/compare-with-filter';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\nimport { parse, subMonths, subYears, format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\nimport { redirect } from 'next/navigation';\nimport { Session } from 'inspector/promises';\n\nexport const dynamic = 'force-dynamic';\n\nexport const metadata: Metadata = {\n    title: 'Admin | Relat√≥rios',\n};\n\ntype AdminReportsAnalyticsPageProps = {\n    searchParams: Promise<{\n        month?: string; // yyyy-MM\n        compare?: string; // \"prev_month\" | \"prev_year\"\n    }>;\n};\n\nconst SAO_PAULO_TIMEZONE = 'America/Sao_Paulo';\nconst UNIT_COOKIE_NAME = 'admin_unit_context';\nconst UNIT_ALL_VALUE = 'all';\nconst COMPANY_COOKIE_NAME = 'admin_company_context';\n\n// ===============================\n// ‚úÖ Company resolver (sem te jogar pro login)\n// ===============================\nasync function resolveCompanyIdOrThrow(admin: any): Promise<string> {\n    const cookieStore = await cookies();\n    const fromCookie = cookieStore.get(COMPANY_COOKIE_NAME)?.value;\n    if (fromCookie) return fromCookie;\n\n    const fromAdmin =\n        (typeof admin?.companyId === 'string' && admin.companyId) ||\n        (typeof admin?.company?.id === 'string' && admin.company.id);\n    if (fromAdmin) return fromAdmin;\n\n    const userId =\n        (typeof admin?.userId === 'string' && admin.userId) ||\n        (typeof admin?.id === 'string' && admin.id) ||\n        (typeof admin?.sub === 'string' && admin.sub);\n\n    if (!userId) {\n        throw new Error(\n            'N√£o consegui resolver o userId do admin para achar a company.'\n        );\n    }\n\n    const membership = await prisma.companyMember.findFirst({\n        where: { userId, isActive: true },\n        select: { companyId: true },\n        orderBy: { createdAt: 'asc' } as any,\n    });\n\n    if (!membership?.companyId) {\n        throw new Error(\n            `Company n√£o definida para este admin. (cookie \"${COMPANY_COOKIE_NAME}\" ausente e sem membership ativa).`\n        );\n    }\n\n    return membership.companyId;\n}\n\n// ===============================\n// Timezone helpers (SP)\n// ===============================\nfunction getSaoPauloYMD(date: Date): { y: number; m: number; d: number } {\n    const formatter = new Intl.DateTimeFormat('pt-BR', {\n        timeZone: SAO_PAULO_TIMEZONE,\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n    });\n\n    const parts = formatter.formatToParts(date);\n    const d = Number(parts.find((p) => p.type === 'day')?.value ?? '1');\n    const m = Number(parts.find((p) => p.type === 'month')?.value ?? '1');\n    const y = Number(parts.find((p) => p.type === 'year')?.value ?? '1970');\n    return { y, m, d };\n}\n\n// 00:00 em SP (UTC-03) = 03:00 UTC\nfunction startOfMonthSP(date: Date): Date {\n    const { y, m } = getSaoPauloYMD(date);\n    return new Date(Date.UTC(y, m - 1, 1, 3, 0, 0));\n}\n\nfunction endOfMonthSP(date: Date): Date {\n    const { y, m } = getSaoPauloYMD(date);\n    const nextMonth = new Date(Date.UTC(y, m, 1, 3, 0, 0));\n    return new Date(nextMonth.getTime() - 1);\n}\n\nfunction startOfDaySP(date: Date): Date {\n    const { y, m, d } = getSaoPauloYMD(date);\n    return new Date(Date.UTC(y, m - 1, d, 3, 0, 0));\n}\n\nfunction endOfDaySP(date: Date): Date {\n    return new Date(startOfDaySP(date).getTime() + 24 * 60 * 60 * 1000 - 1);\n}\n\nfunction dayKeyFromSP(date: Date) {\n    const { y, m, d } = getSaoPauloYMD(date);\n    return `${y}-${String(m).padStart(2, '0')}-${String(d).padStart(2, '0')}`;\n}\n\nfunction dayLabelFromSP(date: Date) {\n    try {\n        return new Intl.DateTimeFormat('pt-BR', {\n            timeZone: SAO_PAULO_TIMEZONE,\n            day: '2-digit',\n            month: 'short',\n        }).format(date);\n    } catch {\n        return dayKeyFromSP(date);\n    }\n}\n\nfunction weekdayShortFromSP(date: Date) {\n    try {\n        const w = new Intl.DateTimeFormat('pt-BR', {\n            timeZone: SAO_PAULO_TIMEZONE,\n            weekday: 'short',\n        }).format(date);\n        return String(w).replace('.', '').toLowerCase(); // seg, ter, qua...\n    } catch {\n        return '';\n    }\n}\n\nfunction formatDateTimeSP(date: Date) {\n    try {\n        return new Intl.DateTimeFormat('pt-BR', {\n            timeZone: SAO_PAULO_TIMEZONE,\n            day: '2-digit',\n            month: '2-digit',\n            year: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit',\n            hour12: false,\n        }).format(date);\n    } catch {\n        return date.toISOString();\n    }\n}\n\nfunction toSaoPauloParts(date: Date): { hour: number } {\n    const fmt = new Intl.DateTimeFormat('pt-BR', {\n        timeZone: SAO_PAULO_TIMEZONE,\n        hour: '2-digit',\n        hour12: false,\n    });\n\n    const parts = fmt.formatToParts(date);\n    const hourStr = parts.find((p) => p.type === 'hour')?.value ?? '00';\n    const hour = Math.max(0, Math.min(23, Number(hourStr)));\n    return { hour };\n}\n\n// ===============================\n// Unidade (mesma regra dos outros)\n// ===============================\nasync function resolveUnitScope(admin: {\n    unitId: string | null;\n    canSeeAllUnits: boolean;\n}) {\n    if (!admin.canSeeAllUnits) return admin.unitId;\n\n    const cookieStore = await cookies();\n    const cookieValue =\n        cookieStore.get(UNIT_COOKIE_NAME)?.value ?? UNIT_ALL_VALUE;\n\n    if (!cookieValue || cookieValue === UNIT_ALL_VALUE) return null;\n    return cookieValue;\n}\n\nfunction whereUnit(unitId: string | null) {\n    return unitId ? { unitId } : {};\n}\n\ntype UnitOption = { id: string; name: string };\n\ntype CompareMode = 'prev_month' | 'prev_year';\nfunction safeCompareMode(raw?: string): CompareMode {\n    return raw === 'prev_year' ? 'prev_year' : 'prev_month';\n}\nfunction compareLabel(mode: CompareMode) {\n    return mode === 'prev_year' ? 'ano anterior' : 'm√™s anterior';\n}\n\n// ===============================\n// Format helpers\n// ===============================\nfunction safeDiv(num: number, den: number) {\n    if (!Number.isFinite(num) || !Number.isFinite(den) || den <= 0) return NaN;\n    return num / den;\n}\n\nfunction pct(num: number, den: number) {\n    const v = safeDiv(num, den);\n    return Number.isFinite(v) ? v * 100 : NaN;\n}\n\nfunction formatInt(value: number) {\n    if (!Number.isFinite(value)) return '‚Äî';\n    return new Intl.NumberFormat('pt-BR', { maximumFractionDigits: 0 }).format(\n        value\n    );\n}\n\nfunction formatSignedInt(n: number) {\n    if (!Number.isFinite(n)) return '‚Äî';\n    const sign = n > 0 ? '+' : '';\n    return `${sign}${formatInt(n)}`;\n}\n\nfunction formatSignedPct(value: number) {\n    if (!Number.isFinite(value)) return '‚Äî';\n    const sign = value > 0 ? '+' : '';\n    return `${sign}${Math.round(value)}%`;\n}\n\nfunction clamp01(v: number) {\n    if (!Number.isFinite(v)) return 0;\n    return Math.max(0, Math.min(1, v));\n}\n\nfunction safeString(v: any, max = 120) {\n    const s = typeof v === 'string' ? v : '';\n    const t = s.trim();\n    if (!t) return '';\n    return t.length > max ? t.slice(0, max) : t;\n}\n\n// ===============================\n// UI helpers\n// ===============================\nfunction KpiCard(props: { title: string; value: string; sub?: string }) {\n    return (\n        <div className=\"rounded-xl border border-border-primary bg-background-tertiary px-4 py-3\">\n            <p className=\"text-label-small text-content-secondary\">\n                {props.title}\n            </p>\n            <p className=\"text-title text-content-primary tabular-nums\">\n                {props.value}\n            </p>\n            {props.sub ? (\n                <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                    {props.sub}\n                </p>\n            ) : null}\n        </div>\n    );\n}\n\nexport default async function AdminReportsAnalyticsPage({\n    searchParams,\n}: AdminReportsAnalyticsPageProps) {\n    const session = (await requireAdminForModule('REPORTS')) as any;\n\n    // ‚úÖ resolve companyId sem depender do cookie (n√£o redireciona pro login)\n    const companyId = await resolveCompanyIdOrThrow(session);\n\n    if (!session?.canSeeAllUnits && !session?.unitId) {\n        throw new Error(\n            'Admin de unidade sem unitId definido. Vincule este admin a uma unidade.'\n        );\n    }\n\n    const cookieStore = await cookies();\n\n    const unitCookieValue =\n        cookieStore.get(UNIT_COOKIE_NAME)?.value ?? UNIT_ALL_VALUE;\n\n    const selectedUnitValue = session?.canSeeAllUnits\n        ? unitCookieValue\n        : (session?.unitId ?? '');\n\n    const activeUnitId = await resolveUnitScope({\n        unitId: session?.unitId ?? null,\n        canSeeAllUnits: !!session?.canSeeAllUnits,\n    });\n\n    // üîí sanity check: unidade pertence √† empresa\n    if (activeUnitId) {\n        const ok = await prisma.unit.findFirst({\n            where: { id: activeUnitId, companyId, isActive: true },\n            select: { id: true },\n        });\n        if (!ok) redirect('/admin/reports');\n    }\n\n    const { month: monthParam, compare } = await searchParams;\n\n    const compareMode = safeCompareMode(compare);\n\n    const referenceDate = monthParam\n        ? parse(monthParam, 'yyyy-MM', new Date())\n        : new Date();\n\n    const compareDate =\n        compareMode === 'prev_year'\n            ? subYears(referenceDate, 1)\n            : subMonths(referenceDate, 1);\n\n    const monthStart = startOfMonthSP(referenceDate);\n    const monthEnd = endOfMonthSP(referenceDate);\n\n    const compareStart = startOfMonthSP(compareDate);\n    const compareEnd = endOfMonthSP(compareDate);\n\n    const monthLabel = format(referenceDate, \"MMMM 'de' yyyy\", {\n        locale: ptBR,\n    });\n\n    // ===== Unidades (para filtro) ‚úÖ companyId\n    let units: UnitOption[] = [];\n    let fixedUnitName: string | null = null;\n\n    if (session?.canSeeAllUnits) {\n        units = await prisma.unit.findMany({\n            where: { companyId, isActive: true },\n            select: { id: true, name: true },\n            orderBy: { name: 'asc' },\n        });\n    } else if (session?.unitId) {\n        const u = await prisma.unit.findFirst({\n            where: { id: session.unitId, companyId },\n            select: { name: true },\n        });\n        fixedUnitName = u?.name ?? null;\n    }\n\n    const ownerHasMultipleUnits = !!session?.canSeeAllUnits && units.length > 1;\n    const ownerSingleUnitName =\n        !!session?.canSeeAllUnits && units.length === 1 ? units[0]?.name : null;\n\n    const unitLabel = session?.canSeeAllUnits\n        ? (ownerSingleUnitName ?? 'Todas as unidades')\n        : (fixedUnitName ?? '');\n\n    // ===============================\n    // Analytics query ‚úÖ companyId\n    // ===============================\n    const TRACKED = [\n        'page_viewed',\n        'product_impression',\n        'product_click',\n        'add_to_cart_success',\n        'add_to_cart_attempt',\n        'nav_click',\n        'search_change',\n        'filter_category',\n        'action_click',\n    ] as const;\n\n    type AE = {\n        name: string;\n        ts: Date;\n        userId: string | null;\n        source: string | null;\n        payload: any | null;\n        context: any | null;\n    };\n\n    const [baseEvents, compareEvents] = await Promise.all([\n        prisma.analyticsEvent.findMany({\n            where: {\n                companyId,\n                ts: { gte: monthStart, lte: monthEnd },\n                name: { in: TRACKED as any },\n                ...whereUnit(activeUnitId),\n            },\n            select: {\n                name: true,\n                ts: true,\n                userId: true,\n                source: true,\n                payload: true,\n                context: true,\n            },\n            orderBy: { ts: 'asc' },\n            take: 50_000,\n        }) as any as Promise<AE[]>,\n        prisma.analyticsEvent.findMany({\n            where: {\n                companyId,\n                ts: { gte: compareStart, lte: compareEnd },\n                name: { in: TRACKED as any },\n                ...whereUnit(activeUnitId),\n            },\n            select: {\n                name: true,\n                ts: true,\n                userId: true,\n                source: true,\n                payload: true,\n                context: true,\n            },\n            orderBy: { ts: 'asc' },\n            take: 50_000,\n        }) as any as Promise<AE[]>,\n    ]);\n\n    // ===============================\n    // KPIs\n    // ===============================\n    const countByName = (events: AE[]) => {\n        const m = new Map<string, number>();\n        for (const e of events) {\n            m.set(e.name, (m.get(e.name) ?? 0) + 1);\n        }\n        return m;\n    };\n\n    const baseC = countByName(baseEvents);\n    const cmpC = countByName(compareEvents);\n\n    const basePageViews = baseC.get('page_viewed') ?? 0;\n    const cmpPageViews = cmpC.get('page_viewed') ?? 0;\n\n    const baseImpressions = baseC.get('product_impression') ?? 0;\n    const cmpImpressions = cmpC.get('product_impression') ?? 0;\n\n    const baseClicks = baseC.get('product_click') ?? 0;\n    const cmpClicks = cmpC.get('product_click') ?? 0;\n\n    const baseATC = baseC.get('add_to_cart_success') ?? 0;\n    const cmpATC = cmpC.get('add_to_cart_success') ?? 0;\n\n    const baseUniqueUsers = (() => {\n        const s = new Set<string>();\n        for (const e of baseEvents) if (e.userId) s.add(e.userId);\n        return s.size;\n    })();\n\n    const cmpUniqueUsers = (() => {\n        const s = new Set<string>();\n        for (const e of compareEvents) if (e.userId) s.add(e.userId);\n        return s.size;\n    })();\n\n    const baseCTR = pct(baseClicks, baseImpressions);\n    const cmpCTR = pct(cmpClicks, cmpImpressions);\n\n    const baseATCRate = pct(baseATC, baseClicks);\n    const cmpATCRate = pct(cmpATC, cmpClicks);\n\n    const pvDelta = basePageViews - cmpPageViews;\n    const pvDeltaPct = pct(pvDelta, cmpPageViews);\n\n    const uuDelta = baseUniqueUsers - cmpUniqueUsers;\n    const uuDeltaPct = pct(uuDelta, cmpUniqueUsers);\n\n    const impDelta = baseImpressions - cmpImpressions;\n    const impDeltaPct = pct(impDelta, cmpImpressions);\n\n    const clickDelta = baseClicks - cmpClicks;\n    const clickDeltaPct = pct(clickDelta, cmpClicks);\n\n    const ctrDeltaPP = baseCTR - cmpCTR;\n    const atcDelta = baseATC - cmpATC;\n    const atcDeltaPct = pct(atcDelta, cmpATC);\n\n    const atcRateDeltaPP = baseATCRate - cmpATCRate;\n\n    // ===============================\n    // √öltimo evento (SP) pra sanity check\n    // ===============================\n    const lastEvent = baseEvents.length\n        ? baseEvents[baseEvents.length - 1]\n        : null;\n    const lastEventText = lastEvent\n        ? `${safeString(lastEvent.name, 60)} ‚Ä¢ ${formatDateTimeSP(lastEvent.ts)} (SP)`\n        : '‚Äî';\n\n    // ===============================\n    // Por dia (bucket em SP)\n    // ===============================\n    type DayRow = {\n        key: string; // yyyy-MM-dd (SP)\n        label: string; // 29/dez\n        weekday: string; // seg/ter...\n        pageViews: number;\n        impressions: number;\n        clicks: number;\n        atc: number;\n        total: number;\n    };\n\n    const dailyBucket = new Map<string, DayRow>();\n\n    // ‚úÖ pr√©-cria TODOS os dias do m√™s\n    const monthDays: {\n        key: string;\n        date: Date;\n        label: string;\n        weekday: string;\n    }[] = [];\n    {\n        let cursor = startOfDaySP(monthStart);\n        const endCursor = endOfDaySP(monthEnd);\n\n        while (cursor.getTime() <= endCursor.getTime()) {\n            const key = dayKeyFromSP(cursor);\n            const label = dayLabelFromSP(cursor);\n            const weekday = weekdayShortFromSP(cursor);\n            monthDays.push({ key, date: cursor, label, weekday });\n\n            dailyBucket.set(key, {\n                key,\n                label,\n                weekday,\n                pageViews: 0,\n                impressions: 0,\n                clicks: 0,\n                atc: 0,\n                total: 0,\n            });\n\n            cursor = new Date(cursor.getTime() + 24 * 60 * 60 * 1000);\n        }\n    }\n\n    for (const e of baseEvents) {\n        const key = dayKeyFromSP(e.ts);\n        const row = dailyBucket.get(key);\n        if (!row) continue;\n\n        if (e.name === 'page_viewed') row.pageViews += 1;\n        if (e.name === 'product_impression') row.impressions += 1;\n        if (e.name === 'product_click') row.clicks += 1;\n        if (e.name === 'add_to_cart_success') row.atc += 1;\n\n        row.total += 1;\n    }\n\n    const dailyRows: DayRow[] = monthDays.map((d) => dailyBucket.get(d.key)!);\n\n    // ===============================\n    // Heatmap (Page views por DIA DO M√äS x HORA)\n    // ===============================\n    const dayIndex = new Map<string, number>();\n    monthDays.forEach((d, i) => dayIndex.set(d.key, i));\n\n    const heatDayHour = Array.from({ length: monthDays.length }, () =>\n        Array(24).fill(0)\n    );\n\n    for (const e of baseEvents) {\n        if (e.name !== 'page_viewed') continue;\n        const key = dayKeyFromSP(e.ts);\n        const idx = dayIndex.get(key);\n        if (idx == null) continue;\n\n        const { hour } = toSaoPauloParts(e.ts);\n        heatDayHour[idx][hour] += 1;\n    }\n\n    let heatMax = 0;\n    for (const row of heatDayHour)\n        for (const v of row) heatMax = Math.max(heatMax, v);\n\n    // ===============================\n    // Top p√°ginas (page_viewed payload.page)\n    // ===============================\n    const topPages = (() => {\n        const m = new Map<string, number>();\n        for (const e of baseEvents) {\n            if (e.name !== 'page_viewed') continue;\n            const page =\n                safeString((e.payload as any)?.page, 80) || '(sem page)';\n            m.set(page, (m.get(page) ?? 0) + 1);\n        }\n        return Array.from(m.entries())\n            .map(([page, count]) => ({ page, count }))\n            .sort((a, b) => b.count - a.count)\n            .slice(0, 12);\n    })();\n\n    // ===============================\n    // Top produtos (impression/click/atc por productId)\n    // ===============================\n    type ProductAgg = {\n        productId: string;\n        impressions: number;\n        clicks: number;\n        atc: number;\n    };\n\n    const productsAgg = (() => {\n        const m = new Map<string, ProductAgg>();\n        const bump = (id: string, k: keyof Omit<ProductAgg, 'productId'>) => {\n            const prev = m.get(id) ?? {\n                productId: id,\n                impressions: 0,\n                clicks: 0,\n                atc: 0,\n            };\n            prev[k] += 1;\n            m.set(id, prev);\n        };\n\n        for (const e of baseEvents) {\n            const pid =\n                safeString((e.payload as any)?.productId, 80) ||\n                safeString((e.payload as any)?.product?.id, 80) ||\n                '';\n\n            if (!pid) continue;\n\n            if (e.name === 'product_impression') bump(pid, 'impressions');\n            if (e.name === 'product_click') bump(pid, 'clicks');\n            if (e.name === 'add_to_cart_success') bump(pid, 'atc');\n        }\n\n        return Array.from(m.values())\n            .sort((a, b) => {\n                const sa = a.atc * 100 + a.clicks * 10 + a.impressions;\n                const sb = b.atc * 100 + b.clicks * 10 + b.impressions;\n                return sb - sa;\n            })\n            .slice(0, 12);\n    })();\n\n    const productIds = productsAgg.map((p) => p.productId).filter(Boolean);\n\n    // ‚úÖ products tamb√©m s√£o tenant-scoped\n    const productsInfo = productIds.length\n        ? await prisma.product.findMany({\n              where: { companyId, id: { in: productIds } },\n              select: { id: true, name: true },\n          })\n        : [];\n\n    const productNameMap = new Map(productsInfo.map((p) => [p.id, p.name]));\n\n    // ===============================\n    // Insights\n    // ===============================\n    const insights: string[] = [];\n\n    if (baseEvents.length === 0) {\n        insights.push('Sem eventos no per√≠odo selecionado.');\n    } else {\n        if (pvDelta > 0) insights.push('Tr√°fego subiu no per√≠odo.');\n        if (pvDelta < 0) insights.push('Tr√°fego caiu no per√≠odo.');\n\n        if (Number.isFinite(baseCTR))\n            insights.push(`CTR de produto: ~${Math.round(baseCTR)}%.`);\n        if (Number.isFinite(baseATCRate)) {\n            insights.push(\n                `Convers√£o clique ‚Üí carrinho: ~${Math.round(baseATCRate)}%.`\n            );\n        }\n\n        if (topPages[0]?.page)\n            insights.push(`P√°gina l√≠der: ${topPages[0].page}.`);\n\n        if (productsAgg[0]?.productId) {\n            const name = productNameMap.get(productsAgg[0].productId);\n            insights.push(\n                `Produto mais quente: ${name ?? productsAgg[0].productId} (ATC: ${\n                    productsAgg[0].atc\n                }).`\n            );\n        }\n\n        insights.push(`√öltimo evento: ${lastEventText}.`);\n    }\n\n    const limitedInsights = insights.slice(0, 6);\n\n    return (\n        <div className=\"space-y-6 max-w-7xl\">\n            <header className=\"space-y-3\">\n                <div className=\"flex items-center justify-between gap-3\">\n                    <h1 className=\"text-title text-content-primary\">\n                        Analytics: Acesso, Interesse & Convers√£o\n                    </h1>\n\n                    <Button variant=\"outline\" asChild>\n                        <Link href=\"/admin/report\">Voltar</Link>\n                    </Button>\n                </div>\n\n                <div\n                    className={cn(\n                        'rounded-xl border border-border-primary bg-background-tertiary p-3'\n                    )}\n                >\n                    <div className=\"grid gap-3 md:grid-cols-[1fr_1fr_auto] md:items-end\">\n                        <div className=\"w-full [&_select]:h-12 [&_select]:min-h-12 [&_select]:py-2\">\n                            {ownerHasMultipleUnits ? (\n                                <UnitFilter\n                                    units={units}\n                                    value={selectedUnitValue}\n                                />\n                            ) : (\n                                <div className=\"space-y-2\">\n                                    <p className=\"text-label-small text-content-secondary\">\n                                        Unidade\n                                    </p>\n                                    <div\n                                        className={cn(\n                                            'h-12 w-full rounded-md border border-border-primary',\n                                            'bg-background-secondary px-3',\n                                            'flex items-center',\n                                            'text-content-primary text-sm'\n                                        )}\n                                        title={unitLabel}\n                                    >\n                                        <span className=\"truncate\">\n                                            {unitLabel}\n                                        </span>\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n\n                        <div className=\"w-full [&_select]:h-12 [&_select]:min-h-12 [&_select]:py-2\">\n                            <CompareWithFilter value={compareMode} />\n                        </div>\n\n                        <div className=\"justify-self-end\">\n                            <MonthPicker />\n                        </div>\n                    </div>\n\n                    <div className=\"mt-3 text-[11px] text-content-tertiary\">\n                        Escopo:{' '}\n                        <span className=\"text-content-primary\">\n                            {unitLabel}\n                            {` ‚Ä¢ ${monthLabel}`}\n                        </span>\n                        <span className=\"ml-2 text-content-tertiary\">\n                            ¬∑ √öltimo evento:{' '}\n                            <span className=\"text-content-primary\">\n                                {lastEventText}\n                            </span>\n                        </span>\n                    </div>\n                </div>\n            </header>\n\n            {/* KPIs */}\n            <section className=\"grid gap-4 md:grid-cols-4\">\n                <KpiCard\n                    title=\"Page views\"\n                    value={formatInt(basePageViews)}\n                    sub={`vs ${compareLabel(compareMode)}: ${formatInt(cmpPageViews)} (${formatSignedInt(\n                        pvDelta\n                    )} | ${formatSignedPct(pvDeltaPct)})`}\n                />\n\n                <KpiCard\n                    title=\"Usu√°rios √∫nicos (logados)\"\n                    value={formatInt(baseUniqueUsers)}\n                    sub={`vs ${compareLabel(compareMode)}: ${formatInt(\n                        cmpUniqueUsers\n                    )} (${formatSignedInt(uuDelta)} | ${formatSignedPct(uuDeltaPct)})`}\n                />\n\n                <KpiCard\n                    title=\"Impress√µes de produto\"\n                    value={formatInt(baseImpressions)}\n                    sub={`vs ${compareLabel(compareMode)}: ${formatInt(\n                        cmpImpressions\n                    )} (${formatSignedInt(impDelta)} | ${formatSignedPct(impDeltaPct)})`}\n                />\n\n                <KpiCard\n                    title=\"Cliques em produto\"\n                    value={formatInt(baseClicks)}\n                    sub={`vs ${compareLabel(compareMode)}: ${formatInt(\n                        cmpClicks\n                    )} (${formatSignedInt(clickDelta)} | ${formatSignedPct(\n                        clickDeltaPct\n                    )}) ‚Ä¢ CTR: ${\n                        Number.isFinite(baseCTR)\n                            ? `${Math.round(baseCTR)}%`\n                            : '‚Äî'\n                    }${\n                        Number.isFinite(ctrDeltaPP)\n                            ? ` (${ctrDeltaPP > 0 ? '+' : ''}${Math.round(ctrDeltaPP)} p.p.)`\n                            : ''\n                    }`}\n                />\n            </section>\n\n            {/* Convers√£o */}\n            <section className=\"grid gap-4 md:grid-cols-3\">\n                <KpiCard\n                    title=\"Add to cart (sucesso)\"\n                    value={formatInt(baseATC)}\n                    sub={`vs ${compareLabel(compareMode)}: ${formatInt(\n                        cmpATC\n                    )} (${formatSignedInt(atcDelta)} | ${formatSignedPct(atcDeltaPct)})`}\n                />\n                <KpiCard\n                    title=\"Convers√£o (impress√£o ‚Üí clique)\"\n                    value={\n                        Number.isFinite(baseCTR)\n                            ? `${Math.round(baseCTR)}%`\n                            : '‚Äî'\n                    }\n                    sub={`vs ${compareLabel(compareMode)}: ${\n                        Number.isFinite(cmpCTR) ? `${Math.round(cmpCTR)}%` : '‚Äî'\n                    }${\n                        Number.isFinite(ctrDeltaPP)\n                            ? ` (${ctrDeltaPP > 0 ? '+' : ''}${Math.round(ctrDeltaPP)} p.p.)`\n                            : ''\n                    }`}\n                />\n                <KpiCard\n                    title=\"Convers√£o (clique ‚Üí carrinho)\"\n                    value={\n                        Number.isFinite(baseATCRate)\n                            ? `${Math.round(baseATCRate)}%`\n                            : '‚Äî'\n                    }\n                    sub={`vs ${compareLabel(compareMode)}: ${\n                        Number.isFinite(cmpATCRate)\n                            ? `${Math.round(cmpATCRate)}%`\n                            : '‚Äî'\n                    }${\n                        Number.isFinite(atcRateDeltaPP)\n                            ? ` (${atcRateDeltaPP > 0 ? '+' : ''}${Math.round(\n                                  atcRateDeltaPP\n                              )} p.p.)`\n                            : ''\n                    }`}\n                />\n            </section>\n\n            {/* Insights */}\n            <section className=\"rounded-xl border border-border-primary bg-background-tertiary p-4\">\n                <div className=\"flex items-start justify-between gap-3\">\n                    <div>\n                        <p className=\"text-label-large text-content-primary\">\n                            Insights\n                        </p>\n                        <p className=\"text-[11px] text-content-tertiary\">\n                            Leitura r√°pida do que mudou no per√≠odo.\n                        </p>\n                    </div>\n                </div>\n\n                {limitedInsights.length === 0 ? (\n                    <div\n                        className={cn(\n                            'mt-4 h-20 w-full rounded-lg border border-border-primary',\n                            'bg-background-secondary',\n                            'flex items-center justify-center',\n                            'text-content-tertiary text-sm'\n                        )}\n                    >\n                        Sem insights.\n                    </div>\n                ) : (\n                    <ul className=\"mt-4 grid gap-2 md:grid-cols-2\">\n                        {limitedInsights.map((t, idx) => (\n                            <li\n                                key={`${idx}-${t}`}\n                                className={cn(\n                                    'rounded-lg border border-border-primary bg-background-secondary px-3 py-2',\n                                    'text-[12px] text-content-primary'\n                                )}\n                            >\n                                {t}\n                            </li>\n                        ))}\n                    </ul>\n                )}\n            </section>\n\n            {/* Heatmap */}\n            <section className=\"rounded-xl border border-border-primary bg-background-tertiary p-4\">\n                <div className=\"flex items-start justify-between gap-3\">\n                    <div>\n                        <p className=\"text-label-large text-content-primary\">\n                            Heatmap de acessos (page_viewed)\n                        </p>\n                        <p className=\"text-[11px] text-content-tertiary\">\n                            Distribui√ß√£o por dia do m√™s e hora (S√£o Paulo).\n                        </p>\n                    </div>\n                    <div className=\"text-[11px] text-content-tertiary text-right\">\n                        <div>M√°ximo por c√©lula: {formatInt(heatMax)}</div>\n                        <div>Dias no m√™s: {monthDays.length}</div>\n                    </div>\n                </div>\n\n                {basePageViews === 0 ? (\n                    <div\n                        className={cn(\n                            'mt-4 h-28 w-full rounded-lg border border-border-primary',\n                            'bg-background-secondary',\n                            'flex items-center justify-center',\n                            'text-content-tertiary text-sm'\n                        )}\n                    >\n                        Sem page views no per√≠odo.\n                    </div>\n                ) : (\n                    <div className=\"mt-4 overflow-x-auto\">\n                        <table className=\"min-w-245 text-left text-[12px]\">\n                            <thead>\n                                <tr className=\"border-b border-border-primary text-content-secondary\">\n                                    <th className=\"py-2 pr-3\">Dia</th>\n                                    {Array.from({ length: 24 }, (_, h) => (\n                                        <th\n                                            key={h}\n                                            className=\"py-2 px-2 text-center\"\n                                        >\n                                            {String(h).padStart(2, '0')}\n                                        </th>\n                                    ))}\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {heatDayHour.map((row, idx) => {\n                                    const d = monthDays[idx];\n                                    return (\n                                        <tr\n                                            key={d.key}\n                                            className=\"border-b border-border-primary/60 last:border-0\"\n                                        >\n                                            <td className=\"py-2 pr-3 text-content-primary font-medium whitespace-nowrap\">\n                                                <div className=\"flex flex-col\">\n                                                    <span>\n                                                        {d.label}{' '}\n                                                        <span className=\"text-[11px] text-content-tertiary\">\n                                                            ({d.weekday})\n                                                        </span>\n                                                    </span>\n                                                    <span className=\"text-[11px] text-content-tertiary\">\n                                                        {d.key}\n                                                    </span>\n                                                </div>\n                                            </td>\n\n                                            {row.map((v, h) => {\n                                                const intensity =\n                                                    heatMax > 0\n                                                        ? v / heatMax\n                                                        : 0;\n                                                const a =\n                                                    0.06 +\n                                                    clamp01(intensity) * 0.55;\n\n                                                return (\n                                                    <td\n                                                        key={h}\n                                                        className=\"py-2 px-2\"\n                                                    >\n                                                        <div\n                                                            className={cn(\n                                                                'h-7 w-8 rounded-md border border-border-primary',\n                                                                'flex items-center justify-center tabular-nums',\n                                                                'text-[11px] text-content-primary'\n                                                            )}\n                                                            style={{\n                                                                backgroundColor: `rgba(124,108,255,${a})`,\n                                                            }}\n                                                            title={`${d.key} ‚Ä¢ ${String(\n                                                                h\n                                                            ).padStart(\n                                                                2,\n                                                                '0'\n                                                            )}:00 ‚Ä¢ ${v} views`}\n                                                        >\n                                                            {v ? v : ''}\n                                                        </div>\n                                                    </td>\n                                                );\n                                            })}\n                                        </tr>\n                                    );\n                                })}\n                            </tbody>\n                        </table>\n                    </div>\n                )}\n            </section>\n\n            {/* Top produtos */}\n            <section className=\"rounded-xl border border-border-primary bg-background-tertiary p-4\">\n                <div className=\"flex items-start justify-between gap-3\">\n                    <div>\n                        <p className=\"text-label-large text-content-primary\">\n                            Produtos: interesse e a√ß√£o\n                        </p>\n                        <p className=\"text-[11px] text-content-tertiary\">\n                            Baseado em impress√µes, cliques e add-to-cart\n                            (sucesso).\n                        </p>\n                    </div>\n                </div>\n\n                {productsAgg.length === 0 ? (\n                    <div\n                        className={cn(\n                            'mt-4 h-28 w-full rounded-lg border border-border-primary',\n                            'bg-background-secondary',\n                            'flex items-center justify-center',\n                            'text-content-tertiary text-sm'\n                        )}\n                    >\n                        Sem eventos de produto no per√≠odo.\n                    </div>\n                ) : (\n                    <div className=\"mt-4 overflow-x-auto\">\n                        <table className=\"min-w-full text-left text-[12px]\">\n                            <thead>\n                                <tr className=\"border-b border-border-primary text-content-secondary\">\n                                    <th className=\"py-2 pr-3\">Produto</th>\n                                    <th className=\"py-2 pr-3 text-right\">\n                                        Impress√µes\n                                    </th>\n                                    <th className=\"py-2 pr-3 text-right\">\n                                        Cliques\n                                    </th>\n                                    <th className=\"py-2 pr-3 text-right\">\n                                        CTR\n                                    </th>\n                                    <th className=\"py-2 pr-3 text-right\">\n                                        Carrinho\n                                    </th>\n                                    <th className=\"py-2 pr-3 text-right\">\n                                        Clique ‚Üí Carrinho\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {productsAgg.map((r) => {\n                                    const name = productNameMap.get(\n                                        r.productId\n                                    );\n                                    const ctr = pct(r.clicks, r.impressions);\n                                    const c2c = pct(r.atc, r.clicks);\n\n                                    return (\n                                        <tr\n                                            key={r.productId}\n                                            className=\"border-b border-border-primary/60 last:border-0\"\n                                        >\n                                            <td className=\"py-2 pr-3 text-content-primary font-medium\">\n                                                <div className=\"flex flex-col\">\n                                                    <span className=\"truncate\">\n                                                        {name ?? r.productId}\n                                                    </span>\n                                                    {!name ? (\n                                                        <span className=\"text-[11px] text-content-tertiary\">\n                                                            {r.productId}\n                                                        </span>\n                                                    ) : null}\n                                                </div>\n                                            </td>\n                                            <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                                {formatInt(r.impressions)}\n                                            </td>\n                                            <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                                {formatInt(r.clicks)}\n                                            </td>\n                                            <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                                {Number.isFinite(ctr)\n                                                    ? `${Math.round(ctr)}%`\n                                                    : '‚Äî'}\n                                            </td>\n                                            <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                                {formatInt(r.atc)}\n                                            </td>\n                                            <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                                {Number.isFinite(c2c)\n                                                    ? `${Math.round(c2c)}%`\n                                                    : '‚Äî'}\n                                            </td>\n                                        </tr>\n                                    );\n                                })}\n                            </tbody>\n                        </table>\n                    </div>\n                )}\n            </section>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}