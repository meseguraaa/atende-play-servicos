{"version":3,"sources":["turbopack:///[project]/src/lib/admin-professionals-api.ts","turbopack:///[project]/src/components/admin/professionals/professional-row/professional-row.tsx","turbopack:///[project]/src/components/admin/professionals/professional-edit-dialog/professional-edit-dialog.tsx","turbopack:///[project]/src/components/admin/professionals/professional-new-dialog/professional-new-dialog.tsx"],"sourcesContent":["// src/lib/admin-professionals-api.ts\n\nexport type ApiOk<T> = { ok: true; data: T };\nexport type ApiErr = { ok: false; error: string };\nexport type ApiResult<T> = ApiOk<T> | ApiErr;\n\nexport type AdminProfessionalDTO = {\n    id: string;\n    companyId: string;\n    name: string;\n    email: string;\n    phone: string | null;\n    imageUrl: string | null;\n    isActive: boolean;\n    userId: string | null;\n    createdAt: string;\n    updatedAt: string;\n};\n\nexport type CreateProfessionalPayload = {\n    name: string;\n    email: string;\n    phone: string;\n    imageUrl?: string | null;\n    password: string;\n    unitIds: string[];\n};\n\nexport type UpdateProfessionalPayload = Partial<{\n    name: string;\n    email: string;\n    phone: string | null;\n    imageUrl: string | null;\n    password: string;\n    unitIds: string[];\n    isActive: boolean;\n}>;\n\nfunction safeJson<T>(res: Response): Promise<T | null> {\n    return res.json().catch(() => null);\n}\n\nfunction pickError(payload: any, fallback: string): string {\n    const msg = typeof payload?.error === 'string' ? payload.error : '';\n    return msg || fallback;\n}\n\n/**\n * GET /api/admin/professionals\n * (assumindo que sua rota retorna { ok, data } )\n */\nexport async function listProfessionals(): Promise<\n    ApiResult<AdminProfessionalDTO[]>\n> {\n    const res = await fetch('/api/admin/professionals', {\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' },\n        cache: 'no-store',\n    });\n\n    const payload = await safeJson<any>(res);\n\n    if (!res.ok) {\n        return {\n            ok: false,\n            error: pickError(payload, 'Erro ao listar profissionais.'),\n        };\n    }\n\n    if (!payload?.ok) {\n        return {\n            ok: false,\n            error: pickError(payload, 'Erro ao listar profissionais.'),\n        };\n    }\n\n    return { ok: true, data: payload.data as AdminProfessionalDTO[] };\n}\n\n/**\n * POST /api/admin/professionals\n */\nexport async function createProfessional(\n    input: CreateProfessionalPayload\n): Promise<ApiResult<AdminProfessionalDTO>> {\n    const res = await fetch('/api/admin/professionals', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        cache: 'no-store',\n        body: JSON.stringify(input),\n    });\n\n    const payload = await safeJson<any>(res);\n\n    if (!res.ok) {\n        return {\n            ok: false,\n            error: pickError(payload, 'Erro ao criar profissional.'),\n        };\n    }\n\n    if (!payload?.ok) {\n        return {\n            ok: false,\n            error: pickError(payload, 'Erro ao criar profissional.'),\n        };\n    }\n\n    return { ok: true, data: payload.data as AdminProfessionalDTO };\n}\n\n/**\n * PATCH /api/admin/professionals/[professionalId]\n */\nexport async function updateProfessional(\n    professionalId: string,\n    input: UpdateProfessionalPayload\n): Promise<ApiResult<AdminProfessionalDTO>> {\n    const res = await fetch(\n        `/api/admin/professionals/${encodeURIComponent(professionalId)}`,\n        {\n            method: 'PATCH',\n            headers: { 'Content-Type': 'application/json' },\n            cache: 'no-store',\n            body: JSON.stringify(input),\n        }\n    );\n\n    const payload = await safeJson<any>(res);\n\n    if (!res.ok) {\n        return {\n            ok: false,\n            error: pickError(payload, 'Erro ao atualizar profissional.'),\n        };\n    }\n\n    if (!payload?.ok) {\n        return {\n            ok: false,\n            error: pickError(payload, 'Erro ao atualizar profissional.'),\n        };\n    }\n\n    return { ok: true, data: payload.data as AdminProfessionalDTO };\n}\n\n/**\n * Ativar/Desativar via PATCH isActive\n */\nexport async function setProfessionalActive(\n    professionalId: string,\n    isActive: boolean\n): Promise<ApiResult<AdminProfessionalDTO>> {\n    return updateProfessional(professionalId, { isActive });\n}\n","// src/components/admin/professionals/professional-row.tsx\n'use client';\n\nimport { useMemo, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { toast } from 'sonner';\nimport { format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\n\nimport { Button } from '@/components/ui/button';\nimport {\n    AccordionContent,\n    AccordionItem,\n    AccordionTrigger,\n} from '@/components/ui/accordion';\n\nimport { ProfessionalEditDialog } from '@/components/admin/professionals/professional-edit-dialog';\nimport { updateProfessional } from '@/lib/admin-professionals-api';\n\ntype UnitOption = {\n    id: string;\n    name: string;\n    isActive: boolean;\n};\n\nconst WEEKDAY_SHORT = [\n    'Dom',\n    'Seg',\n    'Ter',\n    'Qua',\n    'Qui',\n    'Sex',\n    'Sáb',\n] as const;\n\nconst WEEKDAY_FULL = [\n    'Domingo',\n    'Segunda-feira',\n    'Terça-feira',\n    'Quarta-feira',\n    'Quinta-feira',\n    'Sexta-feira',\n    'Sábado',\n] as const;\n\ntype WeeklyAvailabilityRow = {\n    weekday: number;\n    isActive: boolean;\n    intervals: { startTime: string; endTime: string }[];\n};\n\ntype DailyAvailabilityRow = {\n    date: Date;\n    type: 'DAY_OFF' | 'CUSTOM';\n    intervals: { startTime: string; endTime: string }[];\n};\n\ntype ProfessionalReviewStats = {\n    avgRating: number;\n    totalReviews: number;\n    ratingsCount: { rating: number; count: number }[];\n    topTags: { label: string; count: number }[];\n};\n\nexport type ProfessionalRowUIData = {\n    id: string;\n    name: string;\n    email?: string | null;\n    phone?: string | null;\n    isActive?: boolean;\n\n    imageUrl?: string | null;\n\n    weeklyScheduleLabel?: string;\n    exceptionsLabel?: string;\n\n    selectedUnitIds?: string[];\n    unitsSummaryLabel?: string;\n    linkedUnits?: { id: string; name: string }[];\n\n    createdAt?: Date;\n    updatedAt?: Date;\n    userId?: string | null;\n\n    weeklyAvailabilities?: WeeklyAvailabilityRow[];\n    dailyAvailabilities?: DailyAvailabilityRow[];\n    reviewStats?: ProfessionalReviewStats | null;\n};\n\ntype ProfessionalRowProps = {\n    row: ProfessionalRowUIData;\n    units: UnitOption[];\n};\n\nfunction initials(name: string) {\n    return (name || '?')\n        .split(' ')\n        .map((n) => n[0])\n        .join('')\n        .slice(0, 2)\n        .toUpperCase();\n}\n\nfunction sortTimeIntervals(a: { startTime: string }, b: { startTime: string }) {\n    return String(a.startTime ?? '').localeCompare(String(b.startTime ?? ''));\n}\n\nfunction normalizeWeekdayTo0_6(v: number) {\n    const n = Number(v);\n    if (!Number.isFinite(n)) return -1;\n\n    if (n >= 0 && n <= 6) return n;\n    if (n >= 1 && n <= 7) return n - 1;\n\n    return -1;\n}\n\nfunction buildWeeklyMap(weekly: WeeklyAvailabilityRow[]) {\n    const map = new Map<number, WeeklyAvailabilityRow>();\n\n    for (const w of weekly ?? []) {\n        const key = normalizeWeekdayTo0_6(w.weekday);\n        if (key < 0) continue;\n        map.set(key, w);\n    }\n\n    return map;\n}\n\n// ✅ normaliza URL de imagem no Admin (browser)\nfunction normalizeAdminImageUrl(raw: unknown): string | null {\n    const s = String(raw ?? '').trim();\n    if (!s) return null;\n\n    const lower = s.toLowerCase();\n    if (lower.startsWith('http://') || lower.startsWith('https://')) return s;\n\n    // relative -> prefixa origin do navegador (admin)\n    const path = s.startsWith('/') ? s : `/${s}`;\n    return `${window.location.origin}${path}`;\n}\n\nexport function ProfessionalRow({ row, units }: ProfessionalRowProps) {\n    const router = useRouter();\n    const [isPending, setIsPending] = useState(false);\n\n    const avatarToShow = useMemo(() => {\n        if (!row.imageUrl) return null;\n        return normalizeAdminImageUrl(row.imageUrl);\n    }, [row.imageUrl]);\n\n    const isActive = Boolean(row.isActive);\n\n    const selectedUnitIds = row.selectedUnitIds ?? [];\n\n    const unitsSummary = useMemo(() => {\n        if (row.unitsSummaryLabel) return row.unitsSummaryLabel;\n\n        const linkedUnits = row.linkedUnits ?? [];\n        if (linkedUnits.length === 0) return 'Sem unidade';\n\n        if (linkedUnits.length <= 2) {\n            return linkedUnits.map((u) => u.name).join(' • ');\n        }\n\n        return `${linkedUnits.length} unidades`;\n    }, [row.unitsSummaryLabel, row.linkedUnits]);\n\n    const linkedUnitsActive = useMemo(() => {\n        return (row.linkedUnits ?? [])\n            .slice()\n            .sort((a, b) => a.name.localeCompare(b.name, 'pt-BR'));\n    }, [row.linkedUnits]);\n\n    const weekly = row.weeklyAvailabilities ?? [];\n    const daily = row.dailyAvailabilities ?? [];\n    const review = row.reviewStats ?? null;\n\n    const weeklyMap = useMemo(() => buildWeeklyMap(weekly), [weekly]);\n\n    const avgRatingDisplay = review ? review.avgRating.toFixed(2) : '—';\n\n    async function handleToggleActive() {\n        if (isPending) return;\n        setIsPending(true);\n\n        const res = await updateProfessional(row.id, {\n            isActive: !isActive,\n        });\n\n        setIsPending(false);\n\n        if (!res.ok) {\n            toast.error(res.error);\n            return;\n        }\n\n        toast.success(\n            isActive ? 'Profissional desativado.' : 'Profissional ativado.'\n        );\n\n        router.refresh();\n    }\n\n    return (\n        <AccordionItem\n            value={row.id}\n            className=\"border border-border-primary rounded-xl bg-background-tertiary\"\n        >\n            <div className=\"grid grid-cols-[minmax(0,3fr)_minmax(0,2fr)_minmax(0,2fr)_auto] items-center gap-6 px-4 py-3\">\n                <AccordionTrigger className=\"flex items-center gap-3 min-w-0 hover:no-underline px-0 py-0\">\n                    <div className=\"flex items-center gap-3 min-w-0\">\n                        {/* Avatar */}\n                        <div className=\"h-10 w-10 rounded-full bg-background-secondary border border-border-primary overflow-hidden flex items-center justify-center shrink-0\">\n                            {avatarToShow ? (\n                                // eslint-disable-next-line @next/next/no-img-element\n                                <img\n                                    src={avatarToShow}\n                                    alt={row.name}\n                                    className=\"h-full w-full object-cover\"\n                                />\n                            ) : (\n                                <span className=\"text-xs font-medium text-content-secondary\">\n                                    {initials(row.name)}\n                                </span>\n                            )}\n                        </div>\n\n                        {/* Infos */}\n                        <div className=\"flex flex-col min-w-0\">\n                            <div className=\"flex items-center gap-2 min-w-0\">\n                                <p className=\"text-paragraph-medium-size font-semibold text-content-primary truncate\">\n                                    {row.name}\n                                </p>\n\n                                {typeof row.isActive === 'boolean' && (\n                                    <span className=\"shrink-0 text-[11px] px-2 py-0.5 rounded-full border border-border-primary text-content-secondary\">\n                                        {isActive ? 'Ativo' : 'Inativo'}\n                                    </span>\n                                )}\n                            </div>\n\n                            <p className=\"text-xs text-content-secondary truncate\">\n                                {row.email || 'Sem e-mail'}{' '}\n                                <span className=\"mx-1 text-content-tertiary\">\n                                    •\n                                </span>{' '}\n                                <span className=\"text-content-secondary\">\n                                    {unitsSummary}\n                                </span>\n                            </p>\n                        </div>\n                    </div>\n                </AccordionTrigger>\n\n                {/* Escala */}\n                <div className=\"hidden md:block min-w-0 whitespace-nowrap text-xs text-content-primary truncate\">\n                    <span className=\"text-content-secondary mr-1\">\n                        Escala semanal:\n                    </span>\n                    {row.weeklyScheduleLabel ?? '—'}\n                </div>\n\n                {/* Exceções */}\n                <div className=\"hidden md:block min-w-0 whitespace-nowrap text-xs text-content-primary truncate\">\n                    <span className=\"text-content-secondary mr-1\">\n                        Exceções:\n                    </span>\n                    {row.exceptionsLabel ?? '—'}\n                </div>\n\n                {/* Ações */}\n                <div className=\"flex items-center justify-end gap-2 whitespace-nowrap\">\n                    <ProfessionalEditDialog\n                        barber={{\n                            id: row.id,\n                            name: row.name,\n                            email: row.email ?? '',\n                            phone: row.phone ?? null,\n                            isActive: isActive,\n                            createdAt: row.createdAt ?? new Date(),\n                            updatedAt: row.updatedAt ?? new Date(),\n                            userId: row.userId ?? null,\n                            imageUrl: row.imageUrl ?? null,\n                        }}\n                        units={units}\n                        selectedUnitIds={selectedUnitIds}\n                    />\n\n                    <Button\n                        type=\"button\"\n                        variant={isActive ? 'destructive' : 'active'}\n                        size=\"sm\"\n                        className=\"border-border-primary hover:bg-muted/40\"\n                        disabled={isPending}\n                        onClick={handleToggleActive}\n                    >\n                        {isPending\n                            ? 'Salvando...'\n                            : isActive\n                              ? 'Desativar'\n                              : 'Ativar'}\n                    </Button>\n                </div>\n            </div>\n\n            <AccordionContent className=\"border-t border-border-primary px-4 py-4\">\n                <div className=\"space-y-6\">\n                    {/* Unidades vinculadas */}\n                    <div className=\"rounded-2xl border border-border-primary bg-background-secondary p-4 space-y-3\">\n                        <div>\n                            <h2 className=\"text-label-small text-content-primary\">\n                                Unidades vinculadas\n                            </h2>\n                            <p className=\"text-paragraph-small text-content-secondary\">\n                                Onde este profissional pode atuar (vínculos\n                                ativos).\n                            </p>\n                        </div>\n\n                        {linkedUnitsActive.length === 0 ? (\n                            <div className=\"rounded-xl border border-dashed border-border-primary bg-background-tertiary px-4 py-6 text-center text-paragraph-small text-content-secondary\">\n                                Nenhuma unidade vinculada ainda.\n                            </div>\n                        ) : (\n                            <div className=\"flex flex-wrap gap-2\">\n                                {linkedUnitsActive.map((u) => (\n                                    <span\n                                        key={u.id}\n                                        className=\"rounded-full border border-border-primary bg-background-tertiary px-3 py-1 text-[11px] text-content-secondary\"\n                                    >\n                                        {u.name}\n                                    </span>\n                                ))}\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Reputação */}\n                    <div className=\"rounded-2xl border border-border-primary bg-background-secondary p-4 space-y-4\">\n                        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-2\">\n                            <div>\n                                <h2 className=\"text-label-small text-content-primary\">\n                                    Reputação do profissional\n                                </h2>\n                                <p className=\"text-paragraph-small text-content-secondary\">\n                                    Visão geral das avaliações feitas pelos\n                                    clientes nos atendimentos deste\n                                    profissional.\n                                </p>\n                            </div>\n\n                            {review && (\n                                <div className=\"text-right\">\n                                    <p className=\"text-paragraph-small text-content-secondary\">\n                                        Nota média\n                                    </p>\n\n                                    <p className=\"text-title font-semibold text-content-primary\">\n                                        {avgRatingDisplay}\n                                        <span className=\"ml-2 text-yellow-500 align-middle\">\n                                            {'★'.repeat(\n                                                Math.max(\n                                                    0,\n                                                    Math.min(\n                                                        5,\n                                                        Math.round(\n                                                            review.avgRating\n                                                        )\n                                                    )\n                                                )\n                                            )}\n                                        </span>\n                                    </p>\n\n                                    <p className=\"text-paragraph-small text-content-secondary\">\n                                        {review.totalReviews}{' '}\n                                        {review.totalReviews === 1\n                                            ? 'avaliação'\n                                            : 'avaliações'}\n                                    </p>\n                                </div>\n                            )}\n                        </div>\n\n                        {!review ? (\n                            <div className=\"mt-2 rounded-xl border border-dashed border-border-primary bg-background-tertiary px-4 py-6 text-center text-paragraph-small text-content-secondary\">\n                                Ainda não há avaliações registradas para este\n                                profissional.\n                            </div>\n                        ) : (\n                            <div className=\"grid gap-4 md:grid-cols-[2fr,3fr]\">\n                                <div className=\"space-y-2\">\n                                    <p className=\"text-label-small text-content-primary\">\n                                        Distribuição de notas\n                                    </p>\n\n                                    <div className=\"space-y-1 text-[11px] text-content-secondary\">\n                                        {review.ratingsCount.map((r) => (\n                                            <div\n                                                key={r.rating}\n                                                className=\"flex items-center justify-between gap-2\"\n                                            >\n                                                <span className=\"flex items-center gap-1\">\n                                                    <span className=\"text-yellow-500\">\n                                                        {r.rating}★\n                                                    </span>\n                                                </span>\n\n                                                <span className=\"text-content-primary font-medium\">\n                                                    {r.count}\n                                                </span>\n                                            </div>\n                                        ))}\n                                    </div>\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                    <p className=\"text-label-small text-content-primary\">\n                                        Principais motivos citados\n                                    </p>\n\n                                    {review.topTags.length === 0 ? (\n                                        <p className=\"text-[11px] text-content-secondary\">\n                                            Ainda não há tags suficientes para\n                                            exibir aqui.\n                                        </p>\n                                    ) : (\n                                        <div className=\"flex flex-wrap gap-2\">\n                                            {review.topTags.map((tag) => (\n                                                <span\n                                                    key={tag.label}\n                                                    className=\"rounded-full border border-border-primary bg-background-tertiary px-3 py-1 text-[11px] text-content-secondary\"\n                                                >\n                                                    {tag.label}{' '}\n                                                    <span className=\"text-content-tertiary\">\n                                                        · {tag.count}\n                                                    </span>\n                                                </span>\n                                            ))}\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Disponibilidade semanal (fallback de legibilidade aqui) */}\n                    <div className=\"rounded-2xl border border-border-primary bg-background-secondary p-4 space-y-4\">\n                        <div>\n                            <h2 className=\"text-label-small text-zinc-100\">\n                                Disponibilidade\n                            </h2>\n                            <p className=\"text-paragraph-small text-zinc-400\">\n                                Visualização dos horários salvos pelo\n                                profissional. Alterações devem ser feitas no\n                                painel dele.\n                            </p>\n                        </div>\n\n                        <div className=\"grid gap-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-7\">\n                            {WEEKDAY_SHORT.map((short, index) => {\n                                const full = WEEKDAY_FULL[index];\n\n                                const data = weeklyMap.get(index) ?? {\n                                    weekday: index,\n                                    isActive: false,\n                                    intervals: [],\n                                };\n\n                                const isDayActive =\n                                    Boolean(data.isActive) &&\n                                    (data.intervals?.length ?? 0) > 0;\n\n                                return (\n                                    <div\n                                        key={index}\n                                        className=\"rounded-xl border border-zinc-700 bg-zinc-900/40 p-3 space-y-3\"\n                                    >\n                                        <div className=\"flex items-center justify-between\">\n                                            <div>\n                                                <p className=\"text-xs text-zinc-400\">\n                                                    {short}\n                                                </p>\n                                                <p className=\"text-paragraph-small text-zinc-100 font-medium\">\n                                                    {full}\n                                                </p>\n                                            </div>\n\n                                            <span\n                                                className={[\n                                                    'text-[11px] px-2 py-0.5 rounded-full border',\n                                                    isDayActive\n                                                        ? 'border-emerald-500/60 text-emerald-300'\n                                                        : 'border-zinc-700 text-zinc-300',\n                                                ].join(' ')}\n                                            >\n                                                {isDayActive ? 'Sim' : 'Não'}\n                                            </span>\n                                        </div>\n\n                                        <div className=\"space-y-1 text-[11px] text-zinc-100\">\n                                            {isDayActive ? (\n                                                (data.intervals ?? [])\n                                                    .slice()\n                                                    .sort(sortTimeIntervals)\n                                                    .map((it, idx) => (\n                                                        <p key={idx}>\n                                                            Das{' '}\n                                                            <span className=\"font-medium\">\n                                                                {it.startTime}\n                                                            </span>{' '}\n                                                            até{' '}\n                                                            <span className=\"font-medium\">\n                                                                {it.endTime}\n                                                            </span>\n                                                        </p>\n                                                    ))\n                                            ) : (\n                                                <p className=\"text-zinc-400\">\n                                                    Sem horário definido.\n                                                </p>\n                                            )}\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n\n                        <p className=\"text-[11px] text-zinc-400\">\n                            As exceções por dia (folgas, eventos, ajustes\n                            pontuais) estão listadas abaixo.\n                        </p>\n                    </div>\n\n                    {/* Exceções por dia */}\n                    <div className=\"space-y-2\">\n                        <h3 className=\"text-label-small text-content-primary\">\n                            Exceções por dia\n                        </h3>\n                        <p className=\"text-paragraph-small text-content-secondary\">\n                            Visualização de dias com horários diferentes do\n                            padrão semanal.\n                        </p>\n\n                        {daily.length === 0 ? (\n                            <div className=\"mt-2 rounded-xl border border-dashed border-border-primary bg-background-secondary px-4 py-6 text-center text-paragraph-small text-content-secondary\">\n                                Este profissional ainda não possui nenhuma\n                                exceção cadastrada.\n                            </div>\n                        ) : (\n                            <div className=\"mt-2 space-y-2\">\n                                {daily\n                                    .slice()\n                                    .sort(\n                                        (a, b) =>\n                                            new Date(a.date).getTime() -\n                                            new Date(b.date).getTime()\n                                    )\n                                    .map((ex, idx) => {\n                                        const dateObj =\n                                            ex.date instanceof Date\n                                                ? ex.date\n                                                : new Date(ex.date);\n\n                                        return (\n                                            <div\n                                                key={idx}\n                                                className=\"rounded-xl border border-border-primary bg-background-secondary px-4 py-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2\"\n                                            >\n                                                <div className=\"space-y-1\">\n                                                    <p className=\"text-paragraph-small text-content-primary font-medium\">\n                                                        {format(\n                                                            dateObj,\n                                                            'dd/MM/yyyy',\n                                                            { locale: ptBR }\n                                                        )}\n                                                    </p>\n\n                                                    <p className=\"text-[11px] text-content-secondary\">\n                                                        {ex.type === 'DAY_OFF'\n                                                            ? 'Dia de folga'\n                                                            : 'Horário personalizado'}\n                                                    </p>\n                                                </div>\n\n                                                <div className=\"text-[11px] text-content-primary\">\n                                                    {ex.type === 'DAY_OFF' ? (\n                                                        <p>\n                                                            Sem atendimento\n                                                            neste dia.\n                                                        </p>\n                                                    ) : (ex.intervals ?? [])\n                                                          .length === 0 ? (\n                                                        <p className=\"text-content-secondary\">\n                                                            Sem intervalos\n                                                            definidos.\n                                                        </p>\n                                                    ) : (\n                                                        (\n                                                            ex.intervals ?? []\n                                                        ).map(\n                                                            (\n                                                                it,\n                                                                intervalIdx\n                                                            ) => (\n                                                                <p\n                                                                    key={\n                                                                        intervalIdx\n                                                                    }\n                                                                >\n                                                                    Das{' '}\n                                                                    <span className=\"font-medium\">\n                                                                        {\n                                                                            it.startTime\n                                                                        }\n                                                                    </span>{' '}\n                                                                    até{' '}\n                                                                    <span className=\"font-medium\">\n                                                                        {\n                                                                            it.endTime\n                                                                        }\n                                                                    </span>\n                                                                </p>\n                                                            )\n                                                        )\n                                                    )}\n                                                </div>\n                                            </div>\n                                        );\n                                    })}\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </AccordionContent>\n        </AccordionItem>\n    );\n}\n","// src/components/professional-edit-dialog/index.tsx\n'use client';\n\nimport { useEffect, useMemo, useRef, useState, type ChangeEvent } from 'react';\nimport { toast } from 'sonner';\nimport { useRouter } from 'next/navigation';\n\nimport {\n    Dialog,\n    DialogContent,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\n\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from '@/components/ui/select';\n\nimport { updateProfessional } from '@/lib/admin-professionals-api';\n\nimport { cn } from '@/lib/utils';\nimport {\n    Image as ImageIcon,\n    Upload,\n    X,\n    Building2,\n    User,\n    Mail,\n    Phone,\n    KeyRound,\n} from 'lucide-react';\n\ntype ProfessionalForEdit = {\n    id: string;\n    name: string;\n    email: string;\n    phone: string | null;\n    isActive: boolean;\n    createdAt: Date;\n    updatedAt: Date;\n    userId: string | null;\n\n    imageUrl: string | null;\n};\n\ntype UnitOption = {\n    id: string;\n    name: string;\n    isActive: boolean;\n};\n\ntype UploadResponse =\n    | {\n          ok: true;\n          data: {\n              url: string;\n              key: string;\n              mime: string;\n              size: number;\n              originalName: string;\n              module?: 'PRODUCTS' | 'PROFESSIONALS';\n              category?: 'products' | 'professionals';\n          };\n      }\n    | { ok: false; error?: string };\n\nfunction IconInput(\n    props: React.ComponentProps<typeof Input> & {\n        icon: React.ComponentType<React.SVGProps<SVGSVGElement>>;\n    }\n) {\n    const { icon: Icon, className, ...rest } = props;\n\n    return (\n        <div className=\"relative\">\n            <div className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2\">\n                <Icon className=\"h-4 w-4 text-content-brand\" />\n            </div>\n\n            <Input {...rest} className={cn('pl-10', className)} />\n        </div>\n    );\n}\n\nconst INPUT_BASE =\n    'bg-background-tertiary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0';\n\nconst SELECT_TRIGGER =\n    'h-10 w-full justify-between text-left font-normal bg-background-tertiary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0 focus-visible:border-border-brand';\n\n// ✅ normaliza URL de imagem no Admin (browser)\nfunction normalizeAdminImageUrl(raw: unknown): string | null {\n    const s = String(raw ?? '').trim();\n    if (!s) return null;\n\n    const lower = s.toLowerCase();\n    if (lower.startsWith('http://') || lower.startsWith('https://')) return s;\n\n    const path = s.startsWith('/') ? s : `/${s}`;\n    return `${window.location.origin}${path}`;\n}\n\nasync function uploadProfessionalImage(file: File) {\n    const fd = new FormData();\n    fd.append('file', file);\n    fd.append('module', 'PROFESSIONALS');\n\n    const res = await fetch('/api/admin/uploads', {\n        method: 'POST',\n        body: fd,\n    });\n\n    const json = (await res.json().catch(() => null)) as UploadResponse | null;\n\n    if (!res.ok || !json || json.ok !== true) {\n        const msg =\n            (json && json.ok === false && json.error) ||\n            'Não foi possível fazer upload da imagem.';\n        return { ok: false as const, error: msg };\n    }\n\n    return { ok: true as const, data: json.data };\n}\n\nexport function ProfessionalEditDialog({\n    barber,\n    units,\n    selectedUnitIds,\n}: {\n    barber: ProfessionalForEdit;\n    units: UnitOption[];\n    selectedUnitIds: string[];\n}) {\n    const router = useRouter();\n\n    const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n    const [open, setOpen] = useState(false);\n    const [isPending, setIsPending] = useState(false);\n\n    // upload UI state\n    const [uploadingImage, setUploadingImage] = useState(false);\n\n    // controlled (pra enviar com fetch)\n    const [name, setName] = useState(barber.name ?? '');\n    const [email, setEmail] = useState(barber.email ?? '');\n    const [phone, setPhone] = useState(barber.phone ?? '');\n\n    // ✅ imagem (upload)\n    const [imageUrl, setImageUrl] = useState(barber.imageUrl ?? '');\n\n    const [password, setPassword] = useState('');\n\n    const hasUnits = (units?.length ?? 0) > 0;\n\n    // ✅ unidade única (igual produtos)\n    const firstActiveUnitId = useMemo(() => {\n        return units.find((u) => u.isActive)?.id ?? '';\n    }, [units]);\n\n    const [selectedUnitId, setSelectedUnitId] = useState<string>(() => {\n        const fromProps = selectedUnitIds?.[0] ?? '';\n        return fromProps || firstActiveUnitId;\n    });\n\n    // ✅ quando abre, sincroniza (evita ficar “velho” se revalidou no servidor)\n    useEffect(() => {\n        if (!open) return;\n\n        setName(barber.name ?? '');\n        setEmail(barber.email ?? '');\n        setPhone(barber.phone ?? '');\n        setImageUrl(barber.imageUrl ?? '');\n        setPassword('');\n\n        const fromProps = selectedUnitIds?.[0] ?? '';\n        const next = fromProps || firstActiveUnitId;\n        setSelectedUnitId(next);\n\n        setUploadingImage(false);\n        if (fileInputRef.current) fileInputRef.current.value = '';\n    }, [\n        open,\n        barber.name,\n        barber.email,\n        barber.phone,\n        barber.imageUrl,\n        selectedUnitIds,\n        firstActiveUnitId,\n    ]);\n\n    function handlePhoneChange(e: ChangeEvent<HTMLInputElement>) {\n        let value = e.target.value.replace(/\\D/g, '').slice(0, 11);\n\n        if (value.length <= 10) {\n            value = value\n                .replace(/(\\d{2})(\\d)/, '($1) $2')\n                .replace(/(\\d{4})(\\d)/, '$1-$2');\n        } else {\n            value = value\n                .replace(/(\\d{2})(\\d)/, '($1) $2')\n                .replace(/(\\d{5})(\\d)/, '$1-$2');\n        }\n\n        setPhone(value);\n    }\n\n    async function uploadImage(file: File) {\n        if (!file.type?.startsWith('image/')) {\n            toast.error('Selecione um arquivo de imagem.');\n            return;\n        }\n\n        const maxBytes = 5 * 1024 * 1024;\n        if (file.size > maxBytes) {\n            toast.error('Imagem muito grande. Máximo: 5MB.');\n            return;\n        }\n\n        setUploadingImage(true);\n\n        const up = await uploadProfessionalImage(file);\n\n        setUploadingImage(false);\n\n        if (!up.ok) {\n            toast.error(up.error);\n            return;\n        }\n\n        setImageUrl(up.data.url);\n        toast.success('Imagem enviada!');\n    }\n\n    // ✅ usa normalização (caso venha relativa ou com host estranho)\n    const previewUrl = useMemo(() => {\n        const raw = imageUrl.trim();\n        if (!raw) return null;\n        return normalizeAdminImageUrl(raw);\n    }, [imageUrl]);\n\n    const busy = isPending || uploadingImage;\n    const unitInvalid = !hasUnits || !selectedUnitId;\n\n    async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\n        e.preventDefault();\n        if (busy) return;\n\n        if (!hasUnits) {\n            toast.error(\n                'Crie pelo menos 1 unidade antes de cadastrar profissionais.'\n            );\n            return;\n        }\n\n        const selected = units.find((u) => u.id === selectedUnitId) || null;\n        if (!selected || !selected.isActive) {\n            toast.error('Selecione uma unidade ativa.');\n            return;\n        }\n\n        setIsPending(true);\n\n        const res = await updateProfessional(barber.id, {\n            name: name.trim(),\n            email: email.trim().toLowerCase(),\n            phone: phone.trim(),\n            imageUrl: previewUrl,\n            password: password || undefined,\n            unitIds: [selectedUnitId],\n        });\n\n        setIsPending(false);\n\n        if (!res.ok) {\n            toast.error(res.error);\n            return;\n        }\n\n        toast.success('Alterações salvas!');\n        setOpen(false);\n\n        router.refresh();\n    }\n\n    return (\n        <Dialog\n            open={open}\n            onOpenChange={(next) => {\n                if (busy) return;\n                setOpen(next);\n            }}\n        >\n            <DialogTrigger asChild>\n                <Button\n                    variant=\"edit2\"\n                    size=\"sm\"\n                    className=\"border-border-primary hover:bg-muted/40\"\n                >\n                    Editar\n                </Button>\n            </DialogTrigger>\n\n            <DialogContent className=\"bg-background-secondary border border-border-primary max-h-[80vh] overflow-y-auto\">\n                <DialogHeader>\n                    <DialogTitle className=\"text-title text-content-primary\">\n                        Editar profissional\n                    </DialogTitle>\n                </DialogHeader>\n\n                <form onSubmit={handleSubmit} className=\"space-y-4 pb-2\">\n                    {/* UNIDADE (obrigatório) */}\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Unidade <span className=\"text-red-500\">*</span>\n                        </label>\n\n                        {/* ✅ mesmo padrão do ProductNewDialog (shadcn Select + SELECT_TRIGGER) */}\n                        <Select\n                            value={selectedUnitId}\n                            onValueChange={(v) => setSelectedUnitId(v)}\n                            disabled={!hasUnits || busy}\n                        >\n                            <SelectTrigger className={SELECT_TRIGGER}>\n                                <div className=\"flex items-center gap-2\">\n                                    <Building2 className=\"h-4 w-4 text-content-brand\" />\n                                    <SelectValue\n                                        placeholder={\n                                            hasUnits\n                                                ? 'Selecione a unidade'\n                                                : 'Nenhuma unidade cadastrada'\n                                        }\n                                    />\n                                </div>\n                            </SelectTrigger>\n\n                            <SelectContent>\n                                {units.map((u) => (\n                                    <SelectItem\n                                        key={u.id}\n                                        value={u.id}\n                                        disabled={!u.isActive}\n                                    >\n                                        {u.name}{' '}\n                                        {!u.isActive ? '(inativa)' : ''}\n                                    </SelectItem>\n                                ))}\n                            </SelectContent>\n                        </Select>\n\n                        {unitInvalid ? (\n                            <p className=\"text-xs text-red-500\">\n                                Selecione uma unidade ativa.\n                            </p>\n                        ) : null}\n                    </div>\n\n                    {/* IMAGEM (UPLOAD) */}\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Foto do profissional\n                        </label>\n\n                        <input\n                            ref={fileInputRef}\n                            type=\"file\"\n                            accept=\"image/*\"\n                            className=\"hidden\"\n                            disabled={busy}\n                            onChange={(e) => {\n                                const f = e.currentTarget.files?.[0];\n                                if (!f) return;\n                                void uploadImage(f);\n                            }}\n                        />\n\n                        <div className=\"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start\">\n                            <div className=\"space-y-2\">\n                                <div className=\"relative\">\n                                    <div className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2\">\n                                        <ImageIcon className=\"h-4 w-4 text-content-brand\" />\n                                    </div>\n\n                                    <Input\n                                        value={previewUrl ?? ''}\n                                        readOnly\n                                        placeholder=\"Escolha seu arquivo clicando em Upload.\"\n                                        className={cn(\n                                            'pl-10 pr-10',\n                                            INPUT_BASE\n                                        )}\n                                    />\n\n                                    {previewUrl ? (\n                                        <button\n                                            type=\"button\"\n                                            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-content-secondary hover:text-content-primary\"\n                                            onClick={() => {\n                                                setImageUrl('');\n                                                if (fileInputRef.current)\n                                                    fileInputRef.current.value =\n                                                        '';\n                                            }}\n                                            disabled={busy}\n                                            title=\"Remover imagem\"\n                                        >\n                                            <X className=\"h-4 w-4\" />\n                                        </button>\n                                    ) : null}\n                                </div>\n                            </div>\n\n                            <Button\n                                type=\"button\"\n                                variant=\"brand\"\n                                className=\"h-10\"\n                                onClick={() => fileInputRef.current?.click()}\n                                disabled={busy}\n                                title={\n                                    uploadingImage ? 'Enviando...' : undefined\n                                }\n                            >\n                                <span className=\"inline-flex items-center gap-2\">\n                                    <Upload className=\"h-4 w-4\" />\n                                    {uploadingImage ? 'Enviando...' : 'Upload'}\n                                </span>\n                            </Button>\n                        </div>\n\n                        {previewUrl ? (\n                            <div className=\"overflow-hidden rounded-xl border border-border-primary bg-background-tertiary\">\n                                {/* eslint-disable-next-line @next/next/no-img-element */}\n                                <img\n                                    src={previewUrl}\n                                    alt=\"Preview do profissional\"\n                                    className=\"h-40 w-full object-cover\"\n                                />\n                            </div>\n                        ) : null}\n                    </div>\n\n                    {/* NOME */}\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Nome <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={User}\n                            name=\"name\"\n                            required\n                            value={name}\n                            onChange={(e) => setName(e.target.value)}\n                            disabled={busy}\n                            className={INPUT_BASE}\n                        />\n                    </div>\n\n                    {/* E-MAIL */}\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            E-mail <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={Mail}\n                            type=\"email\"\n                            name=\"email\"\n                            required\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                            disabled={busy}\n                            className={INPUT_BASE}\n                        />\n                    </div>\n\n                    {/* TELEFONE */}\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Telefone <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={Phone}\n                            name=\"phone\"\n                            required\n                            placeholder=\"(99) 99999-9999\"\n                            value={phone ?? ''}\n                            onChange={handlePhoneChange}\n                            disabled={busy}\n                            className={INPUT_BASE}\n                        />\n                    </div>\n\n                    {/* SENHA */}\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Nova senha\n                        </label>\n                        <IconInput\n                            icon={KeyRound}\n                            type=\"password\"\n                            name=\"password\"\n                            value={password}\n                            onChange={(e) => setPassword(e.target.value)}\n                            disabled={busy}\n                            placeholder=\"Preencha para alterar a senha\"\n                            className={INPUT_BASE}\n                        />\n                        <p className=\"text-[11px] text-content-secondary\">\n                            Deixe vazio para manter a senha atual. Se preencher:\n                            mín. 6, 1 maiúscula, 1 número e 1 especial\n                            (!@#$%^&*()_+-=[]{};':&quot;,.&lt;&gt;/?\\|)\n                        </p>\n                    </div>\n\n                    <div className=\"flex justify-end gap-2 pt-2\">\n                        <Button\n                            type=\"submit\"\n                            variant=\"brand\"\n                            disabled={busy || unitInvalid}\n                            title={\n                                unitInvalid\n                                    ? 'Selecione uma unidade ativa'\n                                    : undefined\n                            }\n                        >\n                            {uploadingImage\n                                ? 'Enviando...'\n                                : isPending\n                                  ? 'Salvando...'\n                                  : 'Salvar alterações'}\n                        </Button>\n                    </div>\n                </form>\n            </DialogContent>\n        </Dialog>\n    );\n}\n","// src/components/professional-new-dialog/index.tsx\n'use client';\n\nimport { useMemo, useRef, useState, type ChangeEvent, useEffect } from 'react';\nimport { toast } from 'sonner';\nimport { useRouter } from 'next/navigation';\n\nimport {\n    Dialog,\n    DialogContent,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\n\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from '@/components/ui/select';\n\nimport { createProfessional } from '@/lib/admin-professionals-api';\n\nimport { cn } from '@/lib/utils';\nimport {\n    Image as ImageIcon,\n    Upload,\n    X,\n    Building2,\n    User,\n    Mail,\n    Phone,\n    KeyRound,\n} from 'lucide-react';\n\ntype UnitOption = {\n    id: string;\n    name: string;\n    isActive: boolean;\n};\n\ntype UploadResponse =\n    | {\n          ok: true;\n          data: {\n              url: string;\n              key: string;\n              mime: string;\n              size: number;\n              originalName: string;\n              module?: 'PRODUCTS' | 'PROFESSIONALS';\n              category?: 'products' | 'professionals';\n          };\n      }\n    | { ok: false; error?: string };\n\nfunction IconInput(\n    props: React.ComponentProps<typeof Input> & {\n        icon: React.ComponentType<React.SVGProps<SVGSVGElement>>;\n    }\n) {\n    const { icon: Icon, className, ...rest } = props;\n\n    return (\n        <div className=\"relative\">\n            <div className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2\">\n                <Icon className=\"h-4 w-4 text-content-brand\" />\n            </div>\n\n            <Input {...rest} className={cn('pl-10', className)} />\n        </div>\n    );\n}\n\nconst INPUT_BASE =\n    'bg-background-tertiary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0';\n\nconst SELECT_TRIGGER =\n    'h-10 w-full justify-between text-left font-normal bg-background-tertiary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0 focus-visible:border-border-brand';\n\n// ✅ normaliza URL de imagem no Admin (browser)\nfunction normalizeAdminImageUrl(raw: unknown): string | null {\n    const s = String(raw ?? '').trim();\n    if (!s) return null;\n\n    const lower = s.toLowerCase();\n    if (lower.startsWith('http://') || lower.startsWith('https://')) return s;\n\n    // relative -> prefixa origin do navegador (admin)\n    const path = s.startsWith('/') ? s : `/${s}`;\n    return `${window.location.origin}${path}`;\n}\n\nasync function uploadProfessionalImage(file: File) {\n    const fd = new FormData();\n    fd.append('file', file);\n    fd.append('module', 'PROFESSIONALS');\n\n    const res = await fetch('/api/admin/uploads', {\n        method: 'POST',\n        body: fd,\n    });\n\n    const json = (await res.json().catch(() => null)) as UploadResponse | null;\n\n    if (!res.ok || !json || json.ok !== true) {\n        const msg =\n            (json && json.ok === false && json.error) ||\n            'Não foi possível fazer upload da imagem.';\n        return { ok: false as const, error: msg };\n    }\n\n    return { ok: true as const, data: json.data };\n}\n\nexport function ProfessionalNewDialog({ units }: { units: UnitOption[] }) {\n    const router = useRouter();\n\n    const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n    const [open, setOpen] = useState(false);\n    const [isPending, setIsPending] = useState(false);\n\n    // upload UI state\n    const [uploadingImage, setUploadingImage] = useState(false);\n\n    // UI states\n    const [name, setName] = useState('');\n    const [email, setEmail] = useState('');\n    const [phone, setPhone] = useState('');\n    const [password, setPassword] = useState('');\n\n    const hasUnits = (units?.length ?? 0) > 0;\n\n    // ✅ unidade única (igual produtos)\n    const firstActiveUnitId = useMemo(() => {\n        return units.find((u) => u.isActive)?.id ?? '';\n    }, [units]);\n\n    const [selectedUnitId, setSelectedUnitId] =\n        useState<string>(firstActiveUnitId);\n\n    // ✅ imagem (upload)\n    const [imageUrl, setImageUrl] = useState('');\n\n    useEffect(() => {\n        if (!open) return;\n\n        // ao abrir: tenta selecionar unidade ativa (se ainda não selecionou)\n        setSelectedUnitId((prev) => prev || firstActiveUnitId);\n    }, [open, firstActiveUnitId]);\n\n    function handlePhoneChange(e: ChangeEvent<HTMLInputElement>) {\n        let value = e.target.value.replace(/\\D/g, '').slice(0, 11);\n\n        if (value.length <= 10) {\n            value = value\n                .replace(/(\\d{2})(\\d)/, '($1) $2')\n                .replace(/(\\d{4})(\\d)/, '$1-$2');\n        } else {\n            value = value\n                .replace(/(\\d{2})(\\d)/, '($1) $2')\n                .replace(/(\\d{5})(\\d)/, '$1-$2');\n        }\n\n        setPhone(value);\n    }\n\n    function resetForm() {\n        setName('');\n        setEmail('');\n        setPhone('');\n        setPassword('');\n        setSelectedUnitId(firstActiveUnitId);\n        setImageUrl('');\n        setUploadingImage(false);\n\n        if (fileInputRef.current) fileInputRef.current.value = '';\n    }\n\n    async function uploadImage(file: File) {\n        // validações rápidas (mantém alinhado com o backend)\n        if (!file.type?.startsWith('image/')) {\n            toast.error('Selecione um arquivo de imagem.');\n            return;\n        }\n\n        const maxBytes = 5 * 1024 * 1024;\n        if (file.size > maxBytes) {\n            toast.error('Imagem muito grande. Máximo: 5MB.');\n            return;\n        }\n\n        setUploadingImage(true);\n\n        const up = await uploadProfessionalImage(file);\n\n        setUploadingImage(false);\n\n        if (!up.ok) {\n            toast.error(up.error);\n            return;\n        }\n\n        setImageUrl(up.data.url);\n        toast.success('Imagem enviada!');\n    }\n\n    // ✅ usa normalização (caso venha relativa ou com host estranho)\n    const previewUrl = useMemo(() => {\n        const raw = imageUrl.trim();\n        if (!raw) return null;\n        return normalizeAdminImageUrl(raw);\n    }, [imageUrl]);\n\n    async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\n        e.preventDefault();\n        if (isPending || uploadingImage) return;\n\n        if (!hasUnits) {\n            toast.error(\n                'Crie pelo menos 1 unidade antes de cadastrar profissionais.'\n            );\n            return;\n        }\n\n        const selected = units.find((u) => u.id === selectedUnitId) || null;\n        if (!selected || !selected.isActive) {\n            toast.error('Selecione uma unidade ativa.');\n            return;\n        }\n\n        setIsPending(true);\n\n        const res = await createProfessional({\n            name: name.trim(),\n            email: email.trim().toLowerCase(),\n            phone: phone.trim(),\n            password,\n            unitIds: [selectedUnitId],\n            imageUrl: previewUrl,\n        });\n\n        setIsPending(false);\n\n        if (!res.ok) {\n            toast.error(res.error);\n            return;\n        }\n\n        toast.success('Profissional criado com sucesso!');\n        setOpen(false);\n        resetForm();\n\n        // ✅ força re-render do Server Component da página e refaz o fetch no banco\n        router.refresh();\n    }\n\n    const busy = isPending || uploadingImage;\n    const unitInvalid = !hasUnits || !selectedUnitId;\n\n    return (\n        <Dialog\n            open={open}\n            onOpenChange={(next) => {\n                if (busy) return;\n                setOpen(next);\n                if (!next) resetForm();\n            }}\n        >\n            <DialogTrigger asChild>\n                <Button variant=\"brand\" disabled={!hasUnits}>\n                    Novo profissional\n                </Button>\n            </DialogTrigger>\n\n            <DialogContent className=\"bg-background-secondary border border-border-primary max-h-[80vh] overflow-y-auto\">\n                <DialogHeader>\n                    <DialogTitle className=\"text-title text-content-primary\">\n                        Novo profissional\n                    </DialogTitle>\n                </DialogHeader>\n\n                {!hasUnits ? (\n                    <div className=\"rounded-xl border border-dashed border-border-primary bg-background-tertiary p-4 text-sm text-content-secondary\">\n                        Você ainda não tem unidades ativas. Crie uma unidade\n                        primeiro para cadastrar profissionais.\n                    </div>\n                ) : (\n                    <form onSubmit={handleSubmit} className=\"space-y-4 pb-2\">\n                        {/* UNIDADE (obrigatório) */}\n                        <div className=\"space-y-2\">\n                            <label className=\"text-label-small text-content-secondary\">\n                                Unidade <span className=\"text-red-500\">*</span>\n                            </label>\n\n                            {/* ✅ mesmo padrão do ProductNewDialog (shadcn Select + SELECT_TRIGGER) */}\n                            <Select\n                                value={selectedUnitId}\n                                onValueChange={(v) => setSelectedUnitId(v)}\n                                disabled={!hasUnits || busy}\n                            >\n                                <SelectTrigger className={SELECT_TRIGGER}>\n                                    <div className=\"flex items-center gap-2\">\n                                        <Building2 className=\"h-4 w-4 text-content-brand\" />\n                                        <SelectValue\n                                            placeholder={\n                                                hasUnits\n                                                    ? 'Selecione a unidade'\n                                                    : 'Nenhuma unidade cadastrada'\n                                            }\n                                        />\n                                    </div>\n                                </SelectTrigger>\n\n                                <SelectContent>\n                                    {units.map((u) => (\n                                        <SelectItem\n                                            key={u.id}\n                                            value={u.id}\n                                            disabled={!u.isActive}\n                                        >\n                                            {u.name}{' '}\n                                            {!u.isActive ? '(inativa)' : ''}\n                                        </SelectItem>\n                                    ))}\n                                </SelectContent>\n                            </Select>\n\n                            {unitInvalid ? (\n                                <p className=\"text-xs text-red-500\">\n                                    Selecione uma unidade ativa.\n                                </p>\n                            ) : null}\n                        </div>\n\n                        {/* IMAGEM (UPLOAD) */}\n                        <div className=\"space-y-2\">\n                            <label className=\"text-label-small text-content-secondary\">\n                                Foto do profissional\n                            </label>\n\n                            <input\n                                ref={fileInputRef}\n                                type=\"file\"\n                                accept=\"image/*\"\n                                className=\"hidden\"\n                                disabled={busy}\n                                onChange={(e) => {\n                                    const f = e.currentTarget.files?.[0];\n                                    if (!f) return;\n                                    void uploadImage(f);\n                                }}\n                            />\n\n                            <div className=\"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start\">\n                                <div className=\"space-y-2\">\n                                    <div className=\"relative\">\n                                        <div className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2\">\n                                            <ImageIcon className=\"h-4 w-4 text-content-brand\" />\n                                        </div>\n\n                                        <Input\n                                            value={previewUrl ?? ''}\n                                            readOnly\n                                            placeholder=\"Escolha seu arquivo clicando em Upload.\"\n                                            className={cn(\n                                                'pl-10 pr-10',\n                                                INPUT_BASE\n                                            )}\n                                        />\n\n                                        {previewUrl ? (\n                                            <button\n                                                type=\"button\"\n                                                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-content-secondary hover:text-content-primary\"\n                                                onClick={() => {\n                                                    setImageUrl('');\n                                                    if (fileInputRef.current)\n                                                        fileInputRef.current.value =\n                                                            '';\n                                                }}\n                                                disabled={busy}\n                                                title=\"Remover imagem\"\n                                            >\n                                                <X className=\"h-4 w-4\" />\n                                            </button>\n                                        ) : null}\n                                    </div>\n                                </div>\n\n                                <Button\n                                    type=\"button\"\n                                    variant=\"brand\"\n                                    className=\"h-10\"\n                                    onClick={() =>\n                                        fileInputRef.current?.click()\n                                    }\n                                    disabled={busy}\n                                    title={\n                                        uploadingImage\n                                            ? 'Enviando...'\n                                            : undefined\n                                    }\n                                >\n                                    <span className=\"inline-flex items-center gap-2\">\n                                        <Upload className=\"h-4 w-4\" />\n                                        {uploadingImage\n                                            ? 'Enviando...'\n                                            : 'Upload'}\n                                    </span>\n                                </Button>\n                            </div>\n\n                            {previewUrl ? (\n                                <div className=\"overflow-hidden rounded-xl border border-border-primary bg-background-tertiary\">\n                                    {/* eslint-disable-next-line @next/next/no-img-element */}\n                                    <img\n                                        src={previewUrl}\n                                        alt=\"Preview do profissional\"\n                                        className=\"h-40 w-full object-cover\"\n                                    />\n                                </div>\n                            ) : null}\n                        </div>\n\n                        {/* NOME */}\n                        <div className=\"space-y-2\">\n                            <label className=\"text-label-small text-content-secondary\">\n                                Nome <span className=\"text-red-500\">*</span>\n                            </label>\n                            <IconInput\n                                icon={User}\n                                name=\"name\"\n                                required\n                                value={name}\n                                onChange={(e) => setName(e.target.value)}\n                                disabled={busy}\n                                className={INPUT_BASE}\n                            />\n                        </div>\n\n                        {/* E-MAIL */}\n                        <div className=\"space-y-2\">\n                            <label className=\"text-label-small text-content-secondary\">\n                                E-mail <span className=\"text-red-500\">*</span>\n                            </label>\n                            <IconInput\n                                icon={Mail}\n                                type=\"email\"\n                                name=\"email\"\n                                required\n                                value={email}\n                                onChange={(e) => setEmail(e.target.value)}\n                                disabled={busy}\n                                className={INPUT_BASE}\n                            />\n                        </div>\n\n                        {/* TELEFONE */}\n                        <div className=\"space-y-2\">\n                            <label className=\"text-label-small text-content-secondary\">\n                                Telefone <span className=\"text-red-500\">*</span>\n                            </label>\n                            <IconInput\n                                icon={Phone}\n                                name=\"phone\"\n                                required\n                                placeholder=\"(99) 99999-9999\"\n                                value={phone}\n                                onChange={handlePhoneChange}\n                                disabled={busy}\n                                className={INPUT_BASE}\n                            />\n                        </div>\n\n                        {/* SENHA */}\n                        <div className=\"space-y-2\">\n                            <label className=\"text-label-small text-content-secondary\">\n                                Senha <span className=\"text-red-500\">*</span>\n                            </label>\n                            <IconInput\n                                icon={KeyRound}\n                                type=\"password\"\n                                name=\"password\"\n                                required\n                                value={password}\n                                onChange={(e) => setPassword(e.target.value)}\n                                disabled={busy}\n                                placeholder=\"Defina a senha do profissional\"\n                                className={INPUT_BASE}\n                            />\n                            <p className=\"text-[11px] text-content-secondary\">\n                                Mín. 6 caracteres, 1 maiúscula, 1 número e 1\n                                especial (!@#$%^&*()_+-=[]{}\n                                ;':&quot;,.&lt;&gt;/?\\|)\n                            </p>\n                        </div>\n\n                        <div className=\"flex justify-end gap-2 pt-2\">\n                            <Button\n                                type=\"submit\"\n                                variant=\"brand\"\n                                disabled={busy || unitInvalid}\n                                title={\n                                    unitInvalid\n                                        ? 'Selecione uma unidade ativa'\n                                        : undefined\n                                }\n                            >\n                                {uploadingImage\n                                    ? 'Enviando...'\n                                    : isPending\n                                      ? 'Salvando...'\n                                      : 'Criar profissional'}\n                            </Button>\n                        </div>\n                    </form>\n                )}\n            </DialogContent>\n        </Dialog>\n    );\n}\n"],"names":[],"mappings":"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"}