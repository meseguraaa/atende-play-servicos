{"version":3,"sources":["turbopack:///[project]/src/app/admin/finance/admin-finance-client.tsx","turbopack:///[project]/src/components/expense-due-date-picker/expense-due-date-picker.tsx"],"sourcesContent":["// src/app/admin/finance/admin-finance-client.tsx\n'use client';\n\nimport * as React from 'react';\nimport { MonthPicker } from '@/components/month-picker';\nimport { Button } from '@/components/ui/button';\nimport {\n    Dialog,\n    DialogContent,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { ExpenseDueDatePicker } from '@/components/expense-due-date-picker';\nimport { cn } from '@/lib/utils';\nimport { useRouter, useSearchParams } from 'next/navigation';\n\nexport type AdminFinanceSummaryUI = {\n    netRevenueMonth: string;\n    servicesNetMonth: string;\n    productsNetMonth: string;\n    totalExpenses: string;\n    netIncome: string;\n    netIncomeIsPositive: boolean;\n};\n\n/**\n * ✅ Baseado no schema atual:\n * - Professional.id (professionalId)\n * - ganhos de serviços e comissão de produtos\n */\nexport type ProfessionalMonthlyEarningsUI = {\n    professionalId: string;\n    name: string;\n    servicesEarnings: string;\n    productsEarnings: string;\n    total: string;\n};\n\n/**\n * ✅ Compat/legado (caso alguma parte do server ainda use \"barber\")\n */\nexport type BarberMonthlyEarningsUI = {\n    barberId: string;\n    name: string;\n    servicesEarnings: string;\n    productsEarnings: string;\n    total: string;\n};\n\nexport type ExpenseRowUI = {\n    id: string;\n    description: string;\n    dueDate: string; // dd/MM/yyyy (display)\n    amount: string; // BRL formatted (display)\n    isRecurring: boolean;\n    statusLabel: string;\n    statusTone?: 'success' | 'warning' | 'danger' | 'neutral';\n};\n\ntype AdminFinanceClientProps = {\n    scopeLabel: string;\n    monthLabel: string;\n    monthQuery: string;\n    summary: AdminFinanceSummaryUI;\n\n    /**\n     * ✅ Novo: faturamento por profissional\n     * Pode vir undefined se o server ainda não estiver populando.\n     */\n    professionalEarnings?: ProfessionalMonthlyEarningsUI[];\n\n    /**\n     * ✅ Legado: se o server ainda manda barberEarnings, não quebra.\n     */\n    barberEarnings?: BarberMonthlyEarningsUI[];\n\n    expenses: ExpenseRowUI[];\n    newExpenseDisabled?: boolean;\n\n    /**\n     * ✅ Agora a seleção de unidade vive no AdminNav (menu).\n     * Mantemos apenas o label do escopo vindo do server.\n     */\n    units?: never;\n    canSeeAllUnits?: boolean;\n    unitPickerDisabled?: boolean;\n};\n\nexport default function AdminFinanceClient({\n    scopeLabel,\n    monthLabel,\n    monthQuery,\n    summary,\n    professionalEarnings,\n    barberEarnings,\n    expenses,\n    newExpenseDisabled,\n}: AdminFinanceClientProps) {\n    // ✅ Normaliza lista (não deixa undefined nunca)\n    const normalizedProfessionalEarnings: ProfessionalMonthlyEarningsUI[] =\n        Array.isArray(professionalEarnings)\n            ? professionalEarnings\n            : Array.isArray(barberEarnings)\n              ? barberEarnings.map((b) => ({\n                    professionalId: b.barberId,\n                    name: b.name,\n                    servicesEarnings: b.servicesEarnings,\n                    productsEarnings: b.productsEarnings,\n                    total: b.total,\n                }))\n              : [];\n\n    return (\n        <div className=\"space-y-6 max-w-7xl\">\n            <header className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n                <div>\n                    <h1 className=\"text-title text-content-primary\">\n                        Financeiro\n                    </h1>\n\n                    <p className=\"text-paragraph-small text-content-secondary\">\n                        Mês selecionado:{' '}\n                        <span className=\"font-medium\">{monthLabel}</span>\n                    </p>\n\n                    <p className=\"text-paragraph-small text-content-tertiary\">\n                        Unidade:{' '}\n                        <span className=\"font-medium\">{scopeLabel}</span>\n                    </p>\n                </div>\n\n                <div className=\"flex flex-col items-stretch gap-2 sm:flex-row sm:items-center sm:justify-end\">\n                    <MonthPicker />\n                </div>\n            </header>\n\n            {/* RESUMO FINANCEIRO DO MÊS */}\n            <section className=\"grid gap-4 md:grid-cols-3\">\n                <div className=\"space-y-1 rounded-xl border border-border-primary bg-background-tertiary px-4 py-3\">\n                    <p className=\"text-label-small text-content-secondary\">\n                        Faturamento líquido (pagos no mês)\n                    </p>\n                    <p className=\"text-title text-content-primary\">\n                        {summary.netRevenueMonth}\n                    </p>\n                    <p className=\"text-paragraph-small text-content-secondary\">\n                        Serviços (líq.):{' '}\n                        <span className=\"font-semibold\">\n                            {summary.servicesNetMonth}\n                        </span>{' '}\n                        • Produtos (líq.):{' '}\n                        <span className=\"font-semibold\">\n                            {summary.productsNetMonth}\n                        </span>\n                    </p>\n                </div>\n\n                <div className=\"space-y-1 rounded-xl border border-border-primary bg-background-tertiary px-4 py-3\">\n                    <p className=\"text-label-small text-content-secondary\">\n                        Despesas (mês)\n                    </p>\n                    <p className=\"text-title text-content-primary\">\n                        {summary.totalExpenses}\n                    </p>\n                    <p className=\"text-paragraph-small text-content-secondary\">\n                        Todas as despesas cadastradas para este mês.\n                    </p>\n                </div>\n\n                <div className=\"space-y-1 rounded-xl border border-border-primary bg-background-tertiary px-4 py-3\">\n                    <p className=\"text-label-small text-content-secondary\">\n                        Lucro líquido (mês)\n                    </p>\n\n                    {/* ✅ Sem cn aqui (tailwind-merge derrubava o text-title por conflito com text-green-500) */}\n                    <p\n                        className={`text-title ${\n                            summary.netIncomeIsPositive\n                                ? 'text-green-500'\n                                : 'text-red-600'\n                        }`}\n                    >\n                        {summary.netIncome}\n                    </p>\n\n                    <p className=\"text-paragraph-small text-content-secondary\">\n                        Faturamento líquido menos as despesas do mês.\n                    </p>\n                </div>\n            </section>\n\n            <ProfessionalMonthlyEarningsSection\n                professionalsEarnings={normalizedProfessionalEarnings}\n            />\n\n            {/* HEADER DO CADASTRO + BOTÃO */}\n            <div className=\"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between\">\n                <div>\n                    <h2 className=\"text-subtitle text-content-primary\">\n                        Cadastro de despesas (mês)\n                    </h2>\n                    <p className=\"text-paragraph-small text-content-secondary\">\n                        Contas cadastradas para este mês, incluindo despesas\n                        recorrentes e avulsas.\n                    </p>\n                </div>\n\n                <NewExpenseDialog\n                    month={monthQuery}\n                    disabled={newExpenseDisabled}\n                />\n            </div>\n\n            <section className=\"overflow-x-auto rounded-xl border border-border-primary bg-background-tertiary\">\n                <table className=\"min-w-full text-sm\">\n                    <thead>\n                        <tr className=\"border-b border-border-primary bg-muted/40 text-left text-label-small text-content-secondary\">\n                            <th className=\"px-4 py-2\">Descrição</th>\n                            <th className=\"px-4 py-2\">Vencimento</th>\n                            <th className=\"px-4 py-2 text-right\">Valor</th>\n                            <th className=\"px-4 py-2 text-center\">\n                                Recorrente\n                            </th>\n                            <th className=\"px-4 py-2 text-center\">Status</th>\n                            <th className=\"px-4 py-2 text-right\">Ações</th>\n                        </tr>\n                    </thead>\n\n                    <tbody>\n                        {expenses.length === 0 ? (\n                            <tr>\n                                <td\n                                    colSpan={6}\n                                    className=\"px-4 py-6 text-center text-paragraph-small text-content-secondary\"\n                                >\n                                    Nenhuma despesa cadastrada para este mês.\n                                </td>\n                            </tr>\n                        ) : (\n                            expenses.map((e) => (\n                                <ExpenseRow key={e.id} expense={e} />\n                            ))\n                        )}\n                    </tbody>\n                </table>\n            </section>\n        </div>\n    );\n}\n\n/* ========= SEÇÃO: FATURAMENTO POR PROFISSIONAL ========= */\n\nfunction ProfessionalMonthlyEarningsSection({\n    professionalsEarnings,\n}: {\n    professionalsEarnings: ProfessionalMonthlyEarningsUI[];\n}) {\n    // ✅ extra safety (mesmo que chamem errado)\n    const list = Array.isArray(professionalsEarnings)\n        ? professionalsEarnings\n        : [];\n\n    return (\n        <section className=\"space-y-3\">\n            <div>\n                <h2 className=\"text-subtitle text-content-primary\">\n                    Faturamento por profissional (mês)\n                </h2>\n                <p className=\"text-paragraph-small text-content-secondary\">\n                    Valores recebidos em serviços e comissões de produtos (pagos\n                    no mês).\n                </p>\n            </div>\n\n            {list.length === 0 ? (\n                <p className=\"text-paragraph-small text-content-secondary\">\n                    Nenhum profissional ativo cadastrado.\n                </p>\n            ) : (\n                <div\n                    className=\"grid gap-4 grid-cols-1 sm:grid-cols-2\"\n                    style={{\n                        // ✅ no md+ usa colunas dinâmicas até 5\n                        gridTemplateColumns:\n                            list.length <= 0\n                                ? undefined\n                                : `repeat(${Math.min(5, list.length)}, minmax(0, 1fr))`,\n                    }}\n                >\n                    {list.map((p) => (\n                        <div\n                            key={p.professionalId}\n                            className=\"space-y-2 rounded-xl border border-border-primary bg-background-tertiary px-4 py-3\"\n                        >\n                            <p className=\"text-label-large text-content-primary\">\n                                {p.name}\n                            </p>\n\n                            <p className=\"text-paragraph-small text-content-secondary\">\n                                Serviços:{' '}\n                                <span className=\"font-semibold\">\n                                    {p.servicesEarnings}\n                                </span>\n                            </p>\n\n                            <p className=\"text-paragraph-small text-content-secondary\">\n                                Produtos:{' '}\n                                <span className=\"font-semibold\">\n                                    {p.productsEarnings}\n                                </span>\n                            </p>\n\n                            <p className=\"text-paragraph-small text-content-secondary\">\n                                Total:{' '}\n                                <span className=\"font-semibold\">{p.total}</span>\n                            </p>\n                        </div>\n                    ))}\n                </div>\n            )}\n        </section>\n    );\n}\n\n/* ========= LINHA DA TABELA ========= */\n\ntype DeleteExpenseResponse =\n    | {\n          ok: true;\n          data: {\n              deleted: boolean;\n              deletedCount: number;\n              mode: 'single' | 'series';\n          };\n      }\n    | { ok: false; error: string };\n\ntype TogglePaidResponse =\n    | {\n          ok: true;\n          data: { expenseId: string; isPaid: boolean };\n      }\n    | { ok: false; error: string };\n\nfunction ExpenseRow({ expense }: { expense: ExpenseRowUI }) {\n    const router = useRouter();\n\n    // estado derivado do server (fallback)\n    const serverIsPaid =\n        expense.statusTone === 'success' ||\n        String(expense.statusLabel || '').toLowerCase() === 'pago';\n\n    // estado local (optimistic)\n    const [localIsPaid, setLocalIsPaid] = React.useState<boolean | null>(null);\n    const effectiveIsPaid = localIsPaid ?? serverIsPaid;\n\n    const statusLabel = effectiveIsPaid ? 'Pago' : 'Em aberto';\n    const effectiveToneClass = effectiveIsPaid\n        ? 'bg-green-500/15 text-green-600 border-green-500/30'\n        : 'bg-amber-500/15 text-amber-700 border-amber-500/30';\n\n    const [confirmOpen, setConfirmOpen] = React.useState(false);\n    const [deleting, setDeleting] = React.useState(false);\n    const [deleteErr, setDeleteErr] = React.useState<string | null>(null);\n\n    const [toggling, setToggling] = React.useState(false);\n    const [toggleErr, setToggleErr] = React.useState<string | null>(null);\n\n    const handleDelete = React.useCallback(async () => {\n        setDeleteErr(null);\n        setDeleting(true);\n\n        try {\n            const res = await fetch(\n                `/api/admin/finance/expenses/${encodeURIComponent(expense.id)}`,\n                { method: 'DELETE' }\n            );\n\n            const json = (await res.json()) as DeleteExpenseResponse;\n\n            if (!res.ok || !json.ok) {\n                setDeleteErr(!json.ok ? json.error : 'Falha ao excluir.');\n                setDeleting(false);\n                return;\n            }\n\n            setConfirmOpen(false);\n            router.refresh();\n        } catch {\n            setDeleteErr('Erro de rede. Tente novamente.');\n        } finally {\n            setDeleting(false);\n        }\n    }, [expense.id, router]);\n\n    const handleTogglePaid = React.useCallback(async () => {\n        setToggleErr(null);\n        setToggling(true);\n\n        // optimistic: troca já na UI\n        const next = !effectiveIsPaid;\n        setLocalIsPaid(next);\n\n        try {\n            const res = await fetch(\n                `/api/admin/finance/expenses/${encodeURIComponent(\n                    expense.id\n                )}/paid`,\n                {\n                    method: 'PATCH',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ isPaid: next }),\n                }\n            );\n\n            const json = (await res.json()) as TogglePaidResponse;\n\n            if (!res.ok || !json.ok) {\n                // rollback\n                setLocalIsPaid(effectiveIsPaid);\n                setToggleErr(\n                    !json.ok ? json.error : 'Falha ao atualizar status.'\n                );\n                setToggling(false);\n                return;\n            }\n\n            // garante que refletiu o que o backend retornou\n            setLocalIsPaid(json.data.isPaid);\n\n            // consolida com dados do server\n            router.refresh();\n        } catch {\n            // rollback\n            setLocalIsPaid(effectiveIsPaid);\n            setToggleErr('Erro de rede. Tente novamente.');\n        } finally {\n            setToggling(false);\n        }\n    }, [effectiveIsPaid, expense.id, router]);\n\n    return (\n        <tr className=\"border-b border-border-primary last:border-b-0\">\n            <td className=\"px-4 py-3 text-content-primary\">\n                {expense.description}\n            </td>\n\n            <td className=\"px-4 py-3 text-content-secondary\">\n                {expense.dueDate}\n            </td>\n\n            <td className=\"px-4 py-3 text-right text-content-primary font-medium\">\n                {expense.amount}\n            </td>\n\n            <td className=\"px-4 py-3 text-center\">\n                <span\n                    className={cn(\n                        'inline-flex items-center rounded-md border px-2 py-0.5 text-xs',\n                        expense.isRecurring\n                            ? 'bg-border-brand/10 border-border-brand/30 text-content-primary'\n                            : 'bg-muted/40 border-border-primary text-content-secondary'\n                    )}\n                >\n                    {expense.isRecurring ? 'Sim' : 'Não'}\n                </span>\n            </td>\n\n            <td className=\"px-4 py-3 text-center\">\n                <span\n                    className={cn(\n                        'inline-flex items-center rounded-md border px-2 py-0.5 text-xs',\n                        effectiveToneClass\n                    )}\n                    title={toggleErr ?? undefined}\n                >\n                    {statusLabel}\n                </span>\n            </td>\n\n            <td className=\"px-4 py-3 text-right\">\n                <div className=\"inline-flex flex-wrap justify-end gap-2\">\n                    <Button size=\"sm\" variant=\"edit2\" className=\"h-8\">\n                        Editar\n                    </Button>\n\n                    <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        className={cn(\n                            'h-8 bg-transparent border-border-primary text-content-primary hover:bg-background-tertiary hover:border-border-secondary focus-visible:ring-offset-0 focus-visible:ring-1 focus-visible:ring-border-brand',\n                            toggling && 'opacity-70 cursor-wait'\n                        )}\n                        onClick={handleTogglePaid}\n                        disabled={toggling || deleting}\n                        title={\n                            effectiveIsPaid\n                                ? 'Marcar como pendente'\n                                : 'Marcar como paga'\n                        }\n                    >\n                        {toggling\n                            ? 'Atualizando...'\n                            : effectiveIsPaid\n                              ? 'Pendente'\n                              : 'Conta paga'}\n                    </Button>\n\n                    <Dialog open={confirmOpen} onOpenChange={setConfirmOpen}>\n                        <DialogTrigger asChild>\n                            <Button\n                                size=\"sm\"\n                                variant=\"destructive\"\n                                className=\"h-8\"\n                                disabled={toggling}\n                            >\n                                Excluir\n                            </Button>\n                        </DialogTrigger>\n\n                        <DialogContent className=\"bg-background-secondary border border-border-primary\">\n                            <DialogHeader>\n                                <DialogTitle className=\"text-title text-content-primary\">\n                                    Excluir despesa\n                                </DialogTitle>\n                            </DialogHeader>\n\n                            <div className=\"space-y-3\">\n                                <div className=\"rounded-xl border border-border-primary bg-background-tertiary px-3 py-2\">\n                                    <p className=\"text-paragraph-small text-content-secondary\">\n                                        Você está prestes a excluir:\n                                    </p>\n                                    <p className=\"text-label-large text-content-primary\">\n                                        {expense.description}\n                                    </p>\n                                    <p className=\"text-paragraph-small text-content-secondary\">\n                                        Vencimento: {expense.dueDate} • Valor:{' '}\n                                        <span className=\"font-semibold text-content-primary\">\n                                            {expense.amount}\n                                        </span>\n                                    </p>\n                                </div>\n\n                                {expense.isRecurring ? (\n                                    <div className=\"rounded-xl border border-amber-500/30 bg-amber-500/10 px-3 py-2\">\n                                        <p className=\"text-paragraph-small text-amber-700\">\n                                            Essa despesa é <b>recorrente</b>. Ao\n                                            excluir, o sistema removerá esta\n                                            despesa e <b>todas as próximas</b>\n                                            (do mês atual em diante).\n                                        </p>\n                                    </div>\n                                ) : (\n                                    <p className=\"text-paragraph-small text-content-secondary\">\n                                        Essa ação não pode ser desfeita.\n                                    </p>\n                                )}\n\n                                {deleteErr && (\n                                    <div className=\"rounded-lg border border-red-500/30 bg-red-500/10 px-3 py-2\">\n                                        <p className=\"text-paragraph-small text-red-600\">\n                                            {deleteErr}\n                                        </p>\n                                    </div>\n                                )}\n\n                                <div className=\"flex justify-end gap-2 pt-2\">\n                                    <Button\n                                        type=\"button\"\n                                        variant=\"outline\"\n                                        onClick={() => setConfirmOpen(false)}\n                                        disabled={deleting}\n                                        className=\"bg-transparent border-border-primary text-content-primary hover:bg-background-tertiary hover:border-border-secondary focus-visible:ring-offset-0 focus-visible:ring-1 focus-visible:ring-border-brand\"\n                                    >\n                                        Cancelar\n                                    </Button>\n\n                                    <Button\n                                        type=\"button\"\n                                        variant=\"destructive\"\n                                        onClick={handleDelete}\n                                        disabled={deleting}\n                                    >\n                                        {deleting ? 'Excluindo...' : 'Excluir'}\n                                    </Button>\n                                </div>\n                            </div>\n                        </DialogContent>\n                    </Dialog>\n                </div>\n            </td>\n        </tr>\n    );\n}\n\n/* ========= NOVA DESPESA (POST na route) ========= */\n\ntype CreateExpenseResponse =\n    | {\n          ok: true;\n          data: { expenseId: string; monthQuery: string; created: boolean };\n      }\n    | { ok: false; error: string };\n\nfunction NewExpenseDialog({\n    month,\n    disabled,\n}: {\n    month: string;\n    disabled?: boolean;\n}) {\n    const router = useRouter();\n    const searchParams = useSearchParams();\n\n    const unitParam = searchParams.get('unit'); // unitId | null\n    const unitId = unitParam ? unitParam : null;\n\n    const [open, setOpen] = React.useState(false);\n    const [submitting, setSubmitting] = React.useState(false);\n    const [errorMsg, setErrorMsg] = React.useState<string | null>(null);\n\n    const hasValidUnit = !!unitId;\n\n    const onSubmit = React.useCallback(\n        async (e: React.FormEvent<HTMLFormElement>) => {\n            e.preventDefault();\n            setErrorMsg(null);\n\n            if (!unitId) {\n                setErrorMsg('Selecione uma unidade para cadastrar a despesa.');\n                return;\n            }\n\n            const form = e.currentTarget;\n            const fd = new FormData(form);\n\n            const description = String(fd.get('description') ?? '').trim();\n            const amountRaw = String(fd.get('amount') ?? '').trim();\n            const amount = Number(amountRaw);\n\n            const isRecurring = fd.get('isRecurring') != null;\n            const recurringDayRaw = String(fd.get('recurringDay') ?? '').trim();\n            const recurringDay = recurringDayRaw\n                ? Number(recurringDayRaw)\n                : undefined;\n\n            const dueDate = String(fd.get('dueDate') ?? '').trim() || undefined;\n\n            // validações mínimas no client (backend valida de verdade)\n            if (!description) {\n                setErrorMsg('Informe a descrição.');\n                return;\n            }\n            if (!Number.isFinite(amount) || amount <= 0) {\n                setErrorMsg('Informe um valor válido.');\n                return;\n            }\n            if (isRecurring) {\n                if (\n                    !Number.isFinite(Number(recurringDay)) ||\n                    Number(recurringDay) < 1 ||\n                    Number(recurringDay) > 31\n                ) {\n                    setErrorMsg('Informe um dia de vencimento (1 a 31).');\n                    return;\n                }\n            } else {\n                if (!dueDate) {\n                    setErrorMsg('Informe a data de vencimento.');\n                    return;\n                }\n            }\n\n            setSubmitting(true);\n            try {\n                const res = await fetch('/api/admin/finance/expenses', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({\n                        month,\n                        unitId,\n                        category: 'OTHER',\n                        description,\n                        amount,\n                        isRecurring,\n                        recurringDay: isRecurring\n                            ? Number(recurringDay)\n                            : undefined,\n                        dueDate: !isRecurring ? dueDate : undefined,\n                    }),\n                });\n\n                const json = (await res.json()) as CreateExpenseResponse;\n\n                if (!res.ok || !json.ok) {\n                    setErrorMsg(!json.ok ? json.error : 'Falha ao salvar.');\n                    setSubmitting(false);\n                    return;\n                }\n\n                // fecha modal e recarrega dados do server\n                setOpen(false);\n                form.reset();\n                router.refresh();\n            } catch {\n                setErrorMsg('Erro de rede. Tente novamente.');\n            } finally {\n                setSubmitting(false);\n            }\n        },\n        [month, router, unitId]\n    );\n\n    // ✅ Agora só respeita o disabled vindo do server.\n    if (disabled) {\n        return (\n            <Button variant=\"brand\" disabled title=\"Ação indisponível\">\n                Nova despesa\n            </Button>\n        );\n    }\n\n    return (\n        <Dialog open={open} onOpenChange={setOpen}>\n            <DialogTrigger asChild>\n                <Button variant=\"brand\">Nova despesa</Button>\n            </DialogTrigger>\n\n            <DialogContent className=\"bg-background-secondary border border-border-primary\">\n                <DialogHeader>\n                    <DialogTitle className=\"text-title text-content-primary\">\n                        Nova despesa\n                    </DialogTitle>\n                </DialogHeader>\n\n                <form onSubmit={onSubmit} className=\"space-y-4\">\n                    <input type=\"hidden\" name=\"month\" value={month} />\n                    <input type=\"hidden\" name=\"category\" value=\"OTHER\" />\n                    <input type=\"hidden\" name=\"unitId\" value={unitId ?? ''} />\n\n                    {!hasValidUnit && (\n                        <div className=\"rounded-xl border border-amber-500/30 bg-amber-500/10 px-3 py-2\">\n                            <p className=\"text-paragraph-small text-amber-700\">\n                                Selecione uma unidade no menu lateral para\n                                cadastrar a despesa.\n                            </p>\n                        </div>\n                    )}\n\n                    <div className=\"space-y-1\">\n                        <label\n                            className=\"text-label-small text-content-secondary\"\n                            htmlFor=\"description\"\n                        >\n                            Descrição\n                        </label>\n                        <Input\n                            id=\"description\"\n                            name=\"description\"\n                            required\n                            placeholder=\"Ex: Aluguel, Luz, Internet...\"\n                            className=\"bg-background-tertiary border-border-primary text-content-primary\"\n                        />\n                    </div>\n\n                    <div className=\"space-y-1\">\n                        <label\n                            className=\"text-label-small text-content-secondary\"\n                            htmlFor=\"amount\"\n                        >\n                            Valor (R$)\n                        </label>\n                        <Input\n                            id=\"amount\"\n                            name=\"amount\"\n                            type=\"number\"\n                            step=\"0.01\"\n                            min=\"0\"\n                            required\n                            className=\"bg-background-tertiary border-border-primary text-content-primary\"\n                        />\n                    </div>\n\n                    <div className=\"space-y-3\">\n                        <input\n                            id=\"isRecurring\"\n                            name=\"isRecurring\"\n                            type=\"checkbox\"\n                            className=\"peer sr-only\"\n                        />\n\n                        <label\n                            htmlFor=\"isRecurring\"\n                            className=\"\n                inline-flex items-center gap-2 cursor-pointer\n                peer-checked:[&_.box]:bg-border-brand\n                peer-checked:[&_.box]:border-border-brand\n                peer-checked:[&_.check]:bg-background-primary\n              \"\n                        >\n                            <span\n                                className=\"\n                  box flex h-4 w-4 items-center justify-center\n                  rounded border border-border-primary bg-background-tertiary\n                  transition-colors\n                \"\n                            >\n                                <span className=\"check h-2 w-2 rounded-sm bg-transparent transition-colors\" />\n                            </span>\n                            <span className=\"text-label-small text-content-primary\">\n                                Despesa recorrente\n                            </span>\n                        </label>\n\n                        <div className=\"space-y-1 hidden peer-checked:block\">\n                            <label\n                                className=\"text-label-small text-content-secondary\"\n                                htmlFor=\"recurringDay\"\n                            >\n                                Dia de vencimento (se recorrente)\n                            </label>\n                            <Input\n                                id=\"recurringDay\"\n                                name=\"recurringDay\"\n                                type=\"number\"\n                                min={1}\n                                max={31}\n                                placeholder=\"Ex: 10\"\n                                className=\"bg-background-tertiary border-border-primary text-content-primary\"\n                            />\n                            <p className=\"text-paragraph-small text-content-secondary\">\n                                Para despesas recorrentes, informe apenas o dia\n                                de vencimento (se for 31 e o mês não tiver, cai\n                                no último dia do mês).\n                            </p>\n                        </div>\n\n                        <div className=\"space-y-1 peer-checked:hidden\">\n                            <label\n                                className=\"text-label-small text-content-secondary\"\n                                htmlFor=\"dueDate\"\n                            >\n                                Data de vencimento (se NÃO recorrente)\n                            </label>\n\n                            <ExpenseDueDatePicker id=\"dueDate\" name=\"dueDate\" />\n\n                            <p className=\"text-paragraph-small text-content-secondary\">\n                                Use este campo para despesas que acontecem em\n                                uma data única.\n                            </p>\n                        </div>\n                    </div>\n\n                    {errorMsg && (\n                        <div className=\"rounded-lg border border-red-500/30 bg-red-500/10 px-3 py-2\">\n                            <p className=\"text-paragraph-small text-red-600\">\n                                {errorMsg}\n                            </p>\n                        </div>\n                    )}\n\n                    <div className=\"flex justify-end gap-2 pt-2\">\n                        <Button\n                            type=\"submit\"\n                            variant=\"brand\"\n                            disabled={submitting || !hasValidUnit}\n                            title={\n                                !hasValidUnit\n                                    ? 'Selecione uma unidade para salvar'\n                                    : undefined\n                            }\n                        >\n                            {submitting ? 'Salvando...' : 'Salvar'}\n                        </Button>\n                    </div>\n                </form>\n            </DialogContent>\n        </Dialog>\n    );\n}\n","'use client';\n\nimport * as React from 'react';\nimport { Calendar as CalendarIcon, ChevronDown } from 'lucide-react';\nimport { format, isValid } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\n\nimport { Button } from '@/components/ui/button';\nimport {\n    Popover,\n    PopoverContent,\n    PopoverTrigger,\n} from '@/components/ui/popover';\nimport { Calendar } from '@/components/ui/calendar';\nimport { cn } from '@/lib/utils';\n\ntype ExpenseDueDatePickerProps = {\n    name: string;\n    id?: string;\n    /** yyyy-MM-dd */\n    defaultValue?: string;\n};\n\nexport function ExpenseDueDatePicker({\n    name,\n    id,\n    defaultValue,\n}: ExpenseDueDatePickerProps) {\n    const initialDate = React.useMemo(() => {\n        if (!defaultValue) return undefined;\n\n        const parsed = new Date(defaultValue);\n        return isValid(parsed) ? parsed : undefined;\n    }, [defaultValue]);\n\n    const [date, setDate] = React.useState<Date | undefined>(initialDate);\n    const [open, setOpen] = React.useState(false);\n\n    const handleSelect = (selected?: Date) => {\n        if (!selected) return;\n        setDate(selected);\n        setOpen(false);\n    };\n\n    return (\n        <>\n            {/* campo real enviado no form */}\n            <input\n                type=\"hidden\"\n                name={name}\n                value={date ? format(date, 'yyyy-MM-dd') : ''}\n            />\n\n            <Popover open={open} onOpenChange={setOpen}>\n                <PopoverTrigger asChild>\n                    <Button\n                        id={id}\n                        type=\"button\"\n                        variant=\"outline\"\n                        className={cn(\n                            'w-full justify-between text-left font-normal',\n                            'bg-transparent border-border-primary text-content-primary',\n                            'hover:bg-background-tertiary hover:border-border-secondary hover:text-content-primary',\n                            'focus-visible:ring-offset-0 focus-visible:ring-1 focus-visible:ring-border-brand',\n                            'focus:border-border-brand focus-visible:border-border-brand'\n                        )}\n                    >\n                        <div className=\"flex items-center gap-2\">\n                            <CalendarIcon className=\"h-4 w-4 text-content-brand\" />\n                            {date ? (\n                                <span>\n                                    {format(date, 'dd/MM/yyyy', {\n                                        locale: ptBR,\n                                    })}\n                                </span>\n                            ) : (\n                                <span className=\"text-content-secondary\">\n                                    dd/mm/aaaa\n                                </span>\n                            )}\n                        </div>\n                        <ChevronDown className=\"h-4 w-4 opacity-50\" />\n                    </Button>\n                </PopoverTrigger>\n\n                <PopoverContent className=\"w-auto p-0 rounded-xl border border-border-primary bg-background-secondary\">\n                    <Calendar\n                        mode=\"single\"\n                        selected={date}\n                        onSelect={handleSelect}\n                        autoFocus\n                        locale={ptBR}\n                    />\n                </PopoverContent>\n            </Popover>\n        </>\n    );\n}\n"],"names":[],"mappings":"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"}