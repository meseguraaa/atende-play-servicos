{"version":3,"sources":["turbopack:///[project]/src/app/admin/checkout/admin-checkout-client.tsx"],"sourcesContent":["// src/app/admin/checkout/admin-checkout-client.tsx\n'use client';\n\nimport * as React from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { toast } from 'sonner';\n\nimport { MonthPicker } from '@/components/month-picker';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\n\ntype OrderStatus = 'PENDING' | 'PENDING_CHECKIN' | 'COMPLETED' | 'CANCELED';\n\nexport type ServiceOrderUI = {\n    id: string;\n    createdAtLabel: string;\n    appointmentAtLabel?: string | null;\n    professionalName: string;\n    itemsLabel: string;\n    totalLabel: string;\n    status: OrderStatus;\n};\n\nexport type ProductOrderItemUI = {\n    itemId: string;\n    productId: string;\n    name: string;\n    qty: number;\n    totalLabel: string;\n\n    // ✅ novo (best-effort, pode vir ou não do backend)\n    professionalId?: string | null;\n    professionalName?: string | null;\n};\n\nexport type ProductOrderUI = {\n    id: string;\n    createdAtLabel: string;\n\n    // compat (ainda pode vir)\n    itemsLabel: string;\n\n    // ✅ novo: itens de produto com itemId (para cancelar 1 por 1)\n    items?: ProductOrderItemUI[];\n\n    // subtotal apenas de produtos deste pedido\n    totalLabel: string;\n\n    status: OrderStatus;\n};\n\nexport type OpenAccountUI = {\n    clientId: string;\n    clientLabel: string;\n    latestLabel: string;\n    totalLabel: string;\n    totalServicesLabel: string;\n    totalProductsLabel: string;\n    hasProducts: boolean;\n    serviceOrders: ServiceOrderUI[];\n    productOrders: ProductOrderUI[];\n};\n\nexport type MonthOrderItemUI = {\n    id: string;\n    name: string;\n    qty: number;\n    unitLabel: string;\n    totalLabel: string;\n    kind: 'service' | 'product';\n};\n\nexport type MonthOrderUI = {\n    id: string;\n    createdAtLabel: string;\n    appointmentAtLabel?: string | null;\n    professionalName: string;\n    status: 'COMPLETED';\n    totalLabel: string;\n    servicesSubtotalLabel: string;\n    productsSubtotalLabel: string;\n    items: MonthOrderItemUI[];\n};\n\nexport type MonthGroupUI = {\n    clientKey: string;\n    clientLabel: string;\n    latestLabel: string;\n    totalLabel: string;\n    servicesLabel: string;\n    productsLabel: string;\n    orders: MonthOrderUI[];\n};\n\ntype CompleteCheckoutResponse =\n    | {\n          ok: true;\n          data: {\n              orderId: string;\n              status: 'COMPLETED';\n              totalAmount: string;\n              checkedOutAt: string;\n              appointmentUpdated: boolean;\n          };\n      }\n    | { ok: false; error: string };\n\ntype CancelOrderResponse =\n    | {\n          ok: true;\n          data: {\n              orderId: string;\n              status: 'CANCELED';\n              canceledAt: string;\n              inventoryRevertedAt: string | null;\n          };\n      }\n    | { ok: false; error: string };\n\ntype CancelAccountResponse =\n    | {\n          ok: true;\n          data: {\n              clientId: string;\n              canceledCount: number;\n              canceledOrderIds: string[];\n              alreadyCanceledCount: number;\n              skippedCount: number;\n              canceledAt: string;\n          };\n      }\n    | { ok: false; error: string };\n\ntype ProductsListResponse =\n    | {\n          ok: true;\n          data: {\n              products: Array<{\n                  id: string;\n                  name: string;\n                  priceLabel: string;\n                  stockQuantity: number;\n                  unitId: string;\n              }>;\n          };\n      }\n    | { ok: false; error: string };\n\ntype ProfessionalsListResponse =\n    | {\n          ok: true;\n          data: {\n              professionals: Array<{\n                  id: string;\n                  name: string;\n                  isActive: boolean;\n                  unitId: string | null;\n              }>;\n              count: number;\n              unitScope: 'filtered' | 'all';\n          };\n      }\n    | { ok: false; error: string };\n\ntype AddProductResponse =\n    | {\n          ok: true;\n          data: {\n              clientId: string;\n              orderId: string;\n              orderStatus: 'PENDING' | 'PENDING_CHECKIN';\n              itemId: string;\n              productId: string;\n              quantity: number;\n              unitId: string;\n              unitPrice: string;\n              totalPrice: string;\n              orderTotalAmount: string;\n              orderWasCreated: boolean;\n          };\n      }\n    | { ok: false; error: string };\n\ntype RemoveProductItemResponse =\n    | {\n          ok: true;\n          data: {\n              orderId: string;\n              orderStatus: 'PENDING' | 'PENDING_CHECKIN' | 'CANCELED';\n              removedItemId: string;\n              removedQuantity: number;\n              inventoryRevertedAt: string | null;\n              orderTotalAmount: string; // decimal string\n              remainingProductItemsCount: number;\n              orderWasCanceled: boolean;\n          };\n      }\n    | { ok: false; error: string };\n\ntype AssignProductItemProfessionalResponse =\n    | {\n          ok: true;\n          data: {\n              orderId: string;\n              orderStatus: 'PENDING' | 'PENDING_CHECKIN';\n              itemId: string;\n              professionalId: string;\n          };\n      }\n    | { ok: false; error: string };\n\ntype AdminCheckoutClientProps = {\n    canSeeAllUnits: boolean;\n\n    // top labels\n    monthLabel: string;\n\n    // data\n    openAccounts: OpenAccountUI[];\n    monthGroups: MonthGroupUI[];\n};\n\n/**\n * ✅ Badge padronizado (mesmo padrão do Finance):\n * - rounded-md\n * - border px-2 py-0.5 text-xs\n * - tonalidade via classes\n */\nfunction StatusBadge({ status }: { status: OrderStatus }) {\n    const map: Record<OrderStatus, { label: string; toneClass: string }> = {\n        PENDING: {\n            label: 'Pendente',\n            toneClass: 'bg-amber-500/15 text-amber-700 border-amber-500/30',\n        },\n        PENDING_CHECKIN: {\n            label: 'Aguard. check-in',\n            toneClass: 'bg-amber-500/15 text-amber-700 border-amber-500/30',\n        },\n        COMPLETED: {\n            label: 'Pago',\n            toneClass: 'bg-green-500/15 text-green-600 border-green-500/30',\n        },\n        CANCELED: {\n            label: 'Cancelado',\n            toneClass: 'bg-red-500/15 text-red-600 border-red-500/30',\n        },\n    };\n\n    const cfg = map[status];\n\n    return (\n        <span\n            className={cn(\n                'inline-flex items-center rounded-md border px-2 py-0.5 text-xs',\n                cfg.toneClass\n            )}\n        >\n            {cfg.label}\n        </span>\n    );\n}\n\nfunction EmptyState({ title, hint }: { title: string; hint?: string }) {\n    return (\n        <div className=\"rounded-xl border border-border-primary bg-background-tertiary px-4 py-6\">\n            <p className=\"text-paragraph-small text-content-secondary text-center\">\n                {title}\n            </p>\n            {hint ? (\n                <p className=\"mt-2 text-paragraph-small text-content-tertiary text-center\">\n                    {hint}\n                </p>\n            ) : null}\n        </div>\n    );\n}\n\nfunction OrdersSection({\n    monthLabel,\n    totalCountLabel,\n    groups,\n}: {\n    monthLabel: string;\n    totalCountLabel: string;\n    groups: MonthGroupUI[];\n}) {\n    return (\n        <section className=\"space-y-3\">\n            <div className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\n                <div>\n                    <h2 className=\"text-subtitle text-content-primary\">\n                        Pedidos do mês\n                    </h2>\n                    <p className=\"text-paragraph-small text-content-secondary\">\n                        Lista de todos os pedidos de serviços e produtos\n                        registrados neste mês.\n                        <br />\n                        Mês selecionado:{' '}\n                        <span className=\"font-medium\">{monthLabel}</span>\n                    </p>\n\n                    <p className=\"text-paragraph-small text-content-secondary mt-1\">\n                        Total:{' '}\n                        <span className=\"font-medium\">{totalCountLabel}</span>\n                    </p>\n                </div>\n            </div>\n\n            {groups.length === 0 ? (\n                <EmptyState title=\"Nenhum pedido registrado neste mês ainda.\" />\n            ) : (\n                <>\n                    <div className=\"space-y-3\">\n                        {groups.map((g) => (\n                            <div\n                                key={g.clientKey}\n                                className=\"rounded-xl border border-border-primary bg-background-tertiary px-4 py-3 space-y-3\"\n                            >\n                                <div className=\"flex flex-wrap items-start justify-between gap-3\">\n                                    <div className=\"min-w-0\">\n                                        <p className=\"text-paragraph-small text-content-primary truncate\">\n                                            Cliente:{' '}\n                                            <span className=\"font-medium\">\n                                                {g.clientLabel}\n                                            </span>\n                                        </p>\n                                        <p className=\"text-paragraph-small text-content-secondary\">\n                                            Última movimentação em{' '}\n                                            {g.latestLabel}\n                                        </p>\n\n                                        <p className=\"text-paragraph-small text-content-secondary mt-1\">\n                                            <span>\n                                                Serviços:{' '}\n                                                <span className=\"font-medium\">\n                                                    {g.servicesLabel}\n                                                </span>\n                                            </span>\n                                            <span className=\"mx-2\">•</span>\n                                            <span>\n                                                Produtos:{' '}\n                                                <span className=\"font-medium\">\n                                                    {g.productsLabel}\n                                                </span>\n                                            </span>\n                                        </p>\n                                    </div>\n\n                                    <div className=\"flex flex-col items-end gap-1\">\n                                        <span className=\"text-paragraph-small font-semibold text-content-primary\">\n                                            Total no mês: {g.totalLabel}\n                                        </span>\n                                        <StatusBadge status=\"COMPLETED\" />\n                                    </div>\n                                </div>\n\n                                <div className=\"pt-2 border-t border-border-primary space-y-2\">\n                                    <p className=\"text-label-small text-content-secondary\">\n                                        Pedidos ({g.orders.length})\n                                    </p>\n\n                                    <div className=\"space-y-2\">\n                                        {g.orders.map((order) => {\n                                            const serviceItems =\n                                                order.items.filter(\n                                                    (i) => i.kind === 'service'\n                                                );\n                                            const productItems =\n                                                order.items.filter(\n                                                    (i) => i.kind === 'product'\n                                                );\n\n                                            return (\n                                                <details\n                                                    key={order.id}\n                                                    className=\"rounded-lg border border-border-primary bg-background-secondary px-3 py-2\"\n                                                >\n                                                    <summary className=\"cursor-pointer list-none\">\n                                                        <div className=\"flex flex-wrap items-start justify-between gap-3\">\n                                                            <div className=\"min-w-0\">\n                                                                <p className=\"text-paragraph-small text-content-primary truncate\">\n                                                                    Pedido #\n                                                                    {order.id.slice(\n                                                                        0,\n                                                                        8\n                                                                    )}\n                                                                </p>\n                                                                <p className=\"text-paragraph-small text-content-secondary\">\n                                                                    Criado em{' '}\n                                                                    {\n                                                                        order.createdAtLabel\n                                                                    }\n                                                                </p>\n                                                                {order.appointmentAtLabel ? (\n                                                                    <p className=\"text-paragraph-small text-content-secondary\">\n                                                                        Atendimento\n                                                                        em{' '}\n                                                                        {\n                                                                            order.appointmentAtLabel\n                                                                        }\n                                                                    </p>\n                                                                ) : null}\n                                                                <p className=\"text-paragraph-small text-content-secondary\">\n                                                                    Profissional:{' '}\n                                                                    {\n                                                                        order.professionalName\n                                                                    }\n                                                                </p>\n                                                            </div>\n\n                                                            <div className=\"flex flex-col items-end gap-1\">\n                                                                <span className=\"text-paragraph-small font-semibold text-content-primary\">\n                                                                    {\n                                                                        order.totalLabel\n                                                                    }\n                                                                </span>\n                                                                <StatusBadge status=\"COMPLETED\" />\n                                                            </div>\n                                                        </div>\n                                                    </summary>\n\n                                                    <div className=\"mt-3 space-y-3\">\n                                                        {serviceItems.length >\n                                                        0 ? (\n                                                            <div className=\"space-y-2\">\n                                                                <p className=\"text-label-small text-content-secondary\">\n                                                                    Serviços\n                                                                </p>\n\n                                                                <div className=\"overflow-x-auto rounded-lg border border-border-primary\">\n                                                                    <table className=\"min-w-full text-sm\">\n                                                                        <thead>\n                                                                            <tr className=\"border-b border-border-primary bg-muted/40 text-left text-label-small text-content-secondary\">\n                                                                                <th className=\"px-3 py-2\">\n                                                                                    Item\n                                                                                </th>\n                                                                                <th className=\"px-3 py-2 text-center\">\n                                                                                    Qtd\n                                                                                </th>\n                                                                                <th className=\"px-3 py-2 text-right\">\n                                                                                    Unit.\n                                                                                </th>\n                                                                                <th className=\"px-3 py-2 text-right\">\n                                                                                    Total\n                                                                                </th>\n                                                                            </tr>\n                                                                        </thead>\n                                                                        <tbody>\n                                                                            {serviceItems.map(\n                                                                                (\n                                                                                    it\n                                                                                ) => (\n                                                                                    <tr\n                                                                                        key={\n                                                                                            it.id\n                                                                                        }\n                                                                                        className=\"border-t border-border-primary text-paragraph-small text-content-primary\"\n                                                                                    >\n                                                                                        <td className=\"px-3 py-2\">\n                                                                                            {\n                                                                                                it.name\n                                                                                            }\n                                                                                        </td>\n                                                                                        <td className=\"px-3 py-2 text-center\">\n                                                                                            {\n                                                                                                it.qty\n                                                                                            }\n                                                                                        </td>\n                                                                                        <td className=\"px-3 py-2 text-right\">\n                                                                                            {\n                                                                                                it.unitLabel\n                                                                                            }\n                                                                                        </td>\n                                                                                        <td className=\"px-3 py-2 text-right\">\n                                                                                            {\n                                                                                                it.totalLabel\n                                                                                            }\n                                                                                        </td>\n                                                                                    </tr>\n                                                                                )\n                                                                            )}\n                                                                            <tr className=\"border-t border-border-primary\">\n                                                                                <td\n                                                                                    className=\"px-3 py-2 text-right text-content-secondary\"\n                                                                                    colSpan={\n                                                                                        3\n                                                                                    }\n                                                                                >\n                                                                                    Subtotal\n                                                                                    serviços\n                                                                                </td>\n                                                                                <td className=\"px-3 py-2 text-right font-semibold text-content-primary\">\n                                                                                    {\n                                                                                        order.servicesSubtotalLabel\n                                                                                    }\n                                                                                </td>\n                                                                            </tr>\n                                                                        </tbody>\n                                                                    </table>\n                                                                </div>\n                                                            </div>\n                                                        ) : null}\n\n                                                        {productItems.length >\n                                                        0 ? (\n                                                            <div className=\"space-y-2\">\n                                                                <p className=\"text-label-small text-content-secondary\">\n                                                                    Produtos\n                                                                </p>\n\n                                                                <div className=\"overflow-x-auto rounded-lg border border-border-primary\">\n                                                                    <table className=\"min-w-full text-sm\">\n                                                                        <thead>\n                                                                            <tr className=\"border-b border-border-primary bg-muted/40 text-left text-label-small text-content-secondary\">\n                                                                                <th className=\"px-3 py-2\">\n                                                                                    Item\n                                                                                </th>\n                                                                                <th className=\"px-3 py-2 text-center\">\n                                                                                    Qtd\n                                                                                </th>\n                                                                                <th className=\"px-3 py-2 text-right\">\n                                                                                    Unit.\n                                                                                </th>\n                                                                                <th className=\"px-3 py-2 text-right\">\n                                                                                    Total\n                                                                                </th>\n                                                                            </tr>\n                                                                        </thead>\n                                                                        <tbody>\n                                                                            {productItems.map(\n                                                                                (\n                                                                                    it\n                                                                                ) => (\n                                                                                    <tr\n                                                                                        key={\n                                                                                            it.id\n                                                                                        }\n                                                                                        className=\"border-t border-border-primary text-paragraph-small text-content-primary\"\n                                                                                    >\n                                                                                        <td className=\"px-3 py-2\">\n                                                                                            {\n                                                                                                it.name\n                                                                                            }\n                                                                                        </td>\n                                                                                        <td className=\"px-3 py-2 text-center\">\n                                                                                            {\n                                                                                                it.qty\n                                                                                            }\n                                                                                        </td>\n                                                                                        <td className=\"px-3 py-2 text-right\">\n                                                                                            {\n                                                                                                it.unitLabel\n                                                                                            }\n                                                                                        </td>\n                                                                                        <td className=\"px-3 py-2 text-right\">\n                                                                                            {\n                                                                                                it.totalLabel\n                                                                                            }\n                                                                                        </td>\n                                                                                    </tr>\n                                                                                )\n                                                                            )}\n                                                                            <tr className=\"border-t border-border-primary\">\n                                                                                <td\n                                                                                    className=\"px-3 py-2 text-right text-content-secondary\"\n                                                                                    colSpan={\n                                                                                        3\n                                                                                    }\n                                                                                >\n                                                                                    Subtotal\n                                                                                    produtos\n                                                                                </td>\n                                                                                <td className=\"px-3 py-2 text-right font-semibold text-content-primary\">\n                                                                                    {\n                                                                                        order.productsSubtotalLabel\n                                                                                    }\n                                                                                </td>\n                                                                            </tr>\n                                                                        </tbody>\n                                                                    </table>\n                                                                </div>\n                                                            </div>\n                                                        ) : null}\n                                                    </div>\n                                                </details>\n                                            );\n                                        })}\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n\n                    {/* UI-only: paginação placeholder */}\n                    <div className=\"flex flex-col gap-2 items-center\">\n                        <div className=\"rounded-xl border border-border-primary bg-background-tertiary px-4 py-3\">\n                            <p className=\"text-paragraph-small text-content-secondary\">\n                                Paginação será conectada quando integrarmos os\n                                dados.\n                            </p>\n                        </div>\n                    </div>\n                </>\n            )}\n        </section>\n    );\n}\n\nfunction shortId(id: string) {\n    return String(id ?? '').slice(0, 8);\n}\n\nfunction toIntSafe(v: unknown, fallback: number) {\n    const n = Number(v);\n    if (!Number.isFinite(n)) return fallback;\n    return Math.max(1, Math.trunc(n));\n}\n\n// compat: quebra \"1x A, 1x B\" em linhas separadas (caso o backend ainda não mande items[])\nfunction splitItemsLabel(label?: string | null): string[] {\n    const raw = String(label ?? '').trim();\n    if (!raw || raw === '—') return [];\n    return raw\n        .split(',')\n        .map((s) => s.trim())\n        .filter(Boolean);\n}\n\nexport default function AdminCheckoutClient({\n    canSeeAllUnits,\n    monthLabel,\n    openAccounts,\n    monthGroups,\n}: AdminCheckoutClientProps) {\n    const router = useRouter();\n    const searchParams = useSearchParams();\n\n    const [payingClientId, setPayingClientId] = React.useState<string | null>(\n        null\n    );\n\n    const [payingOrderIds, setPayingOrderIds] = React.useState<Set<string>>(\n        () => new Set()\n    );\n\n    // trava de cancelamento por cliente\n    const [cancelingClientId, setCancelingClientId] = React.useState<\n        string | null\n    >(null);\n\n    // ====== Produtos (para adicionar no checkout) ======\n    const [products, setProducts] = React.useState<\n        Array<{\n            id: string;\n            name: string;\n            priceLabel: string;\n            stockQuantity: number;\n            unitId: string;\n        }>\n    >([]);\n\n    const [productsLoading, setProductsLoading] = React.useState(false);\n\n    // ====== Profissionais (para vincular venda) ======\n    const [professionals, setProfessionals] = React.useState<\n        Array<{\n            id: string;\n            name: string;\n            isActive: boolean;\n            unitId: string | null;\n        }>\n    >([]);\n    const [professionalsLoading, setProfessionalsLoading] =\n        React.useState(false);\n\n    // state por cliente (seleção + qty)\n    const [selectedProductByClient, setSelectedProductByClient] =\n        React.useState<Record<string, string>>({});\n\n    const [qtyByClient, setQtyByClient] = React.useState<\n        Record<string, number>\n    >({});\n\n    const [addingProductForClientId, setAddingProductForClientId] =\n        React.useState<string | null>(null);\n\n    // ✅ trava por item (cancelar produto por produto)\n    const [removingItemIds, setRemovingItemIds] = React.useState<Set<string>>(\n        () => new Set()\n    );\n\n    // ✅ trava por item (atribuir profissional)\n    const [assigningItemIds, setAssigningItemIds] = React.useState<Set<string>>(\n        () => new Set()\n    );\n\n    // seleção por item (UI controlled)\n    const [selectedProfessionalByItem, setSelectedProfessionalByItem] =\n        React.useState<Record<string, string>>({});\n\n    // seleção \"rápida\" por cliente (aplicar em vários itens)\n    const [bulkProfessionalByClient, setBulkProfessionalByClient] =\n        React.useState<Record<string, string>>({});\n\n    const openAccountsCount = openAccounts.length;\n\n    const orphanServiceOrders: ServiceOrderUI[] = [];\n    const orphanProductOrders: ProductOrderUI[] = [];\n\n    const completeOrder = React.useCallback(async (orderId: string) => {\n        const res = await fetch(\n            `/api/admin/checkout/orders/${encodeURIComponent(orderId)}/complete`,\n            { method: 'PATCH' }\n        );\n\n        const json = (await res\n            .json()\n            .catch(() => null)) as CompleteCheckoutResponse | null;\n\n        if (!res.ok || !json || !json.ok) {\n            const msg =\n                json && !json.ok ? json.error : 'Falha ao concluir checkout.';\n            throw new Error(msg);\n        }\n\n        return json.data;\n    }, []);\n\n    const cancelOrder = React.useCallback(async (orderId: string) => {\n        const res = await fetch(\n            `/api/admin/checkout/orders/${encodeURIComponent(orderId)}/cancel`,\n            { method: 'PATCH' }\n        );\n\n        const json = (await res\n            .json()\n            .catch(() => null)) as CancelOrderResponse | null;\n\n        if (!res.ok || !json || !json.ok) {\n            const msg =\n                json && !json.ok ? json.error : 'Falha ao cancelar pedido.';\n            throw new Error(msg);\n        }\n\n        return json.data;\n    }, []);\n\n    const cancelAccount = React.useCallback(\n        async (clientId: string, orderIds: string[]) => {\n            const res = await fetch(\n                `/api/admin/checkout/accounts/${encodeURIComponent(clientId)}/cancel`,\n                {\n                    method: 'PATCH',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ orderIds }),\n                }\n            );\n\n            const json = (await res\n                .json()\n                .catch(() => null)) as CancelAccountResponse | null;\n\n            if (!res.ok || !json || !json.ok) {\n                const msg =\n                    json && !json.ok ? json.error : 'Falha ao cancelar conta.';\n                throw new Error(msg);\n            }\n\n            return json.data;\n        },\n        []\n    );\n\n    const addProduct = React.useCallback(\n        async (clientId: string, productId: string, quantity: number) => {\n            const res = await fetch(\n                `/api/admin/checkout/accounts/${encodeURIComponent(clientId)}/add-product`,\n                {\n                    method: 'PATCH',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ productId, quantity }),\n                }\n            );\n\n            const json = (await res\n                .json()\n                .catch(() => null)) as AddProductResponse | null;\n\n            if (!res.ok || !json || !json.ok) {\n                const msg =\n                    json && !json.ok\n                        ? json.error\n                        : 'Falha ao adicionar produto.';\n                throw new Error(msg);\n            }\n\n            return json.data;\n        },\n        []\n    );\n\n    // ✅ remove UM item de produto (e atualiza totais no backend)\n    const removeProductItem = React.useCallback(\n        async (orderId: string, itemId: string) => {\n            const res = await fetch(\n                `/api/admin/checkout/orders/${encodeURIComponent(orderId)}/remove-product-item`,\n                {\n                    method: 'PATCH',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ itemId }),\n                }\n            );\n\n            const json = (await res\n                .json()\n                .catch(() => null)) as RemoveProductItemResponse | null;\n\n            if (!res.ok || !json || !json.ok) {\n                const msg =\n                    json && !json.ok ? json.error : 'Falha ao remover produto.';\n                throw new Error(msg);\n            }\n\n            return json.data;\n        },\n        []\n    );\n\n    // ✅ atribui profissional para UM item\n    const assignProductItemProfessional = React.useCallback(\n        async (orderId: string, itemId: string, professionalId: string) => {\n            const res = await fetch(\n                `/api/admin/checkout/orders/${encodeURIComponent(orderId)}/assign-product-item-professional`,\n                {\n                    method: 'PATCH',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ itemId, professionalId }),\n                }\n            );\n\n            const json = (await res\n                .json()\n                .catch(\n                    () => null\n                )) as AssignProductItemProfessionalResponse | null;\n\n            if (!res.ok || !json || !json.ok) {\n                const msg =\n                    json && !json.ok\n                        ? json.error\n                        : 'Falha ao atribuir profissional.';\n                throw new Error(msg);\n            }\n\n            return json.data;\n        },\n        []\n    );\n\n    const withPayingOrder = React.useCallback((orderId: string) => {\n        setPayingOrderIds((prev) => {\n            const next = new Set(prev);\n            next.add(orderId);\n            return next;\n        });\n\n        return () => {\n            setPayingOrderIds((prev) => {\n                const next = new Set(prev);\n                next.delete(orderId);\n                return next;\n            });\n        };\n    }, []);\n\n    const withRemovingItem = React.useCallback((itemId: string) => {\n        setRemovingItemIds((prev) => {\n            const next = new Set(prev);\n            next.add(itemId);\n            return next;\n        });\n\n        return () => {\n            setRemovingItemIds((prev) => {\n                const next = new Set(prev);\n                next.delete(itemId);\n                return next;\n            });\n        };\n    }, []);\n\n    const withAssigningItem = React.useCallback((itemId: string) => {\n        setAssigningItemIds((prev) => {\n            const next = new Set(prev);\n            next.add(itemId);\n            return next;\n        });\n\n        return () => {\n            setAssigningItemIds((prev) => {\n                const next = new Set(prev);\n                next.delete(itemId);\n                return next;\n            });\n        };\n    }, []);\n\n    // compat (ainda existe no código, mas agora não é o fluxo principal)\n    const handleCancelProductOrder = React.useCallback(\n        async (orderId: string) => {\n            if (!orderId) return;\n            if (payingClientId) return;\n            if (cancelingClientId) return;\n            if (addingProductForClientId) return;\n\n            const ok = window.confirm(\n                `Cancelar o pedido #${shortId(orderId)}?\\n\\nIsso cancelará o pedido inteiro.`\n            );\n            if (!ok) return;\n\n            const release = withPayingOrder(orderId);\n\n            try {\n                toast.message(`Cancelando pedido #${shortId(orderId)}…`);\n                await cancelOrder(orderId);\n                toast.success('Pedido cancelado.');\n                router.refresh();\n            } catch (e: any) {\n                toast.error(e?.message ?? 'Erro ao cancelar pedido.');\n            } finally {\n                release();\n            }\n        },\n        [\n            addingProductForClientId,\n            cancelOrder,\n            cancelingClientId,\n            payingClientId,\n            router,\n            withPayingOrder,\n        ]\n    );\n\n    const handleRemoveProductItem = React.useCallback(\n        async (orderId: string, item: ProductOrderItemUI) => {\n            if (!orderId || !item?.itemId) return;\n\n            if (payingClientId) return;\n            if (cancelingClientId) return;\n            if (addingProductForClientId) return;\n\n            if (removingItemIds.has(item.itemId)) return;\n\n            const ok = window.confirm(\n                `Remover este produto do pedido #${shortId(orderId)}?\\n\\n• ${item.qty}x ${item.name}\\n• Total do item: ${item.totalLabel}`\n            );\n            if (!ok) return;\n\n            const releaseItem = withRemovingItem(item.itemId);\n            const releaseOrder = withPayingOrder(orderId);\n\n            try {\n                toast.message(`Removendo produto de #${shortId(orderId)}…`);\n                await removeProductItem(orderId, item.itemId);\n                toast.success('Produto removido.');\n                router.refresh();\n            } catch (e: any) {\n                toast.error(e?.message ?? 'Erro ao remover produto.');\n            } finally {\n                releaseOrder();\n                releaseItem();\n            }\n        },\n        [\n            addingProductForClientId,\n            cancelingClientId,\n            payingClientId,\n            removeProductItem,\n            removingItemIds,\n            router,\n            withPayingOrder,\n            withRemovingItem,\n        ]\n    );\n\n    const handleAssignProfessionalForItem = React.useCallback(\n        async (\n            orderId: string,\n            item: ProductOrderItemUI,\n            professionalId: string\n        ) => {\n            if (!orderId || !item?.itemId) return;\n            if (!professionalId) return;\n\n            if (payingClientId) return;\n            if (cancelingClientId) return;\n            if (addingProductForClientId) return;\n\n            if (assigningItemIds.has(item.itemId)) return;\n\n            const releaseItem = withAssigningItem(item.itemId);\n            const releaseOrder = withPayingOrder(orderId);\n\n            try {\n                toast.message(`Salvando profissional do item…`);\n                await assignProductItemProfessional(\n                    orderId,\n                    item.itemId,\n                    professionalId\n                );\n                toast.success('Profissional atribuído.');\n                router.refresh();\n            } catch (e: any) {\n                toast.error(e?.message ?? 'Erro ao atribuir profissional.');\n            } finally {\n                releaseOrder();\n                releaseItem();\n            }\n        },\n        [\n            addingProductForClientId,\n            assignProductItemProfessional,\n            assigningItemIds,\n            cancelingClientId,\n            payingClientId,\n            router,\n            withAssigningItem,\n            withPayingOrder,\n        ]\n    );\n\n    const handleBulkAssignForAccount = React.useCallback(\n        async (account: OpenAccountUI) => {\n            const clientId = account?.clientId;\n            if (!clientId) return;\n\n            const professionalId = String(\n                bulkProfessionalByClient[clientId] ?? ''\n            ).trim();\n            if (!professionalId) {\n                toast.message('Selecione um profissional para aplicar.');\n                return;\n            }\n\n            if (payingClientId) return;\n            if (cancelingClientId) return;\n            if (addingProductForClientId) return;\n\n            const itemsToAssign: Array<{\n                orderId: string;\n                item: ProductOrderItemUI;\n            }> = [];\n\n            for (const order of account.productOrders ?? []) {\n                const items = Array.isArray(order.items) ? order.items : [];\n                for (const it of items) {\n                    if (!it?.itemId) continue;\n                    if (it.professionalId) continue; // só aplica nos que estão vazios\n                    itemsToAssign.push({ orderId: order.id, item: it });\n                }\n            }\n\n            if (itemsToAssign.length === 0) {\n                toast.message('Todos os itens já têm profissional.');\n                return;\n            }\n\n            const ok = window.confirm(\n                `Aplicar o profissional selecionado em ${itemsToAssign.length} item(ns) sem profissional?`\n            );\n            if (!ok) return;\n\n            try {\n                for (let i = 0; i < itemsToAssign.length; i++) {\n                    const { orderId, item } = itemsToAssign[i];\n                    const releaseItem = withAssigningItem(item.itemId);\n                    const releaseOrder = withPayingOrder(orderId);\n\n                    try {\n                        toast.message(\n                            `Aplicando ${i + 1}/${itemsToAssign.length}…`\n                        );\n                        await assignProductItemProfessional(\n                            orderId,\n                            item.itemId,\n                            professionalId\n                        );\n                    } finally {\n                        releaseOrder();\n                        releaseItem();\n                    }\n                }\n\n                toast.success('Profissional aplicado nos itens pendentes.');\n                router.refresh();\n            } catch (e: any) {\n                toast.error(e?.message ?? 'Erro ao aplicar profissional.');\n            }\n        },\n        [\n            addingProductForClientId,\n            assignProductItemProfessional,\n            bulkProfessionalByClient,\n            cancelingClientId,\n            payingClientId,\n            router,\n            withAssigningItem,\n            withPayingOrder,\n        ]\n    );\n\n    const handleCancelAccount = React.useCallback(\n        async (account: OpenAccountUI) => {\n            if (!account?.clientId) return;\n            if (payingClientId) return;\n            if (cancelingClientId) return;\n            if (addingProductForClientId) return;\n\n            const orderIds = [\n                ...account.serviceOrders.map((o) => o.id),\n                ...account.productOrders.map((o) => o.id),\n            ].filter(Boolean);\n\n            if (orderIds.length === 0) {\n                toast.message('Nada para cancelar nesta conta.');\n                return;\n            }\n\n            const ok = window.confirm(\n                `Cancelar a conta do cliente \"${account.clientLabel}\"?\\n\\nIsso cancelará ${orderIds.length} pedido(s) pendente(s).`\n            );\n            if (!ok) return;\n\n            setCancelingClientId(account.clientId);\n\n            try {\n                toast.message(`Cancelando conta…`);\n                const data = await cancelAccount(account.clientId, orderIds);\n\n                if (data.canceledCount === 0) {\n                    toast.message('Nenhum pedido foi cancelado.');\n                } else {\n                    toast.success(\n                        `Conta cancelada: ${data.canceledCount} pedido(s).`\n                    );\n                }\n\n                router.refresh();\n            } catch (e: any) {\n                toast.error(e?.message ?? 'Erro ao cancelar conta.');\n            } finally {\n                setCancelingClientId(null);\n            }\n        },\n        [\n            addingProductForClientId,\n            cancelAccount,\n            cancelingClientId,\n            payingClientId,\n            router,\n        ]\n    );\n\n    const fetchProducts = React.useCallback(async () => {\n        setProductsLoading(true);\n\n        try {\n            const unit = searchParams?.get('unit');\n            const sp = new URLSearchParams();\n\n            // ✅ Importante: se unit=all, NÃO envia (sua API trata ausência como \"todas\")\n            if (unit && unit !== 'all') sp.set('unit', unit);\n\n            const url = `/api/admin/checkout/products${\n                sp.toString() ? `?${sp.toString()}` : ''\n            }`;\n\n            const res = await fetch(url, { method: 'GET' });\n\n            const json = (await res\n                .json()\n                .catch(() => null)) as ProductsListResponse | null;\n\n            if (!res.ok || !json || !json.ok) {\n                const msg =\n                    json && !json.ok\n                        ? json.error\n                        : 'Falha ao carregar produtos.';\n                throw new Error(msg);\n            }\n\n            setProducts(json.data.products ?? []);\n        } catch (e: any) {\n            toast.error(e?.message ?? 'Erro ao carregar produtos.');\n            setProducts([]);\n        } finally {\n            setProductsLoading(false);\n        }\n    }, [searchParams]);\n\n    const fetchProfessionals = React.useCallback(async () => {\n        setProfessionalsLoading(true);\n\n        try {\n            const unit = searchParams?.get('unit');\n            const sp = new URLSearchParams();\n\n            // ✅ mesmo padrão: se unit=all, não envia\n            if (unit && unit !== 'all') sp.set('unit', unit);\n\n            const url = `/api/admin/checkout/professionals${\n                sp.toString() ? `?${sp.toString()}` : ''\n            }`;\n\n            const res = await fetch(url, { method: 'GET' });\n\n            const json = (await res\n                .json()\n                .catch(() => null)) as ProfessionalsListResponse | null;\n\n            if (!res.ok || !json || !json.ok) {\n                const msg =\n                    json && !json.ok\n                        ? json.error\n                        : 'Falha ao carregar profissionais.';\n                throw new Error(msg);\n            }\n\n            // ✅ Importante:\n            // - Mantém todos (ativos e inativos) pra não zerar o select por acidente.\n            // - Se quiser esconder inativos, faz isso no render (com label).\n            setProfessionals(json.data.professionals ?? []);\n        } catch (e: any) {\n            toast.error(e?.message ?? 'Erro ao carregar profissionais.');\n            setProfessionals([]);\n        } finally {\n            setProfessionalsLoading(false);\n        }\n    }, [searchParams]);\n\n    React.useEffect(() => {\n        // carrega no mount e quando muda o unit (via searchParams)\n        fetchProducts();\n        fetchProfessionals();\n    }, [fetchProducts, fetchProfessionals]);\n\n    const handleAddProduct = React.useCallback(\n        async (account: OpenAccountUI) => {\n            const clientId = account?.clientId;\n            if (!clientId) return;\n\n            if (payingClientId) return;\n            if (cancelingClientId) return;\n            if (addingProductForClientId) return;\n\n            const productId = selectedProductByClient[clientId] ?? '';\n            const quantity = qtyByClient[clientId] ?? 1;\n\n            if (!productId) {\n                toast.message('Selecione um produto.');\n                return;\n            }\n\n            const qty = toIntSafe(quantity, 1);\n\n            // best-effort no front (a garantia real é a transação no backend)\n            const product = products.find((p) => p.id === productId);\n            if (product && product.stockQuantity < qty) {\n                toast.error(\n                    `Estoque insuficiente: disponível ${product.stockQuantity}, solicitado ${qty}.`\n                );\n                return;\n            }\n\n            setAddingProductForClientId(clientId);\n\n            try {\n                toast.message('Adicionando produto…');\n                const data = await addProduct(clientId, productId, qty);\n\n                toast.success(\n                    `Produto adicionado${\n                        data.orderWasCreated ? ' (novo pedido criado)' : ''\n                    }.`\n                );\n\n                // reseta inputs do cliente\n                setSelectedProductByClient((prev) => {\n                    const next = { ...prev };\n                    next[clientId] = '';\n                    return next;\n                });\n                setQtyByClient((prev) => {\n                    const next = { ...prev };\n                    next[clientId] = 1;\n                    return next;\n                });\n\n                // recarrega lista de produtos para refletir estoque atualizado (nice-to-have)\n                fetchProducts();\n\n                router.refresh();\n            } catch (e: any) {\n                toast.error(e?.message ?? 'Erro ao adicionar produto.');\n            } finally {\n                setAddingProductForClientId(null);\n            }\n        },\n        [\n            addProduct,\n            addingProductForClientId,\n            cancelingClientId,\n            payingClientId,\n            products,\n            qtyByClient,\n            router,\n            selectedProductByClient,\n            fetchProducts,\n        ]\n    );\n\n    const handleMarkAllAsPaid = React.useCallback(\n        async (account: OpenAccountUI) => {\n            if (payingClientId) return;\n            if (cancelingClientId) return;\n            if (addingProductForClientId) return;\n\n            // ✅ Regra UI: se tem itens de produto (items[]) e algum não tem professionalId, bloqueia\n            if (account.hasProducts) {\n                const productItems = (account.productOrders ?? [])\n                    .flatMap((o) => (Array.isArray(o.items) ? o.items : []))\n                    .filter(Boolean);\n\n                if (productItems.length > 0) {\n                    const missing = productItems.filter((it) => {\n                        const saved = String(it.professionalId ?? '').trim();\n                        const staged = String(\n                            selectedProfessionalByItem[it.itemId] ?? ''\n                        ).trim();\n                        return !saved && !staged;\n                    });\n\n                    if (missing.length > 0) {\n                        toast.error(\n                            `Faltou profissional em ${missing.length} item(ns) de produto. Selecione o profissional em cada item antes de concluir.`\n                        );\n\n                        return;\n                    }\n                }\n            }\n\n            const orderIds = [\n                ...account.serviceOrders.map((o) => o.id),\n                ...account.productOrders.map((o) => o.id),\n            ].filter(Boolean);\n\n            if (orderIds.length === 0) {\n                toast.message('Nada para pagar nesta conta.');\n                return;\n            }\n\n            setPayingClientId(account.clientId);\n\n            let okCount = 0;\n            const failed: Array<{ id: string; error: string }> = [];\n\n            try {\n                for (let i = 0; i < orderIds.length; i++) {\n                    const id = orderIds[i];\n                    const release = withPayingOrder(id);\n\n                    try {\n                        toast.message(\n                            `Concluindo ${i + 1}/${orderIds.length}: #${shortId(id)}…`\n                        );\n                        await completeOrder(id);\n                        okCount++;\n                    } catch (e: any) {\n                        failed.push({\n                            id,\n                            error: e?.message ?? 'Erro ao concluir.',\n                        });\n                    } finally {\n                        release();\n                    }\n                }\n\n                if (failed.length === 0) {\n                    toast.success('Conta marcada como paga.');\n                } else if (okCount === 0) {\n                    toast.error(\n                        `Nenhum pedido foi concluído. Primeiro erro: #${shortId(\n                            failed[0].id\n                        )} (${failed[0].error})`\n                    );\n                } else {\n                    toast.message(\n                        `Finalizado: ${okCount} pago(s), ${failed.length} com erro.`\n                    );\n                    toast.error(\n                        `Erro em #${shortId(failed[0].id)}: ${failed[0].error}`\n                    );\n                }\n\n                router.refresh();\n            } catch (e: any) {\n                toast.error(e?.message ?? 'Erro ao concluir checkout.');\n            } finally {\n                setPayingClientId(null);\n            }\n        },\n        [\n            addingProductForClientId,\n            cancelingClientId,\n            completeOrder,\n            payingClientId,\n            router,\n            withPayingOrder,\n        ]\n    );\n\n    return (\n        <div className=\"space-y-5 max-w-7xl\">\n            <header className=\"flex items-center justify-between gap-4\">\n                <div>\n                    <h1 className=\"text-title text-content-primary\">\n                        Checkout\n                    </h1>\n                    <p className=\"text-paragraph-medium text-content-secondary\">\n                        Finalize os pagamentos de atendimentos e pedidos de\n                        produtos.\n                    </p>\n\n                    <p className=\"text-paragraph-small text-content-tertiary mt-1\">\n                        Escopo de unidades:{' '}\n                        {canSeeAllUnits ? 'todas as unidades' : 'unidade atual'}\n                    </p>\n                </div>\n\n                <MonthPicker />\n            </header>\n\n            <section className=\"space-y-4\">\n                <div className=\"flex items-center justify-between gap-3\">\n                    <h2 className=\"text-subtitle text-content-primary\">\n                        Contas em aberto{' '}\n                        <span className=\"text-content-secondary font-normal\">\n                            ({openAccountsCount})\n                        </span>\n                    </h2>\n                </div>\n\n                {openAccounts.length === 0 ? (\n                    <EmptyState title=\"Não há contas aguardando pagamento no momento.\" />\n                ) : (\n                    <div className=\"space-y-3\">\n                        {openAccounts.map((account) => {\n                            const isPaying =\n                                payingClientId === account.clientId;\n\n                            const isCanceling =\n                                cancelingClientId === account.clientId;\n\n                            const isAdding =\n                                addingProductForClientId === account.clientId;\n\n                            const accountOrderIds = [\n                                ...account.serviceOrders.map((o) => o.id),\n                                ...account.productOrders.map((o) => o.id),\n                            ].filter(Boolean);\n\n                            const anyOrderBusy = accountOrderIds.some((id) =>\n                                payingOrderIds.has(id)\n                            );\n\n                            const selectedProductId =\n                                selectedProductByClient[account.clientId] ?? '';\n\n                            const qtyValue = qtyByClient[account.clientId] ?? 1;\n\n                            const isBusyGlobal =\n                                Boolean(payingClientId) ||\n                                Boolean(cancelingClientId) ||\n                                Boolean(addingProductForClientId);\n\n                            const accountProductItems = (\n                                account.productOrders ?? []\n                            )\n                                .flatMap((o) =>\n                                    Array.isArray(o.items) ? o.items : []\n                                )\n                                .filter(Boolean);\n\n                            const missingProfessionalCount =\n                                account.hasProducts &&\n                                accountProductItems.length > 0\n                                    ? accountProductItems.filter((it) => {\n                                          const saved = String(\n                                              it.professionalId ?? ''\n                                          ).trim();\n                                          const staged = String(\n                                              selectedProfessionalByItem[\n                                                  it.itemId\n                                              ] ?? ''\n                                          ).trim();\n                                          return !saved && !staged;\n                                      }).length\n                                    : 0;\n\n                            const bulkProfessionalId =\n                                bulkProfessionalByClient[account.clientId] ??\n                                '';\n\n                            return (\n                                <div\n                                    key={account.clientId}\n                                    className=\"rounded-xl border border-border-primary bg-background-tertiary px-4 py-3 space-y-3\"\n                                >\n                                    <div className=\"flex flex-wrap items-start justify-between gap-3\">\n                                        <div className=\"min-w-0\">\n                                            <p className=\"text-paragraph-small text-content-primary truncate\">\n                                                Cliente:{' '}\n                                                <span className=\"font-medium\">\n                                                    {account.clientLabel}\n                                                </span>\n                                            </p>\n                                            <p className=\"text-paragraph-small text-content-secondary\">\n                                                Última movimentação em{' '}\n                                                {account.latestLabel}\n                                            </p>\n\n                                            <p className=\"text-paragraph-small text-content-secondary mt-1\">\n                                                <span>\n                                                    Serviços:{' '}\n                                                    <span className=\"font-medium\">\n                                                        {\n                                                            account.totalServicesLabel\n                                                        }\n                                                    </span>\n                                                </span>\n                                                <span className=\"mx-2\">•</span>\n                                                <span>\n                                                    Produtos:{' '}\n                                                    <span className=\"font-medium\">\n                                                        {\n                                                            account.totalProductsLabel\n                                                        }\n                                                    </span>\n                                                </span>\n                                            </p>\n\n                                            {account.hasProducts &&\n                                            accountProductItems.length > 0 ? (\n                                                <p className=\"text-paragraph-small text-content-tertiary mt-1\">\n                                                    Itens de produto sem\n                                                    profissional:{' '}\n                                                    <span className=\"font-medium\">\n                                                        {\n                                                            missingProfessionalCount\n                                                        }\n                                                    </span>\n                                                </p>\n                                            ) : null}\n                                        </div>\n\n                                        <div className=\"flex flex-col items-end gap-1\">\n                                            <span className=\"text-paragraph-small font-semibold text-content-primary\">\n                                                Total a pagar:{' '}\n                                                {account.totalLabel}\n                                            </span>\n                                            <StatusBadge status=\"PENDING\" />\n                                        </div>\n                                    </div>\n\n                                    {account.serviceOrders.length > 0 ? (\n                                        <div className=\"space-y-2 pt-2 border-t border-border-primary\">\n                                            <p className=\"text-label-small text-content-secondary\">\n                                                Serviços pendentes\n                                            </p>\n\n                                            <div className=\"space-y-2\">\n                                                {account.serviceOrders.map(\n                                                    (order) => {\n                                                        const isOrderBusy =\n                                                            payingOrderIds.has(\n                                                                order.id\n                                                            );\n\n                                                        return (\n                                                            <div\n                                                                key={order.id}\n                                                                className={cn(\n                                                                    'rounded-lg border border-border-primary bg-background-secondary px-3 py-2',\n                                                                    isOrderBusy &&\n                                                                        'opacity-70'\n                                                                )}\n                                                            >\n                                                                <div className=\"flex flex-wrap items-start justify-between gap-3\">\n                                                                    <div className=\"min-w-0\">\n                                                                        <p className=\"text-paragraph-small text-content-primary truncate\">\n                                                                            Atendimento\n                                                                            #\n                                                                            {shortId(\n                                                                                order.id\n                                                                            )}\n                                                                        </p>\n\n                                                                        {order.appointmentAtLabel ? (\n                                                                            <p className=\"text-paragraph-small text-content-secondary\">\n                                                                                Atendimento\n                                                                                em{' '}\n                                                                                {\n                                                                                    order.appointmentAtLabel\n                                                                                }\n                                                                            </p>\n                                                                        ) : null}\n\n                                                                        <p className=\"text-paragraph-small text-content-secondary\">\n                                                                            Profissional:{' '}\n                                                                            {\n                                                                                order.professionalName\n                                                                            }\n                                                                        </p>\n                                                                        <p className=\"text-paragraph-small text-content-secondary\">\n                                                                            Serviços:{' '}\n                                                                            {\n                                                                                order.itemsLabel\n                                                                            }\n                                                                        </p>\n                                                                    </div>\n\n                                                                    <div className=\"flex flex-col items-end gap-1\">\n                                                                        <span className=\"text-paragraph-small font-semibold text-content-primary\">\n                                                                            {\n                                                                                order.totalLabel\n                                                                            }\n                                                                        </span>\n                                                                        <StatusBadge\n                                                                            status={\n                                                                                order.status\n                                                                            }\n                                                                        />\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        );\n                                                    }\n                                                )}\n                                            </div>\n                                        </div>\n                                    ) : null}\n\n                                    {account.productOrders.length > 0 ? (\n                                        <div className=\"space-y-2 pt-2 border-t border-border-primary\">\n                                            <div className=\"flex flex-wrap items-center justify-between gap-3\">\n                                                <div>\n                                                    <p className=\"text-label-small text-content-secondary\">\n                                                        Produtos na conta\n                                                    </p>\n                                                    <p className=\"text-xs text-content-tertiary\">\n                                                        Remova item por item e\n                                                        atribua o profissional\n                                                        da venda.\n                                                    </p>\n                                                </div>\n                                            </div>\n\n                                            <div className=\"space-y-2\">\n                                                {account.productOrders.map(\n                                                    (order) => {\n                                                        const isOrderBusy =\n                                                            payingOrderIds.has(\n                                                                order.id\n                                                            );\n\n                                                        const items =\n                                                            order.items &&\n                                                            Array.isArray(\n                                                                order.items\n                                                            )\n                                                                ? order.items\n                                                                : [];\n\n                                                        const fallbackLines =\n                                                            items.length === 0\n                                                                ? splitItemsLabel(\n                                                                      order.itemsLabel\n                                                                  )\n                                                                : [];\n\n                                                        return (\n                                                            <div\n                                                                key={order.id}\n                                                                className={cn(\n                                                                    'rounded-lg border border-border-primary bg-background-secondary px-3 py-2',\n                                                                    isOrderBusy &&\n                                                                        'opacity-70'\n                                                                )}\n                                                            >\n                                                                <div className=\"flex flex-wrap items-start justify-between gap-3\">\n                                                                    <div className=\"min-w-0\">\n                                                                        <p className=\"text-paragraph-small text-content-primary truncate\">\n                                                                            Pedido\n                                                                            #\n                                                                            {shortId(\n                                                                                order.id\n                                                                            )}\n                                                                        </p>\n                                                                        <p className=\"text-paragraph-small text-content-secondary\">\n                                                                            Criado\n                                                                            em{' '}\n                                                                            {\n                                                                                order.createdAtLabel\n                                                                            }\n                                                                        </p>\n                                                                    </div>\n\n                                                                    <div className=\"flex flex-col items-end gap-1\">\n                                                                        <span className=\"text-paragraph-small font-semibold text-content-primary\">\n                                                                            {\n                                                                                order.totalLabel\n                                                                            }\n                                                                        </span>\n                                                                        <StatusBadge\n                                                                            status={\n                                                                                order.status\n                                                                            }\n                                                                        />\n                                                                    </div>\n                                                                </div>\n\n                                                                {/* ✅ blocos por produto (com botão individual + profissional) */}\n                                                                {items.length >\n                                                                0 ? (\n                                                                    <div className=\"mt-3 space-y-2\">\n                                                                        {items.map(\n                                                                            (\n                                                                                it\n                                                                            ) => {\n                                                                                const isRemoving =\n                                                                                    removingItemIds.has(\n                                                                                        it.itemId\n                                                                                    );\n                                                                                const isAssigning =\n                                                                                    assigningItemIds.has(\n                                                                                        it.itemId\n                                                                                    );\n\n                                                                                const disabled =\n                                                                                    isOrderBusy ||\n                                                                                    isRemoving ||\n                                                                                    isAssigning ||\n                                                                                    Boolean(\n                                                                                        payingClientId\n                                                                                    ) ||\n                                                                                    Boolean(\n                                                                                        cancelingClientId\n                                                                                    ) ||\n                                                                                    Boolean(\n                                                                                        addingProductForClientId\n                                                                                    );\n\n                                                                                const currentSelection =\n                                                                                    selectedProfessionalByItem[\n                                                                                        it\n                                                                                            .itemId\n                                                                                    ] ??\n                                                                                    String(\n                                                                                        it.professionalId ??\n                                                                                            ''\n                                                                                    );\n\n                                                                                const selectIsDisabled =\n                                                                                    disabled ||\n                                                                                    professionalsLoading;\n\n                                                                                const hasAssigned =\n                                                                                    Boolean(\n                                                                                        String(\n                                                                                            it.professionalId ??\n                                                                                                ''\n                                                                                        ).trim()\n                                                                                    );\n\n                                                                                return (\n                                                                                    <div\n                                                                                        key={\n                                                                                            it.itemId\n                                                                                        }\n                                                                                        className={cn(\n                                                                                            'rounded-lg border border-border-primary bg-background-tertiary px-3 py-2',\n                                                                                            (isRemoving ||\n                                                                                                isAssigning) &&\n                                                                                                'opacity-70'\n                                                                                        )}\n                                                                                    >\n                                                                                        <div className=\"flex flex-wrap items-start justify-between gap-3\">\n                                                                                            <div className=\"min-w-0\">\n                                                                                                <p className=\"text-paragraph-small text-content-primary truncate\">\n                                                                                                    {\n                                                                                                        it.qty\n                                                                                                    }\n\n                                                                                                    x{' '}\n                                                                                                    {\n                                                                                                        it.name\n                                                                                                    }\n                                                                                                </p>\n                                                                                                <p className=\"text-paragraph-small text-content-secondary\">\n                                                                                                    Total\n                                                                                                    do\n                                                                                                    item:{' '}\n                                                                                                    <span className=\"font-medium text-content-primary\">\n                                                                                                        {\n                                                                                                            it.totalLabel\n                                                                                                        }\n                                                                                                    </span>\n                                                                                                </p>\n\n                                                                                                {it.professionalName ? (\n                                                                                                    <p className=\"text-xs text-content-tertiary mt-1\">\n                                                                                                        Profissional\n                                                                                                        atual:{' '}\n                                                                                                        <span className=\"font-medium text-content-secondary\">\n                                                                                                            {\n                                                                                                                it.professionalName\n                                                                                                            }\n                                                                                                        </span>\n                                                                                                    </p>\n                                                                                                ) : null}\n                                                                                            </div>\n\n                                                                                            <div className=\"flex flex-wrap items-center gap-2 justify-end\">\n                                                                                                {account.hasProducts ? (\n                                                                                                    <>\n                                                                                                        <select\n                                                                                                            value={\n                                                                                                                currentSelection\n                                                                                                            }\n                                                                                                            onChange={(\n                                                                                                                e\n                                                                                                            ) => {\n                                                                                                                const nextProfessionalId =\n                                                                                                                    e\n                                                                                                                        .target\n                                                                                                                        .value;\n\n                                                                                                                // mantém o select controlado\n                                                                                                                setSelectedProfessionalByItem(\n                                                                                                                    (\n                                                                                                                        prev\n                                                                                                                    ) => ({\n                                                                                                                        ...prev,\n                                                                                                                        [it.itemId]:\n                                                                                                                            nextProfessionalId,\n                                                                                                                    })\n                                                                                                                );\n\n                                                                                                                // salva automático quando selecionar\n                                                                                                                const pid =\n                                                                                                                    String(\n                                                                                                                        nextProfessionalId ??\n                                                                                                                            ''\n                                                                                                                    ).trim();\n                                                                                                                if (\n                                                                                                                    !pid\n                                                                                                                )\n                                                                                                                    return;\n\n                                                                                                                handleAssignProfessionalForItem(\n                                                                                                                    order.id,\n                                                                                                                    it,\n                                                                                                                    pid\n                                                                                                                );\n                                                                                                            }}\n                                                                                                            className={cn(\n                                                                                                                'h-9 rounded-md border border-border-primary bg-background-secondary px-2 text-sm text-content-primary',\n                                                                                                                !hasAssigned &&\n                                                                                                                    'border-amber-500/40'\n                                                                                                            )}\n                                                                                                            disabled={\n                                                                                                                selectIsDisabled\n                                                                                                            }\n                                                                                                            title={\n                                                                                                                professionals.length ===\n                                                                                                                0\n                                                                                                                    ? 'Sem profissionais disponíveis'\n                                                                                                                    : undefined\n                                                                                                            }\n                                                                                                        >\n                                                                                                            <option value=\"\">\n                                                                                                                {professionalsLoading\n                                                                                                                    ? 'Carregando...'\n                                                                                                                    : professionals.length ===\n                                                                                                                        0\n                                                                                                                      ? 'Sem profissionais'\n                                                                                                                      : 'Selecione o profissional'}\n                                                                                                            </option>\n                                                                                                            {professionals.map(\n                                                                                                                (\n                                                                                                                    p\n                                                                                                                ) => (\n                                                                                                                    <option\n                                                                                                                        key={\n                                                                                                                            p.id\n                                                                                                                        }\n                                                                                                                        value={\n                                                                                                                            p.id\n                                                                                                                        }\n                                                                                                                        disabled={\n                                                                                                                            !p.isActive\n                                                                                                                        }\n                                                                                                                    >\n                                                                                                                        {\n                                                                                                                            p.name\n                                                                                                                        }\n                                                                                                                        {!p.isActive\n                                                                                                                            ? ' (inativo)'\n                                                                                                                            : ''}\n                                                                                                                    </option>\n                                                                                                                )\n                                                                                                            )}\n                                                                                                        </select>\n                                                                                                    </>\n                                                                                                ) : null}\n\n                                                                                                <Button\n                                                                                                    type=\"button\"\n                                                                                                    variant=\"outline\"\n                                                                                                    size=\"sm\"\n                                                                                                    className=\"text-red-500 border-red-500/40 hover:bg-red-500/5\"\n                                                                                                    onClick={() =>\n                                                                                                        handleRemoveProductItem(\n                                                                                                            order.id,\n                                                                                                            it\n                                                                                                        )\n                                                                                                    }\n                                                                                                    disabled={\n                                                                                                        disabled\n                                                                                                    }\n                                                                                                    title={\n                                                                                                        disabled\n                                                                                                            ? 'Processando...'\n                                                                                                            : 'Remover este produto'\n                                                                                                    }\n                                                                                                >\n                                                                                                    {isRemoving\n                                                                                                        ? 'Removendo...'\n                                                                                                        : 'Remover'}\n                                                                                                </Button>\n                                                                                            </div>\n                                                                                        </div>\n\n                                                                                        {account.hasProducts &&\n                                                                                        !hasAssigned ? (\n                                                                                            <p className=\"mt-2 text-xs text-amber-700\">\n                                                                                                Selecione\n                                                                                                o\n                                                                                                profissional\n                                                                                                para\n                                                                                                liberar\n                                                                                                o\n                                                                                                checkout\n                                                                                                desta\n                                                                                                conta.\n                                                                                            </p>\n                                                                                        ) : null}\n                                                                                    </div>\n                                                                                );\n                                                                            }\n                                                                        )}\n                                                                    </div>\n                                                                ) : fallbackLines.length >\n                                                                  0 ? (\n                                                                    // compat visual (sem botão individual, porque não tem itemId)\n                                                                    <div className=\"mt-2\">\n                                                                        <p className=\"text-paragraph-small text-content-secondary\">\n                                                                            Itens:\n                                                                        </p>\n                                                                        <ul className=\"pl-4 list-disc space-y-0.5\">\n                                                                            {fallbackLines.map(\n                                                                                (\n                                                                                    line,\n                                                                                    idx\n                                                                                ) => (\n                                                                                    <li\n                                                                                        key={`${order.id}:${idx}`}\n                                                                                        className=\"text-paragraph-small text-content-secondary\"\n                                                                                    >\n                                                                                        {\n                                                                                            line\n                                                                                        }\n                                                                                    </li>\n                                                                                )\n                                                                            )}\n                                                                        </ul>\n\n                                                                        <div className=\"mt-2\">\n                                                                            <Button\n                                                                                type=\"button\"\n                                                                                variant=\"outline\"\n                                                                                size=\"sm\"\n                                                                                className=\"text-red-500 border-red-500/40 hover:bg-red-500/5\"\n                                                                                onClick={() =>\n                                                                                    handleCancelProductOrder(\n                                                                                        order.id\n                                                                                    )\n                                                                                }\n                                                                                disabled={\n                                                                                    isOrderBusy ||\n                                                                                    Boolean(\n                                                                                        payingClientId\n                                                                                    ) ||\n                                                                                    Boolean(\n                                                                                        cancelingClientId\n                                                                                    ) ||\n                                                                                    Boolean(\n                                                                                        addingProductForClientId\n                                                                                    )\n                                                                                }\n                                                                            >\n                                                                                {isOrderBusy\n                                                                                    ? 'Processando...'\n                                                                                    : 'Cancelar pedido'}\n                                                                            </Button>\n                                                                        </div>\n\n                                                                        {account.hasProducts ? (\n                                                                            <p className=\"mt-2 text-xs text-content-tertiary\">\n                                                                                Para\n                                                                                atribuir\n                                                                                profissional\n                                                                                por\n                                                                                produto,\n                                                                                o\n                                                                                backend\n                                                                                precisa\n                                                                                enviar{' '}\n                                                                                <span className=\"font-medium\">\n                                                                                    items[]\n                                                                                </span>{' '}\n                                                                                com{' '}\n                                                                                <span className=\"font-medium\">\n                                                                                    itemId\n                                                                                </span>\n\n                                                                                .\n                                                                            </p>\n                                                                        ) : null}\n                                                                    </div>\n                                                                ) : (\n                                                                    <p className=\"mt-2 text-paragraph-small text-content-secondary\">\n                                                                        Itens:{' '}\n                                                                        {'—'}\n                                                                    </p>\n                                                                )}\n                                                            </div>\n                                                        );\n                                                    }\n                                                )}\n                                            </div>\n                                        </div>\n                                    ) : null}\n\n                                    <div className=\"pt-2 border-t border-border-primary space-y-2\">\n                                        <div className=\"flex items-center justify-between gap-2\">\n                                            <p className=\"text-label-small text-content-secondary\">\n                                                Adicionar produto na conta\n                                            </p>\n                                        </div>\n\n                                        <div className=\"flex flex-wrap items-end gap-2\">\n                                            <div className=\"flex flex-col gap-1\">\n                                                <label className=\"text-xs text-content-secondary\">\n                                                    Produto\n                                                </label>\n                                                <select\n                                                    value={selectedProductId}\n                                                    onChange={(e) =>\n                                                        setSelectedProductByClient(\n                                                            (prev) => ({\n                                                                ...prev,\n                                                                [account.clientId]:\n                                                                    e.target\n                                                                        .value,\n                                                            })\n                                                        )\n                                                    }\n                                                    className=\"h-9 min-w-60 rounded-md border border-border-primary bg-background-secondary px-2 text-sm text-content-primary\"\n                                                    disabled={\n                                                        isBusyGlobal ||\n                                                        productsLoading ||\n                                                        products.length === 0\n                                                    }\n                                                >\n                                                    <option value=\"\" disabled>\n                                                        {productsLoading\n                                                            ? 'Carregando...'\n                                                            : products.length ===\n                                                                0\n                                                              ? 'Sem produtos disponíveis'\n                                                              : 'Selecione o produto'}\n                                                    </option>\n                                                    {products.map((p) => (\n                                                        <option\n                                                            key={p.id}\n                                                            value={p.id}\n                                                        >\n                                                            {p.name} •{' '}\n                                                            {p.priceLabel} •\n                                                            estoque:{' '}\n                                                            {p.stockQuantity}\n                                                        </option>\n                                                    ))}\n                                                </select>\n                                            </div>\n\n                                            <div className=\"flex flex-col gap-1\">\n                                                <label className=\"text-xs text-content-secondary\">\n                                                    Qtd\n                                                </label>\n                                                <input\n                                                    type=\"number\"\n                                                    min={1}\n                                                    value={qtyValue}\n                                                    onChange={(e) =>\n                                                        setQtyByClient(\n                                                            (prev) => ({\n                                                                ...prev,\n                                                                [account.clientId]:\n                                                                    toIntSafe(\n                                                                        e.target\n                                                                            .value,\n                                                                        1\n                                                                    ),\n                                                            })\n                                                        )\n                                                    }\n                                                    className=\"h-9 w-24 rounded-md border border-border-primary bg-background-secondary px-2 text-sm text-content-primary\"\n                                                    disabled={isBusyGlobal}\n                                                />\n                                            </div>\n\n                                            <Button\n                                                type=\"button\"\n                                                variant=\"edit2\"\n                                                size=\"sm\"\n                                                onClick={() =>\n                                                    handleAddProduct(account)\n                                                }\n                                                disabled={\n                                                    isBusyGlobal ||\n                                                    productsLoading ||\n                                                    !selectedProductId ||\n                                                    products.length === 0\n                                                }\n                                                title={\n                                                    isAdding\n                                                        ? 'Adicionando...'\n                                                        : undefined\n                                                }\n                                            >\n                                                {isAdding\n                                                    ? 'Adicionando...'\n                                                    : 'Adicionar produto'}\n                                            </Button>\n\n                                            {products.length === 0 &&\n                                            !productsLoading ? (\n                                                <p className=\"text-xs text-content-tertiary w-full\">\n                                                    Nenhum produto disponível\n                                                    para esta unidade/filtro.\n                                                </p>\n                                            ) : (\n                                                <p className=\"text-xs text-content-secondary w-full\">\n                                                    O preço é calculado no\n                                                    checkout e fica congelado no\n                                                    item.\n                                                </p>\n                                            )}\n                                        </div>\n                                    </div>\n\n                                    <div className=\"flex flex-wrap items-center justify-between gap-3 pt-2 border-t border-border-primary\">\n                                        <div className=\"flex-1 min-w-0\">\n                                            {account.hasProducts ? (\n                                                <>\n                                                    <p className=\"text-label-small text-content-secondary mb-1\">\n                                                        Profissional responsável\n                                                        pela venda dos produtos\n                                                    </p>\n                                                    <p className=\"text-paragraph-small text-content-secondary\">\n                                                        Atribua o profissional\n                                                        em cada item de produto\n                                                        para calcular\n                                                        faturamento e comissão.\n                                                    </p>\n                                                </>\n                                            ) : (\n                                                <p className=\"text-paragraph-small text-content-secondary\">\n                                                    Esta conta tem apenas\n                                                    serviços. Você pode\n                                                    finalizar direto.\n                                                </p>\n                                            )}\n                                        </div>\n\n                                        <div className=\"flex flex-wrap items-center justify-end gap-2\">\n                                            <Button\n                                                type=\"button\"\n                                                variant=\"destructive\"\n                                                size=\"sm\"\n                                                onClick={() =>\n                                                    handleCancelAccount(account)\n                                                }\n                                                disabled={\n                                                    isPaying ||\n                                                    anyOrderBusy ||\n                                                    isCanceling ||\n                                                    isAdding ||\n                                                    (account.hasProducts &&\n                                                        missingProfessionalCount >\n                                                            0)\n                                                }\n                                                title={\n                                                    isPaying ||\n                                                    anyOrderBusy ||\n                                                    isCanceling ||\n                                                    isAdding\n                                                        ? 'Processando...'\n                                                        : 'Cancela todos os pedidos pendentes da conta'\n                                                }\n                                            >\n                                                {isCanceling\n                                                    ? 'Cancelando...'\n                                                    : 'Cancelar conta'}\n                                            </Button>\n\n                                            <Button\n                                                type=\"button\"\n                                                variant=\"edit2\"\n                                                size=\"sm\"\n                                                onClick={() =>\n                                                    handleMarkAllAsPaid(account)\n                                                }\n                                                disabled={\n                                                    isPaying ||\n                                                    anyOrderBusy ||\n                                                    isCanceling ||\n                                                    isAdding ||\n                                                    (account.hasProducts &&\n                                                        missingProfessionalCount >\n                                                            0)\n                                                }\n                                                title={\n                                                    account.hasProducts &&\n                                                    missingProfessionalCount > 0\n                                                        ? `Faltam ${missingProfessionalCount} item(ns) de produto sem profissional.`\n                                                        : isPaying ||\n                                                            anyOrderBusy ||\n                                                            isCanceling ||\n                                                            isAdding\n                                                          ? 'Concluindo checkout...'\n                                                          : undefined\n                                                }\n                                            >\n                                                {isPaying || anyOrderBusy\n                                                    ? 'Concluindo...'\n                                                    : 'Marcar tudo como pago'}\n                                            </Button>\n                                        </div>\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                )}\n\n                {orphanServiceOrders.length > 0 ||\n                orphanProductOrders.length > 0 ? (\n                    <div className=\"rounded-xl border border-border-primary bg-background-tertiary px-4 py-4 space-y-2\">\n                        <p className=\"text-paragraph-small text-content-secondary\">\n                            Alguns pedidos pendentes não estão vinculados a um\n                            cliente e não podem ser agrupados automaticamente.\n                        </p>\n                    </div>\n                ) : null}\n            </section>\n\n            <OrdersSection\n                monthLabel={monthLabel}\n                totalCountLabel={`${monthGroups.reduce((sum, g) => sum + g.orders.length, 0)} pedidos`}\n                groups={monthGroups}\n            />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}