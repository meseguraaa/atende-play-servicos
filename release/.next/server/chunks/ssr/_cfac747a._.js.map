{"version":3,"sources":["turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/cake.ts","turbopack:///[project]/node_modules/.pnpm/lucide-react@0.552.0_react@19.2.0/node_modules/lucide-react/src/icons/boxes.ts","turbopack:///[project]/src/components/admin/products/product-row/product-row.tsx","turbopack:///[project]/src/components/admin/products/product-edit-dialog/product-edit-dialog.tsx","turbopack:///[project]/src/components/admin/products/product-new-dialog/product-new-dialog.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8', key: '1w3rig' }],\n  ['path', { d: 'M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1', key: 'n2jgmb' }],\n  ['path', { d: 'M2 21h20', key: '1nyx9w' }],\n  ['path', { d: 'M7 8v3', key: '1qtyvj' }],\n  ['path', { d: 'M12 8v3', key: 'hwp4zt' }],\n  ['path', { d: 'M17 8v3', key: '1i6e5u' }],\n  ['path', { d: 'M7 4h.01', key: '1bh4kh' }],\n  ['path', { d: 'M12 4h.01', key: '1ujb9j' }],\n  ['path', { d: 'M17 4h.01', key: '1upcoc' }],\n];\n\n/**\n * @component @name Cake\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgMjF2LThhMiAyIDAgMCAwLTItMkg2YTIgMiAwIDAgMC0yIDJ2OCIgLz4KICA8cGF0aCBkPSJNNCAxNnMuNS0xIDItMSAyLjUgMiA0IDIgMi41LTIgNC0yIDIuNSAyIDQgMiAyLTEgMi0xIiAvPgogIDxwYXRoIGQ9Ik0yIDIxaDIwIiAvPgogIDxwYXRoIGQ9Ik03IDh2MyIgLz4KICA8cGF0aCBkPSJNMTIgOHYzIiAvPgogIDxwYXRoIGQ9Ik0xNyA4djMiIC8+CiAgPHBhdGggZD0iTTcgNGguMDEiIC8+CiAgPHBhdGggZD0iTTEyIDRoLjAxIiAvPgogIDxwYXRoIGQ9Ik0xNyA0aC4wMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/cake\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Cake = createLucideIcon('cake', __iconNode);\n\nexport default Cake;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z',\n      key: 'lc1i9w',\n    },\n  ],\n  ['path', { d: 'm7 16.5-4.74-2.85', key: '1o9zyk' }],\n  ['path', { d: 'm7 16.5 5-3', key: 'va8pkn' }],\n  ['path', { d: 'M7 16.5v5.17', key: 'jnp8gn' }],\n  [\n    'path',\n    {\n      d: 'M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z',\n      key: '8zsnat',\n    },\n  ],\n  ['path', { d: 'm17 16.5-5-3', key: '8arw3v' }],\n  ['path', { d: 'm17 16.5 4.74-2.85', key: '8rfmw' }],\n  ['path', { d: 'M17 16.5v5.17', key: 'k6z78m' }],\n  [\n    'path',\n    {\n      d: 'M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z',\n      key: '1xygjf',\n    },\n  ],\n  ['path', { d: 'M12 8 7.26 5.15', key: '1vbdud' }],\n  ['path', { d: 'm12 8 4.74-2.85', key: '3rx089' }],\n  ['path', { d: 'M12 13.5V8', key: '1io7kd' }],\n];\n\n/**\n * @component @name Boxes\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMi45NyAxMi45MkEyIDIgMCAwIDAgMiAxNC42M3YzLjI0YTIgMiAwIDAgMCAuOTcgMS43MWwzIDEuOGEyIDIgMCAwIDAgMi4wNiAwTDEyIDE5di01LjVsLTUtMy00LjAzIDIuNDJaIiAvPgogIDxwYXRoIGQ9Im03IDE2LjUtNC43NC0yLjg1IiAvPgogIDxwYXRoIGQ9Im03IDE2LjUgNS0zIiAvPgogIDxwYXRoIGQ9Ik03IDE2LjV2NS4xNyIgLz4KICA8cGF0aCBkPSJNMTIgMTMuNVYxOWwzLjk3IDIuMzhhMiAyIDAgMCAwIDIuMDYgMGwzLTEuOGEyIDIgMCAwIDAgLjk3LTEuNzF2LTMuMjRhMiAyIDAgMCAwLS45Ny0xLjcxTDE3IDEwLjVsLTUgM1oiIC8+CiAgPHBhdGggZD0ibTE3IDE2LjUtNS0zIiAvPgogIDxwYXRoIGQ9Im0xNyAxNi41IDQuNzQtMi44NSIgLz4KICA8cGF0aCBkPSJNMTcgMTYuNXY1LjE3IiAvPgogIDxwYXRoIGQ9Ik03Ljk3IDQuNDJBMiAyIDAgMCAwIDcgNi4xM3Y0LjM3bDUgMyA1LTNWNi4xM2EyIDIgMCAwIDAtLjk3LTEuNzFsLTMtMS44YTIgMiAwIDAgMC0yLjA2IDBsLTMgMS44WiIgLz4KICA8cGF0aCBkPSJNMTIgOCA3LjI2IDUuMTUiIC8+CiAgPHBhdGggZD0ibTEyIDggNC43NC0yLjg1IiAvPgogIDxwYXRoIGQ9Ik0xMiAxMy41VjgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/boxes\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Boxes = createLucideIcon('boxes', __iconNode);\n\nexport default Boxes;\n","// src/components/product-row/product-row.tsx\n'use client';\n\nimport * as React from 'react';\nimport { useRouter } from 'next/navigation';\n\nimport type { ProductForRow } from '@/app/admin/products/page';\nimport { Button } from '@/components/ui/button';\nimport { ProductEditDialog } from '@/components/admin/products/product-edit-dialog';\nimport { toast } from 'sonner';\n\ntype ProductRowProps = {\n    product: ProductForRow;\n};\n\nconst MAX_TEXT_LENGTH = 50;\n\nfunction truncate(\n    text: string | null | undefined,\n    max: number = MAX_TEXT_LENGTH\n): string {\n    if (!text) return '';\n    if (text.length <= max) return text;\n    return text.slice(0, max - 1) + '‚Ä¶';\n}\n\nfunction formatDeadline(days: number) {\n    if (!Number.isFinite(days) || days <= 0) return '‚Äî';\n    if (days === 1) return '1 dia';\n    return `${days} dias`;\n}\n\nfunction Badge({\n    children,\n    title,\n}: {\n    children: React.ReactNode;\n    title?: string;\n}) {\n    return (\n        <span\n            title={title}\n            className=\"inline-flex items-center rounded-md border px-2 py-0.5 text-xs bg-muted/40 border-border-primary text-content-secondary\"\n        >\n            {children}\n        </span>\n    );\n}\n\nfunction StatusBadge({\n    isActive,\n    title,\n}: {\n    isActive: boolean;\n    title?: string;\n}) {\n    const toneClass = isActive\n        ? 'bg-green-500/15 text-green-600 border-green-500/30'\n        : 'bg-red-500/15 text-red-600 border-red-500/30';\n\n    return (\n        <span\n            title={title}\n            className={[\n                'inline-flex items-center rounded-md border px-2 py-0.5 text-xs',\n                toneClass,\n            ].join(' ')}\n        >\n            {isActive ? 'Ativo' : 'Inativo'}\n        </span>\n    );\n}\n\nexport function ProductRow({ product }: ProductRowProps) {\n    const router = useRouter();\n    const [isPending, startTransition] = React.useTransition();\n\n    const displayName = truncate(product.name);\n    const deadlineText = formatDeadline(product.pickupDeadlineDays);\n\n    const birthdayBenefitEnabled = Boolean(product.birthdayBenefitEnabled);\n    const hasLevelPrices = Boolean(product.hasLevelPrices);\n    const isFeatured = Boolean(product.isFeatured);\n\n    const hasAnyBadge = isFeatured || birthdayBenefitEnabled || hasLevelPrices;\n\n    // ‚úÖ fallback caso a URL esteja quebrada (evita √≠cone de imagem quebrada)\n    const [imgFailed, setImgFailed] = React.useState(false);\n    const imgSrc = String(product.imageUrl ?? '').trim();\n    const shouldShowImg = Boolean(imgSrc) && !imgFailed;\n\n    React.useEffect(() => {\n        // quando trocar de produto/URL, reseta o erro\n        setImgFailed(false);\n    }, [imgSrc]);\n\n    function handleToggleActive() {\n        startTransition(async () => {\n            try {\n                const res = await fetch(`/api/admin/products/${product.id}`, {\n                    method: 'PATCH',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ toggleActive: true }),\n                });\n\n                const json = (await res.json().catch(() => null)) as\n                    | { ok: true; data?: any }\n                    | { ok: false; error?: string }\n                    | null;\n\n                if (!res.ok || !json || (json as any).ok !== true) {\n                    const msg =\n                        (json as any)?.error ||\n                        'N√£o foi poss√≠vel alterar o status do produto.';\n                    toast.error(msg);\n                    return;\n                }\n\n                toast.success(\n                    product.isActive\n                        ? 'Produto desativado.'\n                        : 'Produto ativado.'\n                );\n                router.refresh();\n            } catch {\n                toast.error('Erro de rede ao alterar status do produto.');\n            }\n        });\n    }\n\n    return (\n        <tr className=\"border-t border-border-primary\">\n            {/* NOME + FOTO */}\n            <td className=\"px-4 py-3\">\n                <div className=\"flex items-center gap-4\">\n                    <div className=\"h-10 w-10 shrink-0 overflow-hidden rounded-lg border border-border-primary bg-background-secondary\">\n                        {shouldShowImg ? (\n                            // eslint-disable-next-line @next/next/no-img-element\n                            <img\n                                src={imgSrc}\n                                alt={product.name}\n                                className=\"h-full w-full object-cover\"\n                                onError={() => setImgFailed(true)}\n                            />\n                        ) : (\n                            <div className=\"flex h-full w-full items-center justify-center text-[10px] text-content-secondary\">\n                                Sem foto\n                            </div>\n                        )}\n                    </div>\n\n                    <div className=\"flex min-w-0 flex-col gap-2\">\n                        <span className=\"font-medium text-content-primary leading-tight\">\n                            {displayName}\n                        </span>\n\n                        {hasAnyBadge && (\n                            <div className=\"flex flex-wrap items-center gap-2\">\n                                {isFeatured && (\n                                    <Badge title=\"Este produto aparece no carrossel de Destaques do app.\">\n                                        ‚≠ê Destaque\n                                    </Badge>\n                                )}\n\n                                {hasLevelPrices && (\n                                    <Badge title=\"Este produto tem descontos por n√≠vel.\">\n                                        üíé N√≠veis\n                                    </Badge>\n                                )}\n\n                                {birthdayBenefitEnabled && (\n                                    <Badge title=\"Este produto tem benef√≠cio de anivers√°rio.\">\n                                        üéÇ Anivers√°rio\n                                    </Badge>\n                                )}\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </td>\n\n            {/* UNIDADE */}\n            <td className=\"px-4 py-3\">\n                <div className=\"flex flex-col gap-1\">\n                    <span className=\"text-content-primary\">\n                        {product.unitName || '‚Äî'}\n                    </span>\n                    <span className=\"text-[11px] text-content-secondary\">\n                        Estoque da unidade\n                    </span>\n                </div>\n            </td>\n\n            {/* PRE√áO */}\n            <td className=\"px-4 py-3 whitespace-nowrap\">\n                R$ {Number(product.price).toFixed(2)}\n            </td>\n\n            {/* COMISS√ÉO */}\n            <td className=\"px-4 py-3 whitespace-nowrap\">\n                {product.barberPercentage !== null &&\n                product.barberPercentage !== undefined\n                    ? `${Number(product.barberPercentage)}%`\n                    : '-'}\n            </td>\n\n            {/* CATEGORIA */}\n            <td className=\"px-4 py-3\">{product.category || '‚Äî'}</td>\n\n            {/* ESTOQUE */}\n            <td className=\"px-4 py-3 whitespace-nowrap\">\n                {product.stockQuantity} un.\n            </td>\n\n            {/* PRAZO */}\n            <td className=\"px-4 py-3\">\n                <span className=\"text-content-primary\">{deadlineText}</span>\n                <span className=\"block text-[11px] text-content-secondary\">\n                    Retirada\n                </span>\n            </td>\n\n            {/* STATUS (padronizado) */}\n            <td className=\"px-4 py-3\">\n                <StatusBadge isActive={Boolean(product.isActive)} />\n            </td>\n\n            {/* A√á√ïES */}\n            <td className=\"px-4 py-3\">\n                <div className=\"flex items-center justify-end gap-3\">\n                    <ProductEditDialog product={product} />\n\n                    <Button\n                        variant={product.isActive ? 'destructive' : 'active'}\n                        size=\"sm\"\n                        type=\"button\"\n                        className=\"border-border-primary hover:bg-muted/40\"\n                        onClick={handleToggleActive}\n                        disabled={isPending}\n                        title={isPending ? 'Processando...' : undefined}\n                    >\n                        {isPending\n                            ? 'Aguarde...'\n                            : product.isActive\n                              ? 'Desativar'\n                              : 'Ativar'}\n                    </Button>\n                </div>\n            </td>\n        </tr>\n    );\n}\n","// src/components/product-edit-dialog/product-edit-dialog.tsx\n'use client';\n\nimport * as React from 'react';\nimport { useRouter } from 'next/navigation';\n\nimport {\n    Dialog,\n    DialogContent,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\n\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from '@/components/ui/select';\n\nimport { toast } from 'sonner';\nimport { cn } from '@/lib/utils';\n\nimport {\n    Building2,\n    Image as ImageIcon,\n    AlignLeft,\n    Wallet,\n    Scissors,\n    Boxes,\n    Tag as TagIcon,\n    Clock,\n    Cake,\n    BadgePercent,\n    Package,\n    Upload,\n    X,\n} from 'lucide-react';\n\ntype CustomerLevel = 'BRONZE' | 'PRATA' | 'OURO' | 'DIAMANTE';\n\nconst LEVEL_OPTIONS: Array<{ value: CustomerLevel; label: string }> = [\n    { value: 'BRONZE', label: 'Bronze' },\n    { value: 'PRATA', label: 'Prata' },\n    { value: 'OURO', label: 'Ouro' },\n    { value: 'DIAMANTE', label: 'Diamante' },\n];\n\nexport type ProductForRow = {\n    id: string;\n    name: string;\n    description: string | null;\n    imageUrl: string | null;\n\n    price: number;\n    barberPercentage: number | null;\n\n    stockQuantity: number;\n    category: string | null;\n    isActive: boolean;\n\n    unitId?: string | null;\n    unitName?: string | null;\n\n    pickupDeadlineDays?: number | null;\n\n    birthdayBenefitEnabled?: boolean;\n    birthdayPriceLevel?: CustomerLevel | null;\n\n    levelDiscounts?: Partial<Record<CustomerLevel, number>>;\n\n    isFeatured?: boolean;\n};\n\ntype UploadResponse =\n    | {\n          ok: true;\n          data: {\n              url: string;\n              key: string;\n              mime: string;\n              size: number;\n              originalName: string;\n              module?: 'PRODUCTS' | 'PROFESSIONALS';\n              category?: 'products' | 'professionals';\n          };\n      }\n    | { ok: false; error?: string };\n\nconst MAX_UPLOAD_MB = 5;\nconst MAX_UPLOAD_BYTES = MAX_UPLOAD_MB * 1024 * 1024;\n\nfunction toMoneyNumber(raw: string): number {\n    const s = String(raw ?? '')\n        .trim()\n        .replace(/\\s/g, '')\n        .replace(',', '.');\n    const n = Number(s);\n    return Number.isFinite(n) ? n : NaN;\n}\n\nfunction clampPct(raw: string): number | null {\n    const s = String(raw ?? '').trim();\n    if (!s) return null;\n    const n = Number(s.replace(',', '.'));\n    if (!Number.isFinite(n)) return null;\n    return Math.max(0, Math.min(100, Math.floor(n)));\n}\n\nfunction IconInput(\n    props: React.ComponentProps<typeof Input> & {\n        icon: React.ComponentType<React.SVGProps<SVGSVGElement>>;\n    }\n) {\n    const { icon: Icon, className, ...rest } = props;\n\n    return (\n        <div className=\"relative\">\n            <div className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2\">\n                <Icon className=\"h-4 w-4 text-content-brand\" />\n            </div>\n\n            <Input {...rest} className={cn('pl-10', className)} />\n        </div>\n    );\n}\n\nconst INPUT_BASE =\n    'bg-background-tertiary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0';\n\nconst INPUT_SECONDARY =\n    'bg-background-secondary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0';\n\nconst SELECT_TRIGGER =\n    'h-10 w-full justify-between text-left font-normal bg-background-tertiary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0 focus-visible:border-border-brand';\n\n// ‚úÖ Mant√©m o front alinhado com a valida√ß√£o do backend\nfunction normalizeUploadedImageUrl(raw: string): string {\n    const s = String(raw ?? '').trim();\n    if (!s) return '';\n\n    const lowered = s.toLowerCase();\n\n    // preview local do browser, nunca deve ir pro backend\n    if (lowered.startsWith('blob:')) return '';\n\n    // se vier \"uploads/...\" sem barra, normaliza\n    if (s.startsWith('uploads/')) return `/${s}`;\n\n    return s;\n}\n\nfunction isAcceptableImageUrlForApi(url: string): boolean {\n    const s = String(url ?? '').trim();\n    if (!s) return false;\n\n    const lowered = s.toLowerCase();\n    if (lowered.startsWith('javascript:')) return false;\n    if (lowered.startsWith('data:')) return false;\n    if (lowered.startsWith('blob:')) return false;\n\n    // ‚úÖ backend aceita /media/... (novo) e /uploads/... (legado)\n    if (s.startsWith('/media/')) return true;\n    if (s.startsWith('/uploads/')) return true;\n\n    // backend aceita URL absoluta\n    if (lowered.startsWith('http://') || lowered.startsWith('https://'))\n        return true;\n\n    return false;\n}\n\nexport function ProductEditDialog({ product }: { product: ProductForRow }) {\n    const router = useRouter();\n\n    const [open, setOpen] = React.useState(false);\n    const [isPending, startTransition] = React.useTransition();\n\n    const unitLabel = product.unitName || '‚Äî';\n\n    const [isFeatured, setIsFeatured] = React.useState<boolean>(\n        Boolean(product.isFeatured)\n    );\n\n    const [name, setName] = React.useState<string>(product.name ?? '');\n    const [imageUrl, setImageUrl] = React.useState<string>(\n        product.imageUrl ?? ''\n    );\n    const [description, setDescription] = React.useState<string>(\n        product.description ?? ''\n    );\n\n    const [price, setPrice] = React.useState<string>(\n        String(product.price ?? '')\n    );\n\n    const [barberPercentage, setBarberPercentage] = React.useState<string>(\n        () => {\n            const v = product.barberPercentage;\n            return v === null || v === undefined ? '' : String(v);\n        }\n    );\n\n    const [stockQuantity, setStockQuantity] = React.useState<string>(\n        String(product.stockQuantity ?? 0)\n    );\n    const [category, setCategory] = React.useState<string>(\n        product.category ?? ''\n    );\n\n    const [pickupDeadlineDays, setPickupDeadlineDays] = React.useState<string>(\n        () => {\n            const v = product.pickupDeadlineDays;\n            const n =\n                typeof v === 'number' && Number.isFinite(v) && v > 0 ? v : 2;\n            return String(n);\n        }\n    );\n\n    const [birthdayEnabled, setBirthdayEnabled] = React.useState<boolean>(\n        Boolean(product.birthdayBenefitEnabled)\n    );\n    const [birthdayLevel, setBirthdayLevel] = React.useState<CustomerLevel>(\n        () => {\n            return (product.birthdayPriceLevel as CustomerLevel) || 'DIAMANTE';\n        }\n    );\n\n    const [levelDiscounts, setLevelDiscounts] = React.useState<\n        Record<CustomerLevel, string>\n    >(() => ({\n        BRONZE:\n            product.levelDiscounts?.BRONZE && product.levelDiscounts.BRONZE > 0\n                ? String(product.levelDiscounts.BRONZE)\n                : '',\n        PRATA:\n            product.levelDiscounts?.PRATA && product.levelDiscounts.PRATA > 0\n                ? String(product.levelDiscounts.PRATA)\n                : '',\n        OURO:\n            product.levelDiscounts?.OURO && product.levelDiscounts.OURO > 0\n                ? String(product.levelDiscounts.OURO)\n                : '',\n        DIAMANTE:\n            product.levelDiscounts?.DIAMANTE &&\n            product.levelDiscounts.DIAMANTE > 0\n                ? String(product.levelDiscounts.DIAMANTE)\n                : '',\n    }));\n\n    // upload UI state (igual ao create)\n    const fileInputRef = React.useRef<HTMLInputElement | null>(null);\n    const [uploadingImage, setUploadingImage] = React.useState(false);\n\n    // ‚úÖ snapshot dos valores iniciais pra montar payload parcial (n√£o sobrescrever sem querer)\n    const initialRef = React.useRef<{\n        name: string;\n        imageUrl: string;\n        description: string;\n        category: string;\n        price: string;\n        barberPercentage: string;\n        stockQuantity: string;\n        pickupDeadlineDays: string;\n        isFeatured: boolean;\n        birthdayEnabled: boolean;\n        birthdayLevel: CustomerLevel;\n        levelDiscounts: Record<CustomerLevel, string>;\n    } | null>(null);\n\n    React.useEffect(() => {\n        if (!open) return;\n\n        const nextIsFeatured = Boolean(product.isFeatured);\n        const nextName = product.name ?? '';\n        const nextImageUrl = product.imageUrl ?? '';\n        const nextDescription = product.description ?? '';\n        const nextCategory = product.category ?? '';\n\n        const nextPrice = String(product.price ?? '');\n        const nextBarberPct = (() => {\n            const v = product.barberPercentage;\n            return v === null || v === undefined ? '' : String(v);\n        })();\n        const nextStock = String(product.stockQuantity ?? 0);\n\n        const nextDeadline = (() => {\n            const v = product.pickupDeadlineDays;\n            const n =\n                typeof v === 'number' && Number.isFinite(v) && v > 0 ? v : 2;\n            return String(n);\n        })();\n\n        const nextBirthdayEnabled = Boolean(product.birthdayBenefitEnabled);\n        const nextBirthdayLevel =\n            (product.birthdayPriceLevel as CustomerLevel) || 'DIAMANTE';\n\n        const nextLevelDiscounts: Record<CustomerLevel, string> = {\n            BRONZE:\n                product.levelDiscounts?.BRONZE &&\n                product.levelDiscounts.BRONZE > 0\n                    ? String(product.levelDiscounts.BRONZE)\n                    : '',\n            PRATA:\n                product.levelDiscounts?.PRATA &&\n                product.levelDiscounts.PRATA > 0\n                    ? String(product.levelDiscounts.PRATA)\n                    : '',\n            OURO:\n                product.levelDiscounts?.OURO && product.levelDiscounts.OURO > 0\n                    ? String(product.levelDiscounts.OURO)\n                    : '',\n            DIAMANTE:\n                product.levelDiscounts?.DIAMANTE &&\n                product.levelDiscounts.DIAMANTE > 0\n                    ? String(product.levelDiscounts.DIAMANTE)\n                    : '',\n        };\n\n        setIsFeatured(nextIsFeatured);\n        setName(nextName);\n        setImageUrl(nextImageUrl);\n        setDescription(nextDescription);\n\n        setPrice(nextPrice);\n        setBarberPercentage(nextBarberPct);\n\n        setStockQuantity(nextStock);\n        setCategory(nextCategory);\n\n        setPickupDeadlineDays(nextDeadline);\n\n        setBirthdayEnabled(nextBirthdayEnabled);\n        setBirthdayLevel(nextBirthdayLevel);\n\n        setLevelDiscounts(nextLevelDiscounts);\n\n        initialRef.current = {\n            name: nextName,\n            imageUrl: nextImageUrl,\n            description: nextDescription,\n            category: nextCategory,\n            price: nextPrice,\n            barberPercentage: nextBarberPct,\n            stockQuantity: nextStock,\n            pickupDeadlineDays: nextDeadline,\n            isFeatured: nextIsFeatured,\n            birthdayEnabled: nextBirthdayEnabled,\n            birthdayLevel: nextBirthdayLevel,\n            levelDiscounts: nextLevelDiscounts,\n        };\n\n        setUploadingImage(false);\n        if (fileInputRef.current) fileInputRef.current.value = '';\n    }, [open, product]);\n\n    async function uploadImage(file: File) {\n        if (!file.type?.startsWith('image/')) {\n            toast.error('Selecione um arquivo de imagem.');\n            return;\n        }\n        if (file.size > MAX_UPLOAD_BYTES) {\n            toast.error(`Imagem muito grande. M√°ximo: ${MAX_UPLOAD_MB}MB.`);\n            return;\n        }\n\n        setUploadingImage(true);\n        try {\n            const fd = new FormData();\n            fd.append('file', file);\n            fd.append('module', 'PRODUCTS');\n\n            const res = await fetch('/api/admin/uploads', {\n                method: 'POST',\n                body: fd,\n            });\n\n            const json = (await res\n                .json()\n                .catch(() => null)) as UploadResponse | null;\n\n            if (!res.ok || !json || json.ok !== true) {\n                const msg =\n                    (json && json.ok === false && json.error) ||\n                    'N√£o foi poss√≠vel fazer upload da imagem.';\n                toast.error(msg);\n                return;\n            }\n\n            const normalized = normalizeUploadedImageUrl(json.data.url);\n\n            // ‚úÖ evita salvar URL fora do padr√£o aceito no backend\n            if (!isAcceptableImageUrlForApi(normalized)) {\n                toast.error(\n                    'Upload retornou uma URL inv√°lida para o produto. O esperado √© /media/... (recomendado), /uploads/... (legado) ou http(s).'\n                );\n\n                return;\n            }\n\n            setImageUrl(normalized);\n            toast.success('Imagem enviada!');\n        } catch {\n            toast.error('Erro de rede ao fazer upload da imagem.');\n        } finally {\n            setUploadingImage(false);\n        }\n    }\n\n    const birthdayInvalid = birthdayEnabled && !birthdayLevel;\n\n    // ‚úÖ imagem n√£o √© obrigat√≥ria (pode remover)\n    const requiredInvalid =\n        !name.trim() ||\n        !description.trim() ||\n        !category.trim() ||\n        !price.trim() ||\n        !barberPercentage.trim() ||\n        !stockQuantity.trim() ||\n        !pickupDeadlineDays.trim();\n\n    const formInvalid = birthdayInvalid || requiredInvalid || uploadingImage;\n\n    function buildPayloadPartial() {\n        const init = initialRef.current;\n\n        const priceN = toMoneyNumber(price);\n        const barberPct = Number(String(barberPercentage).replace(',', '.'));\n        const stockN = Number(String(stockQuantity).replace(',', '.'));\n        const deadlineN = Number(String(pickupDeadlineDays).replace(',', '.'));\n\n        const discounts: Partial<Record<CustomerLevel, number>> = {};\n        (Object.keys(levelDiscounts) as CustomerLevel[]).forEach((lvl) => {\n            const pct = clampPct(levelDiscounts[lvl]);\n            if (pct !== null) discounts[lvl] = pct;\n        });\n\n        // sempre enviar os campos base que a API valida (nome, descri√ß√£o, etc.)\n        // mas agora podemos evitar sobrescrever imageUrl sem altera√ß√£o\n        const payload: any = {\n            name: name.trim(),\n            description: description.trim(),\n            category: category.trim(),\n            price: priceN,\n            barberPercentage: barberPct,\n            stockQuantity: stockN,\n            pickupDeadlineDays: deadlineN,\n            isFeatured,\n            birthdayBenefitEnabled: birthdayEnabled,\n            birthdayPriceLevel: birthdayEnabled ? birthdayLevel : null,\n            levelDiscounts: discounts,\n        };\n\n        // ‚úÖ s√≥ manda imageUrl se mudou (inclui remo√ß√£o '')\n        if (\n            init &&\n            String(imageUrl ?? '').trim() !== String(init.imageUrl ?? '').trim()\n        ) {\n            payload.imageUrl = String(imageUrl ?? '').trim(); // pode ser ''\n        }\n\n        return payload;\n    }\n\n    async function handleSave() {\n        if (formInvalid) {\n            toast.error('Preencha os campos obrigat√≥rios antes de salvar.');\n            return;\n        }\n\n        const payload = buildPayloadPartial();\n\n        if (!Number.isFinite(payload.price) || payload.price <= 0) {\n            toast.error('Pre√ßo inv√°lido.');\n            return;\n        }\n        if (\n            !Number.isFinite(payload.barberPercentage) ||\n            payload.barberPercentage < 0 ||\n            payload.barberPercentage > 100\n        ) {\n            toast.error('Porcentagem do barbeiro inv√°lida (0 a 100).');\n            return;\n        }\n        if (\n            !Number.isFinite(payload.stockQuantity) ||\n            payload.stockQuantity < 0\n        ) {\n            toast.error('Estoque inv√°lido.');\n            return;\n        }\n        if (\n            !Number.isFinite(payload.pickupDeadlineDays) ||\n            payload.pickupDeadlineDays < 1 ||\n            payload.pickupDeadlineDays > 30\n        ) {\n            toast.error('Prazo para retirada inv√°lido (1 a 30).');\n            return;\n        }\n\n        startTransition(async () => {\n            try {\n                const res = await fetch(`/api/admin/products/${product.id}`, {\n                    method: 'PATCH',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ update: payload }),\n                });\n\n                const json = (await res.json().catch(() => null)) as\n                    | { ok: true; data?: any }\n                    | { ok: false; error?: string }\n                    | null;\n\n                if (!res.ok || !json || (json as any).ok !== true) {\n                    const msg =\n                        (json as any)?.error ||\n                        'N√£o foi poss√≠vel salvar o produto. Tente novamente.';\n                    toast.error(msg);\n                    return;\n                }\n\n                toast.success('Produto atualizado!');\n                setOpen(false);\n                router.refresh();\n            } catch {\n                toast.error('Erro de rede ao salvar produto.');\n            }\n        });\n    }\n\n    const previewUrl = imageUrl.trim() ? imageUrl.trim() : null;\n\n    return (\n        <Dialog\n            open={open}\n            onOpenChange={(v) => !isPending && !uploadingImage && setOpen(v)}\n        >\n            <DialogTrigger asChild>\n                <Button\n                    variant=\"edit2\"\n                    size=\"sm\"\n                    className=\"border-border-primary hover:bg-muted/40\"\n                >\n                    Editar\n                </Button>\n            </DialogTrigger>\n\n            <DialogContent className=\"bg-background-secondary border border-border-primary max-h-[80vh] overflow-y-auto\">\n                <DialogHeader>\n                    <DialogTitle className=\"text-title text-content-primary\">\n                        Editar produto\n                    </DialogTitle>\n                </DialogHeader>\n\n                <div className=\"space-y-4 pb-2\">\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Unidade do estoque\n                        </label>\n\n                        <IconInput\n                            icon={Building2}\n                            value={unitLabel}\n                            disabled\n                            className={cn(INPUT_BASE)}\n                        />\n                    </div>\n\n                    <div className=\"space-y-2 rounded-xl border border-border-primary bg-background-tertiary p-3\">\n                        <div className=\"flex items-start justify-between gap-4\">\n                            <div>\n                                <p className=\"text-sm font-medium text-content-primary\">\n                                    ‚≠ê Destaque no app\n                                </p>\n                                <p className=\"text-xs text-content-secondary\">\n                                    Quando ativo, este produto aparece no\n                                    carrossel de Destaques no app.\n                                </p>\n                            </div>\n\n                            <label className=\"inline-flex items-center gap-2 text-xs text-content-secondary\">\n                                <input\n                                    type=\"checkbox\"\n                                    checked={isFeatured}\n                                    disabled={isPending}\n                                    onChange={(e) =>\n                                        setIsFeatured(e.target.checked)\n                                    }\n                                    className=\"h-4 w-4 accent-current\"\n                                />\n                                Ativar\n                            </label>\n                        </div>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Nome do produto{' '}\n                            <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={Package}\n                            value={name}\n                            onChange={(e) => setName(e.target.value)}\n                            disabled={isPending}\n                            className={INPUT_BASE}\n                        />\n                    </div>\n\n                    {/* IMAGEM (UPLOAD) */}\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Foto do produto{' '}\n                            <span className=\"text-content-secondary/70\">\n                                (opcional)\n                            </span>\n                        </label>\n\n                        <input\n                            ref={fileInputRef}\n                            type=\"file\"\n                            accept=\"image/*\"\n                            className=\"hidden\"\n                            disabled={isPending || uploadingImage}\n                            onChange={(e) => {\n                                const f = e.currentTarget.files?.[0];\n                                if (!f) return;\n                                void uploadImage(f);\n                            }}\n                        />\n\n                        <div className=\"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start\">\n                            <div className=\"space-y-2\">\n                                <div className=\"relative\">\n                                    <div className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2\">\n                                        <ImageIcon className=\"h-4 w-4 text-content-brand\" />\n                                    </div>\n\n                                    <Input\n                                        value={previewUrl ?? ''}\n                                        readOnly\n                                        placeholder=\"Clique em Upload para escolher uma imagem.\"\n                                        className={cn(\n                                            'pl-10 pr-10',\n                                            INPUT_BASE\n                                        )}\n                                    />\n\n                                    {previewUrl ? (\n                                        <button\n                                            type=\"button\"\n                                            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-content-secondary hover:text-content-primary\"\n                                            onClick={() => {\n                                                setImageUrl('');\n                                                if (fileInputRef.current)\n                                                    fileInputRef.current.value =\n                                                        '';\n                                            }}\n                                            disabled={\n                                                isPending || uploadingImage\n                                            }\n                                            title=\"Remover imagem\"\n                                        >\n                                            <X className=\"h-4 w-4\" />\n                                        </button>\n                                    ) : null}\n                                </div>\n                            </div>\n\n                            <Button\n                                type=\"button\"\n                                variant=\"brand\"\n                                className=\"h-10\"\n                                onClick={() => fileInputRef.current?.click()}\n                                disabled={isPending || uploadingImage}\n                                title={\n                                    uploadingImage ? 'Enviando...' : undefined\n                                }\n                            >\n                                <span className=\"inline-flex items-center gap-2\">\n                                    <Upload className=\"h-4 w-4\" />\n                                    {uploadingImage ? 'Enviando...' : 'Upload'}\n                                </span>\n                            </Button>\n                        </div>\n\n                        {previewUrl ? (\n                            <div className=\"overflow-hidden rounded-xl border border-border-primary bg-background-tertiary\">\n                                {/* eslint-disable-next-line @next/next/no-img-element */}\n                                <img\n                                    src={previewUrl}\n                                    alt=\"Preview do produto\"\n                                    className=\"h-40 w-full object-cover\"\n                                />\n                            </div>\n                        ) : null}\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Descri√ß√£o <span className=\"text-red-500\">*</span>\n                        </label>\n\n                        <div className=\"relative\">\n                            <div className=\"pointer-events-none absolute left-3 top-3\">\n                                <AlignLeft className=\"h-4 w-4 text-content-brand\" />\n                            </div>\n                            <Textarea\n                                value={description}\n                                onChange={(e) => setDescription(e.target.value)}\n                                disabled={isPending}\n                                rows={3}\n                                className={cn('pl-10', INPUT_BASE)}\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Valor (R$) <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={Wallet}\n                            value={price}\n                            onChange={(e) => setPrice(e.target.value)}\n                            disabled={isPending}\n                            placeholder=\"Ex: 79.90\"\n                            className={INPUT_BASE}\n                        />\n                        <p className=\"text-[11px] text-content-secondary/70\">\n                            Pre√ßo base. Os descontos por n√≠vel s√£o opcionais.\n                        </p>\n                    </div>\n\n                    <div className=\"space-y-2 rounded-xl border border-border-primary bg-background-tertiary p-3\">\n                        <div className=\"flex items-center justify-between gap-3\">\n                            <div>\n                                <p className=\"text-sm font-medium text-content-primary\">\n                                    Desconto por n√≠vel (%)\n                                </p>\n                                <p className=\"text-xs text-content-secondary\">\n                                    Deixe vazio para n√£o definir.\n                                </p>\n                            </div>\n\n                            <div className=\"text-xs text-content-secondary\">\n                                Base:{' '}\n                                <span className=\"text-content-primary\">\n                                    R$ {price || '‚Äî'}\n                                </span>\n                            </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-2 gap-3 sm:grid-cols-4\">\n                            {LEVEL_OPTIONS.map((opt) => (\n                                <div key={opt.value} className=\"space-y-1\">\n                                    <label className=\"text-xs text-content-secondary\">\n                                        {opt.label}\n                                    </label>\n\n                                    <IconInput\n                                        icon={BadgePercent}\n                                        value={levelDiscounts[opt.value]}\n                                        onChange={(e) =>\n                                            setLevelDiscounts((prev) => ({\n                                                ...prev,\n                                                [opt.value]: e.target.value,\n                                            }))\n                                        }\n                                        disabled={isPending}\n                                        inputMode=\"numeric\"\n                                        placeholder=\"Ex: 10\"\n                                        className={INPUT_SECONDARY}\n                                    />\n                                </div>\n                            ))}\n                        </div>\n\n                        <p className=\"text-[11px] text-content-secondary/70\">\n                            O servidor normaliza para 0‚Äì100 e ignora campos\n                            vazios.\n                        </p>\n                    </div>\n\n                    <div className=\"space-y-2 rounded-xl border border-border-primary bg-background-tertiary p-3\">\n                        <div className=\"flex items-start justify-between gap-4\">\n                            <div>\n                                <p className=\"text-sm font-medium text-content-primary\">\n                                    Benef√≠cio de anivers√°rio\n                                </p>\n                                <p className=\"text-xs text-content-secondary\">\n                                    Ativo por 3 dias antes, no dia, e 3 dias\n                                    depois. Voc√™ escolhe qual n√≠vel aplicar.\n                                </p>\n                            </div>\n\n                            <label className=\"inline-flex items-center gap-2 text-xs text-content-secondary\">\n                                <input\n                                    type=\"checkbox\"\n                                    checked={birthdayEnabled}\n                                    disabled={isPending}\n                                    onChange={(e) =>\n                                        setBirthdayEnabled(e.target.checked)\n                                    }\n                                    className=\"h-4 w-4 accent-current\"\n                                />\n                                Ativar\n                            </label>\n                        </div>\n\n                        {birthdayEnabled ? (\n                            <div className=\"space-y-2\">\n                                <label className=\"text-xs text-content-secondary\">\n                                    Aplicar desconto como{' '}\n                                    <span className=\"text-red-500\">*</span>\n                                </label>\n\n                                <Select\n                                    value={birthdayLevel}\n                                    onValueChange={(v) =>\n                                        setBirthdayLevel(v as CustomerLevel)\n                                    }\n                                    disabled={isPending}\n                                >\n                                    <SelectTrigger\n                                        className={cn(\n                                            'h-10 w-full justify-between text-left font-normal bg-background-secondary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0'\n                                        )}\n                                    >\n                                        <div className=\"flex items-center gap-2\">\n                                            <Cake className=\"h-4 w-4 text-content-brand\" />\n                                            <SelectValue placeholder=\"Selecione o n√≠vel\" />\n                                        </div>\n                                    </SelectTrigger>\n\n                                    <SelectContent>\n                                        {LEVEL_OPTIONS.map((opt) => (\n                                            <SelectItem\n                                                key={opt.value}\n                                                value={opt.value}\n                                            >\n                                                {opt.label}\n                                            </SelectItem>\n                                        ))}\n                                    </SelectContent>\n                                </Select>\n\n                                {birthdayInvalid ? (\n                                    <p className=\"text-xs text-red-500\">\n                                        Se o benef√≠cio est√° ativo, selecione o\n                                        n√≠vel.\n                                    </p>\n                                ) : (\n                                    <p className=\"text-[11px] text-content-secondary/70\">\n                                        Ex.: ‚ÄúDiamante‚Äù aplica o desconto\n                                        Diamante durante a janela do\n                                        anivers√°rio.\n                                    </p>\n                                )}\n                            </div>\n                        ) : null}\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Porcentagem do barbeiro (%){' '}\n                            <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={Scissors}\n                            value={barberPercentage}\n                            onChange={(e) =>\n                                setBarberPercentage(e.target.value)\n                            }\n                            disabled={isPending}\n                            type=\"number\"\n                            min={0}\n                            max={100}\n                            placeholder=\"Ex: 20\"\n                            className={INPUT_BASE}\n                        />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Estoque <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={Boxes}\n                            value={stockQuantity}\n                            onChange={(e) => setStockQuantity(e.target.value)}\n                            disabled={isPending}\n                            type=\"number\"\n                            min={0}\n                            placeholder=\"Ex: 10\"\n                            className={INPUT_BASE}\n                        />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Categoria / Finalidade{' '}\n                            <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={TagIcon}\n                            value={category}\n                            onChange={(e) => setCategory(e.target.value)}\n                            disabled={isPending}\n                            placeholder=\"Ex: Barba, Cabelo, Hidrata√ß√£o...\"\n                            className={INPUT_BASE}\n                        />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Prazo para retirada (dias){' '}\n                            <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={Clock}\n                            value={pickupDeadlineDays}\n                            onChange={(e) =>\n                                setPickupDeadlineDays(e.target.value)\n                            }\n                            disabled={isPending}\n                            type=\"number\"\n                            min={1}\n                            max={30}\n                            className={INPUT_BASE}\n                        />\n                        <p className=\"text-xs text-content-secondary\">\n                            Ap√≥s esse prazo, a reserva pode expirar e o produto\n                            volta ao estoque.\n                        </p>\n                    </div>\n\n                    <div className=\"flex justify-end gap-2 pt-2\">\n                        <Button\n                            type=\"button\"\n                            variant=\"brand\"\n                            disabled={isPending || formInvalid}\n                            onClick={handleSave}\n                            title={\n                                uploadingImage\n                                    ? 'Aguarde o upload da imagem'\n                                    : birthdayInvalid\n                                      ? 'Selecione o n√≠vel do benef√≠cio de anivers√°rio'\n                                      : requiredInvalid\n                                        ? 'Preencha os campos obrigat√≥rios'\n                                        : undefined\n                            }\n                        >\n                            {isPending ? 'Salvando...' : 'Salvar altera√ß√µes'}\n                        </Button>\n                    </div>\n                </div>\n            </DialogContent>\n        </Dialog>\n    );\n}\n","// src/components/admin/products/product-new-dialog/product-new-dialog.tsx\n'use client';\n\nimport * as React from 'react';\nimport { useRouter } from 'next/navigation';\n\nimport {\n    Dialog,\n    DialogContent,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\n\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue,\n} from '@/components/ui/select';\n\nimport { toast } from 'sonner';\nimport { cn } from '@/lib/utils';\n\nimport {\n    Building2,\n    Package,\n    Image as ImageIcon,\n    AlignLeft,\n    Wallet,\n    Scissors,\n    Boxes,\n    Tag as TagIcon,\n    Clock,\n    Cake,\n    BadgePercent,\n    Upload,\n    X,\n} from 'lucide-react';\n\ntype UnitOption = {\n    id: string;\n    name: string;\n    isActive: boolean;\n};\n\ntype CustomerLevel = 'BRONZE' | 'PRATA' | 'OURO' | 'DIAMANTE';\n\nconst LEVEL_OPTIONS: Array<{ value: CustomerLevel; label: string }> = [\n    { value: 'BRONZE', label: 'Bronze' },\n    { value: 'PRATA', label: 'Prata' },\n    { value: 'OURO', label: 'Ouro' },\n    { value: 'DIAMANTE', label: 'Diamante' },\n];\n\ntype UploadResponse =\n    | {\n          ok: true;\n          data: {\n              url: string;\n              key: string;\n              mime: string;\n              size: number;\n              originalName: string;\n              module?: 'PRODUCTS' | 'PROFESSIONALS';\n              category?: 'products' | 'professionals';\n          };\n      }\n    | { ok: false; error?: string };\n\nconst MAX_UPLOAD_MB = 5;\nconst MAX_UPLOAD_BYTES = MAX_UPLOAD_MB * 1024 * 1024;\n\nfunction toMoneyNumber(raw: string): number {\n    const s = String(raw ?? '')\n        .trim()\n        .replace(/\\s/g, '')\n        .replace(',', '.');\n    const n = Number(s);\n    return Number.isFinite(n) ? n : NaN;\n}\n\nfunction clampPct(raw: string): number | null {\n    const s = String(raw ?? '').trim();\n    if (!s) return null;\n    const n = Number(s.replace(',', '.'));\n    if (!Number.isFinite(n)) return null;\n    return Math.max(0, Math.min(100, Math.floor(n)));\n}\n\nfunction normalizeProductImageUrl(raw: unknown): string {\n    const s = String(raw ?? '').trim();\n    if (!s) return '';\n\n    const lowered = s.toLowerCase();\n\n    // preview local do browser, nunca deve ir pro backend\n    if (lowered.startsWith('blob:')) return '';\n\n    // se vier sem a barra inicial, normaliza\n    if (s.startsWith('media/')) return `/${s}`;\n    if (s.startsWith('uploads/')) return `/${s}`;\n\n    return s;\n}\n\nfunction isValidProductImageUrl(raw: unknown): boolean {\n    const s0 = String(raw ?? '').trim();\n    if (!s0) return false;\n\n    const s = normalizeProductImageUrl(s0);\n    if (!s) return false;\n\n    const lowered = s.toLowerCase();\n\n    // bloqueios √≥bvios\n    if (lowered.startsWith('javascript:')) return false;\n    if (lowered.startsWith('data:')) return false;\n    if (lowered.startsWith('blob:')) return false;\n\n    // ‚úÖ nosso upload atual\n    if (s.startsWith('/media/')) return true;\n\n    // legado\n    if (s.startsWith('/uploads/')) return true;\n\n    // URL absoluta\n    if (lowered.startsWith('http://') || lowered.startsWith('https://'))\n        return true;\n\n    return false;\n}\n\nfunction IconInput(\n    props: React.ComponentProps<typeof Input> & {\n        icon: React.ComponentType<React.SVGProps<SVGSVGElement>>;\n    }\n) {\n    const { icon: Icon, className, ...rest } = props;\n\n    return (\n        <div className=\"relative\">\n            <div className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2\">\n                <Icon className=\"h-4 w-4 text-content-brand\" />\n            </div>\n\n            <Input {...rest} className={cn('pl-10', className)} />\n        </div>\n    );\n}\n\nconst INPUT_BASE =\n    'bg-background-tertiary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0';\n\nconst INPUT_SECONDARY =\n    'bg-background-secondary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0';\n\nconst SELECT_TRIGGER =\n    'h-10 w-full justify-between text-left font-normal bg-background-tertiary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0 focus-visible:border-border-brand';\n\nexport function ProductNewDialog({\n    units = [],\n}: {\n    units?: UnitOption[];\n    defaultUnitId?: string | null; // compat\n    canSeeAllUnits?: boolean; // compat\n}) {\n    const router = useRouter();\n    const hasUnits = units.length > 0;\n\n    const firstActiveUnitId = React.useMemo(() => {\n        return units.find((u) => u.isActive)?.id ?? '';\n    }, [units]);\n\n    const [open, setOpen] = React.useState(false);\n    const [isPending, startTransition] = React.useTransition();\n\n    const [selectedUnitId, setSelectedUnitId] =\n        React.useState<string>(firstActiveUnitId);\n\n    const [isFeatured, setIsFeatured] = React.useState(false);\n\n    const [name, setName] = React.useState('');\n    const [imageUrl, setImageUrl] = React.useState(''); // preenchido pelo upload (opcional)\n    const [description, setDescription] = React.useState('');\n\n    const [price, setPrice] = React.useState('');\n    const [barberPercentage, setBarberPercentage] = React.useState('');\n    const [stockQuantity, setStockQuantity] = React.useState('');\n    const [category, setCategory] = React.useState('');\n    const [pickupDeadlineDays, setPickupDeadlineDays] = React.useState('2');\n\n    const [birthdayEnabled, setBirthdayEnabled] = React.useState(false);\n    const [birthdayLevel, setBirthdayLevel] =\n        React.useState<CustomerLevel>('DIAMANTE');\n\n    const [levelDiscounts, setLevelDiscounts] = React.useState<\n        Record<CustomerLevel, string>\n    >({\n        BRONZE: '',\n        PRATA: '',\n        OURO: '',\n        DIAMANTE: '',\n    });\n\n    // upload UI state\n    const fileInputRef = React.useRef<HTMLInputElement | null>(null);\n    const [uploadingImage, setUploadingImage] = React.useState(false);\n\n    React.useEffect(() => {\n        if (!open) return;\n        setSelectedUnitId((prev) => prev || firstActiveUnitId);\n    }, [open, firstActiveUnitId]);\n\n    function resetForm() {\n        setSelectedUnitId(firstActiveUnitId);\n        setIsFeatured(false);\n\n        setName('');\n        setImageUrl('');\n        setDescription('');\n\n        setPrice('');\n        setBarberPercentage('');\n        setStockQuantity('');\n        setCategory('');\n        setPickupDeadlineDays('2');\n\n        setBirthdayEnabled(false);\n        setBirthdayLevel('DIAMANTE');\n\n        setLevelDiscounts({ BRONZE: '', PRATA: '', OURO: '', DIAMANTE: '' });\n        setUploadingImage(false);\n\n        if (fileInputRef.current) fileInputRef.current.value = '';\n    }\n\n    const unitInvalid = !hasUnits || !selectedUnitId;\n    const birthdayInvalid = birthdayEnabled && !birthdayLevel;\n\n    // ‚úÖ imagem N√ÉO √© obrigat√≥ria aqui (backend tamb√©m n√£o exige mais)\n    const requiredInvalid =\n        !name.trim() ||\n        !description.trim() ||\n        !category.trim() ||\n        !price.trim() ||\n        !barberPercentage.trim() ||\n        !stockQuantity.trim() ||\n        !pickupDeadlineDays.trim();\n\n    const formInvalid =\n        unitInvalid || birthdayInvalid || requiredInvalid || uploadingImage;\n\n    async function uploadImage(file: File) {\n        // valida√ß√µes client-side (UX + evita bater no limite do server)\n        if (!file.type?.startsWith('image/')) {\n            toast.error('Selecione um arquivo de imagem.');\n            return;\n        }\n        if (file.size > MAX_UPLOAD_BYTES) {\n            toast.error(`Imagem muito grande. M√°ximo: ${MAX_UPLOAD_MB}MB.`);\n            return;\n        }\n\n        setUploadingImage(true);\n        try {\n            const fd = new FormData();\n            fd.append('file', file);\n            fd.append('module', 'PRODUCTS');\n\n            const res = await fetch('/api/admin/uploads', {\n                method: 'POST',\n                body: fd,\n            });\n\n            const json = (await res\n                .json()\n                .catch(() => null)) as UploadResponse | null;\n\n            if (!res.ok || !json || json.ok !== true) {\n                const msg =\n                    (json && json.ok === false && json.error) ||\n                    'N√£o foi poss√≠vel fazer upload da imagem.';\n                toast.error(msg);\n                return;\n            }\n\n            const url = normalizeProductImageUrl(json.data.url);\n\n            // ‚úÖ AQUI estava o problema: agora aceita /media/ tamb√©m\n            if (!isValidProductImageUrl(url)) {\n                toast.error(\n                    'Upload retornou uma URL inv√°lida para o produto. O esperado √© /media/... (recomendado), /uploads/... (legado) ou http(s).'\n                );\n                return;\n            }\n\n            setImageUrl(url);\n            toast.success('Imagem enviada!');\n        } catch {\n            toast.error('Erro de rede ao fazer upload da imagem.');\n        } finally {\n            setUploadingImage(false);\n        }\n    }\n\n    function buildPayload() {\n        const priceN = toMoneyNumber(price);\n        const barberPct = Number(String(barberPercentage).replace(',', '.'));\n        const stockN = Number(String(stockQuantity).replace(',', '.'));\n        const deadlineN = Number(String(pickupDeadlineDays).replace(',', '.'));\n\n        const discounts: Partial<Record<CustomerLevel, number>> = {};\n        (Object.keys(levelDiscounts) as CustomerLevel[]).forEach((lvl) => {\n            const pct = clampPct(levelDiscounts[lvl]);\n            if (pct !== null) discounts[lvl] = pct;\n        });\n\n        const payload: any = {\n            unitId: selectedUnitId,\n            name: name.trim(),\n            description: description.trim(),\n            category: category.trim(),\n\n            price: priceN,\n            barberPercentage: barberPct,\n\n            stockQuantity: stockN,\n            pickupDeadlineDays: deadlineN,\n\n            isActive: true,\n            isFeatured,\n\n            birthdayBenefitEnabled: birthdayEnabled,\n            birthdayPriceLevel: birthdayEnabled ? birthdayLevel : null,\n\n            levelDiscounts: discounts,\n        };\n\n        // ‚úÖ s√≥ manda imageUrl se existir\n        const img = imageUrl.trim();\n        if (img) payload.imageUrl = img;\n\n        return payload;\n    }\n\n    async function handleCreate() {\n        if (formInvalid) {\n            toast.error('Preencha os campos obrigat√≥rios antes de criar.');\n            return;\n        }\n\n        const payload = buildPayload();\n\n        if (!Number.isFinite(payload.price) || payload.price <= 0) {\n            toast.error('Pre√ßo inv√°lido.');\n            return;\n        }\n        if (\n            !Number.isFinite(payload.barberPercentage) ||\n            payload.barberPercentage < 0 ||\n            payload.barberPercentage > 100\n        ) {\n            toast.error('Porcentagem do barbeiro inv√°lida (0 a 100).');\n            return;\n        }\n        if (\n            !Number.isFinite(payload.stockQuantity) ||\n            payload.stockQuantity < 0\n        ) {\n            toast.error('Estoque inv√°lido.');\n            return;\n        }\n        if (\n            !Number.isFinite(payload.pickupDeadlineDays) ||\n            payload.pickupDeadlineDays < 1 ||\n            payload.pickupDeadlineDays > 30\n        ) {\n            toast.error('Prazo para retirada inv√°lido (1 a 30).');\n            return;\n        }\n\n        startTransition(async () => {\n            try {\n                const res = await fetch('/api/admin/products', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify(payload),\n                });\n\n                const json = (await res.json().catch(() => null)) as\n                    | { ok: true; data?: any }\n                    | { ok: false; error?: string }\n                    | null;\n\n                if (!res.ok || !json || (json as any).ok !== true) {\n                    const msg =\n                        (json as any)?.error ||\n                        'N√£o foi poss√≠vel criar o produto. Tente novamente.';\n                    toast.error(msg);\n                    return;\n                }\n\n                toast.success('Produto criado com sucesso!');\n                setOpen(false);\n                resetForm();\n                router.refresh();\n            } catch {\n                toast.error('Erro de rede ao criar produto.');\n            }\n        });\n    }\n\n    const previewUrl = imageUrl.trim() ? imageUrl.trim() : null;\n\n    return (\n        <Dialog\n            open={open}\n            onOpenChange={(v) => !isPending && !uploadingImage && setOpen(v)}\n        >\n            <DialogTrigger asChild>\n                <Button variant=\"brand\">Novo produto</Button>\n            </DialogTrigger>\n\n            <DialogContent className=\"bg-background-secondary border border-border-primary max-h-[80vh] overflow-y-auto\">\n                <DialogHeader>\n                    <DialogTitle className=\"text-title text-content-primary\">\n                        Novo produto\n                    </DialogTitle>\n                </DialogHeader>\n\n                <div className=\"space-y-4 pb-2\">\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Unidade do estoque{' '}\n                            <span className=\"text-red-500\">*</span>\n                        </label>\n\n                        <Select\n                            value={selectedUnitId}\n                            onValueChange={(v) => setSelectedUnitId(v)}\n                            disabled={!hasUnits || isPending}\n                        >\n                            <SelectTrigger className={SELECT_TRIGGER}>\n                                <div className=\"flex items-center gap-2\">\n                                    <Building2 className=\"h-4 w-4 text-content-brand\" />\n                                    <SelectValue\n                                        placeholder={\n                                            hasUnits\n                                                ? 'Selecione a unidade'\n                                                : 'Nenhuma unidade cadastrada'\n                                        }\n                                    />\n                                </div>\n                            </SelectTrigger>\n                            <SelectContent>\n                                {units.map((u) => (\n                                    <SelectItem\n                                        key={u.id}\n                                        value={u.id}\n                                        disabled={!u.isActive}\n                                    >\n                                        {u.name}{' '}\n                                        {!u.isActive ? '(inativa)' : ''}\n                                    </SelectItem>\n                                ))}\n                            </SelectContent>\n                        </Select>\n                    </div>\n\n                    <div className=\"space-y-2 rounded-xl border border-border-primary bg-background-tertiary p-3\">\n                        <div className=\"flex items-start justify-between gap-4\">\n                            <div>\n                                <p className=\"text-sm font-medium text-content-primary\">\n                                    ‚≠ê Destaque no app\n                                </p>\n                                <p className=\"text-xs text-content-secondary\">\n                                    Quando ativo, este produto aparece no\n                                    carrossel de Destaques no app.\n                                </p>\n                            </div>\n\n                            <label className=\"inline-flex items-center gap-2 text-xs text-content-secondary\">\n                                <input\n                                    type=\"checkbox\"\n                                    checked={isFeatured}\n                                    disabled={isPending}\n                                    onChange={(e) =>\n                                        setIsFeatured(e.target.checked)\n                                    }\n                                    className=\"h-4 w-4 accent-current\"\n                                />\n                                Ativar\n                            </label>\n                        </div>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Nome do produto{' '}\n                            <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={Package}\n                            value={name}\n                            onChange={(e) => setName(e.target.value)}\n                            disabled={isPending}\n                            className={INPUT_BASE}\n                        />\n                    </div>\n\n                    {/* IMAGEM (UPLOAD) */}\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Foto do produto{' '}\n                            <span className=\"text-content-secondary/70\">\n                                (opcional)\n                            </span>\n                        </label>\n\n                        <input\n                            ref={fileInputRef}\n                            type=\"file\"\n                            accept=\"image/*\"\n                            className=\"hidden\"\n                            disabled={isPending || uploadingImage}\n                            onChange={(e) => {\n                                const f = e.currentTarget.files?.[0];\n                                if (!f) return;\n                                void uploadImage(f);\n                            }}\n                        />\n\n                        <div className=\"grid gap-3 sm:grid-cols-[1fr_auto] sm:items-start\">\n                            <div className=\"space-y-2\">\n                                <div className=\"relative\">\n                                    <div className=\"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2\">\n                                        <ImageIcon className=\"h-4 w-4 text-content-brand\" />\n                                    </div>\n\n                                    <Input\n                                        value={previewUrl ?? ''}\n                                        readOnly\n                                        placeholder=\"Clique em Upload para escolher uma imagem.\"\n                                        className={cn(\n                                            'pl-10 pr-10',\n                                            INPUT_BASE\n                                        )}\n                                    />\n\n                                    {previewUrl ? (\n                                        <button\n                                            type=\"button\"\n                                            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-content-secondary hover:text-content-primary\"\n                                            onClick={() => {\n                                                setImageUrl('');\n                                                if (fileInputRef.current)\n                                                    fileInputRef.current.value =\n                                                        '';\n                                            }}\n                                            disabled={\n                                                isPending || uploadingImage\n                                            }\n                                            title=\"Remover imagem\"\n                                        >\n                                            <X className=\"h-4 w-4\" />\n                                        </button>\n                                    ) : null}\n                                </div>\n                            </div>\n\n                            <Button\n                                type=\"button\"\n                                variant=\"brand\"\n                                className=\"h-10\"\n                                onClick={() => fileInputRef.current?.click()}\n                                disabled={isPending || uploadingImage}\n                                title={\n                                    uploadingImage ? 'Enviando...' : undefined\n                                }\n                            >\n                                <span className=\"inline-flex items-center gap-2\">\n                                    <Upload className=\"h-4 w-4\" />\n                                    {uploadingImage ? 'Enviando...' : 'Upload'}\n                                </span>\n                            </Button>\n                        </div>\n\n                        {previewUrl ? (\n                            <div className=\"overflow-hidden rounded-xl border border-border-primary bg-background-tertiary\">\n                                {/* eslint-disable-next-line @next/next/no-img-element */}\n                                <img\n                                    src={previewUrl}\n                                    alt=\"Preview do produto\"\n                                    className=\"h-40 w-full object-cover\"\n                                />\n                            </div>\n                        ) : null}\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Descri√ß√£o <span className=\"text-red-500\">*</span>\n                        </label>\n                        <div className=\"relative\">\n                            <div className=\"pointer-events-none absolute left-3 top-3\">\n                                <AlignLeft className=\"h-4 w-4 text-content-brand\" />\n                            </div>\n                            <Textarea\n                                value={description}\n                                onChange={(e) => setDescription(e.target.value)}\n                                disabled={isPending}\n                                rows={3}\n                                className={cn('pl-10', INPUT_BASE)}\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Valor (R$) <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={Wallet}\n                            value={price}\n                            onChange={(e) => setPrice(e.target.value)}\n                            disabled={isPending}\n                            placeholder=\"Ex: 79.90\"\n                            className={INPUT_BASE}\n                        />\n                        <p className=\"text-[11px] text-content-secondary/70\">\n                            Pre√ßo base. Os descontos por n√≠vel s√£o opcionais.\n                        </p>\n                    </div>\n\n                    <div className=\"space-y-2 rounded-xl border border-border-primary bg-background-tertiary p-3\">\n                        <div className=\"flex items-center justify-between gap-3\">\n                            <div>\n                                <p className=\"text-sm font-medium text-content-primary\">\n                                    Desconto por n√≠vel (%)\n                                </p>\n                                <p className=\"text-xs text-content-secondary\">\n                                    Deixe vazio para n√£o definir.\n                                </p>\n                            </div>\n\n                            <div className=\"text-xs text-content-secondary\">\n                                Base:{' '}\n                                <span className=\"text-content-primary\">\n                                    R$ {price || '‚Äî'}\n                                </span>\n                            </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-2 gap-3 sm:grid-cols-4\">\n                            {LEVEL_OPTIONS.map((opt) => (\n                                <div key={opt.value} className=\"space-y-1\">\n                                    <label className=\"text-xs text-content-secondary\">\n                                        {opt.label}\n                                    </label>\n                                    <IconInput\n                                        icon={BadgePercent}\n                                        value={levelDiscounts[opt.value]}\n                                        onChange={(e) =>\n                                            setLevelDiscounts((prev) => ({\n                                                ...prev,\n                                                [opt.value]: e.target.value,\n                                            }))\n                                        }\n                                        disabled={isPending}\n                                        inputMode=\"numeric\"\n                                        placeholder=\"Ex: 10\"\n                                        className={INPUT_SECONDARY}\n                                    />\n                                </div>\n                            ))}\n                        </div>\n\n                        <p className=\"text-[11px] text-content-secondary/70\">\n                            O servidor normaliza para 0‚Äì100 e ignora campos\n                            vazios.\n                        </p>\n                    </div>\n\n                    <div className=\"space-y-2 rounded-xl border border-border-primary bg-background-tertiary p-3\">\n                        <div className=\"flex items-start justify-between gap-4\">\n                            <div>\n                                <p className=\"text-sm font-medium text-content-primary\">\n                                    Benef√≠cio de anivers√°rio\n                                </p>\n                                <p className=\"text-xs text-content-secondary\">\n                                    Ativo por 3 dias antes, no dia, e 3 dias\n                                    depois. Voc√™ escolhe qual ‚Äún√≠vel‚Äù aplicar.\n                                </p>\n                            </div>\n\n                            <label className=\"inline-flex items-center gap-2 text-xs text-content-secondary\">\n                                <input\n                                    type=\"checkbox\"\n                                    checked={birthdayEnabled}\n                                    disabled={isPending}\n                                    onChange={(e) =>\n                                        setBirthdayEnabled(e.target.checked)\n                                    }\n                                    className=\"h-4 w-4 accent-current\"\n                                />\n                                Ativar\n                            </label>\n                        </div>\n\n                        {birthdayEnabled ? (\n                            <div className=\"space-y-2\">\n                                <label className=\"text-xs text-content-secondary\">\n                                    Aplicar desconto como{' '}\n                                    <span className=\"text-red-500\">*</span>\n                                </label>\n\n                                <Select\n                                    value={birthdayLevel}\n                                    onValueChange={(v) =>\n                                        setBirthdayLevel(v as CustomerLevel)\n                                    }\n                                    disabled={isPending}\n                                >\n                                    <SelectTrigger\n                                        className={cn(\n                                            'h-10 w-full justify-between text-left font-normal bg-background-secondary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0'\n                                        )}\n                                    >\n                                        <div className=\"flex items-center gap-2\">\n                                            <Cake className=\"h-4 w-4 text-content-brand\" />\n                                            <SelectValue placeholder=\"Selecione o n√≠vel\" />\n                                        </div>\n                                    </SelectTrigger>\n                                    <SelectContent>\n                                        {LEVEL_OPTIONS.map((opt) => (\n                                            <SelectItem\n                                                key={opt.value}\n                                                value={opt.value}\n                                            >\n                                                {opt.label}\n                                            </SelectItem>\n                                        ))}\n                                    </SelectContent>\n                                </Select>\n\n                                {birthdayInvalid ? (\n                                    <p className=\"text-xs text-red-500\">\n                                        Se o benef√≠cio est√° ativo, selecione o\n                                        n√≠vel.\n                                    </p>\n                                ) : (\n                                    <p className=\"text-[11px] text-content-secondary/70\">\n                                        Ex.: ‚ÄúDiamante‚Äù aplica o desconto\n                                        Diamante durante a janela do\n                                        anivers√°rio.\n                                    </p>\n                                )}\n                            </div>\n                        ) : null}\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Porcentagem do profissional (%){' '}\n                            <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={Scissors}\n                            value={barberPercentage}\n                            onChange={(e) =>\n                                setBarberPercentage(e.target.value)\n                            }\n                            disabled={isPending}\n                            type=\"number\"\n                            min={0}\n                            max={100}\n                            placeholder=\"Ex: 20\"\n                            className={INPUT_BASE}\n                        />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Estoque <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={Boxes}\n                            value={stockQuantity}\n                            onChange={(e) => setStockQuantity(e.target.value)}\n                            disabled={isPending}\n                            type=\"number\"\n                            min={0}\n                            placeholder=\"Ex: 10\"\n                            className={INPUT_BASE}\n                        />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Categoria / Finalidade{' '}\n                            <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={TagIcon}\n                            value={category}\n                            onChange={(e) => setCategory(e.target.value)}\n                            disabled={isPending}\n                            placeholder=\"Ex: Barba, Cabelo, Hidrata√ß√£o...\"\n                            className={INPUT_BASE}\n                        />\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-small text-content-secondary\">\n                            Prazo para retirada (dias){' '}\n                            <span className=\"text-red-500\">*</span>\n                        </label>\n                        <IconInput\n                            icon={Clock}\n                            value={pickupDeadlineDays}\n                            onChange={(e) =>\n                                setPickupDeadlineDays(e.target.value)\n                            }\n                            disabled={isPending}\n                            type=\"number\"\n                            min={1}\n                            max={30}\n                            className={INPUT_BASE}\n                        />\n                        <p className=\"text-xs text-content-secondary\">\n                            Ap√≥s esse prazo, a reserva pode expirar e o produto\n                            volta ao estoque.\n                        </p>\n                    </div>\n\n                    <div className=\"flex justify-end gap-2 pt-2\">\n                        <Button\n                            type=\"button\"\n                            variant=\"brand\"\n                            disabled={isPending || formInvalid}\n                            onClick={handleCreate}\n                            title={\n                                unitInvalid\n                                    ? 'Selecione uma unidade'\n                                    : uploadingImage\n                                      ? 'Aguarde o upload da imagem'\n                                      : birthdayInvalid\n                                        ? 'Selecione o n√≠vel do benef√≠cio de anivers√°rio'\n                                        : requiredInvalid\n                                          ? 'Preencha os campos obrigat√≥rios'\n                                          : undefined\n                            }\n                        >\n                            {isPending ? 'Criando...' : 'Criar produto'}\n                        </Button>\n                    </div>\n                </div>\n            </DialogContent>\n        </Dialog>\n    );\n}\n"],"names":[],"mappings":"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,CDCO,ACDP,CDCO,ACDP,CDCO,AAAW,ACDlB,CDCkB,ACDlB,CDCkB,ACDlB,CDCkB,ACDlB,CDCuB,AAAL,ACDlB,CDCuB,ACDvB,CDCuB,ACDvB,CDCuB,ACDvB,CDCuB,ACDvB,CDCuB,ACDvB,CDCuB,ACDvB,CDCuB,ACDvB,CDCuB,ACDvB,CDCiC,ACDjC,CDCiC,ACDjC,CDEP,ACFO,CDEN,ACFM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CDEE,ACFF,CDEE,AAAE,ACFJ,CAAA,CDEO,ACFP,CDEO,ACFP,CDEO,ACFP,CDEO,ACFP,CDEO,ACFP,CDEO,ACFP,CAAA,ADEO,CCFP,ADEO,CCFP,ADEO,CCFP,ADEO,CCFP,ADEO,AAAW,CCFlB,ADEkB,CCFlB,ADEkB,CCFlB,ADEkB,CCFlB,ADEkB,AAAK,CCFvB,ADEuB,CCFvB,ADEuB,CCFvB,ADEuB,CAAA,ACFvB,CAAA,ADEuB,CCFvB,ADEuB,CCFvB,ADEuB,CCFvB,ADEuB,CCFvB,ADEiC,CCFjC,ADEiC,CACxC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAY,CAAA,CAAA,CAAA,CAAK,AAAL,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,EACxC,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,CAAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAU,EAAG,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,AAAa,CAAA,ACAb,CDAa,ACAb,CDAa,ACAb,CDAkB,ACAlB,ADAa,CAAK,ACAlB,CAAA,ADAkB,QAAU,CAC1C,ACDwC,CAAA,CAAA,CAAA,MDC7B,EAAG,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,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","ignoreList":[0,1]}