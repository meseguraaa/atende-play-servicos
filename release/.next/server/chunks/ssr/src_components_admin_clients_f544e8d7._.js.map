{"version":3,"sources":["turbopack:///[project]/src/components/admin/clients/admin-new-client-dialog/admin-new-client-dialog.tsx","turbopack:///[project]/src/components/admin/clients/admin-edit-client-dialog/admin-edit-client-dialog.tsx"],"sourcesContent":["// src/components/admin/clients/admin-new-client-dialog/admin-new-client-dialog.tsx\n'use client';\n\nimport * as React from 'react';\nimport {\n    Dialog,\n    DialogContent,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n    DialogFooter,\n    DialogDescription,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { toast } from 'sonner';\nimport { User, Mail, Phone, Loader2 } from 'lucide-react';\n\nimport { cn } from '@/lib/utils';\n\nimport { Calendar as UICalendar } from '@/components/ui/calendar';\nimport {\n    Popover,\n    PopoverContent,\n    PopoverTrigger,\n} from '@/components/ui/popover';\n\nimport { format, isValid } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\nimport { Calendar as CalendarIcon, ChevronDown } from 'lucide-react';\n\nfunction onlyDigits(value: string): string {\n    return String(value ?? '').replace(/\\D/g, '');\n}\n\n// máscara (99) 99999-9999\nfunction formatPhone(value: string): string {\n    const digits = onlyDigits(value).slice(0, 11);\n\n    if (digits.length === 0) return '';\n    if (digits.length <= 2) return `(${digits}`;\n    if (digits.length <= 7) return `(${digits.slice(0, 2)}) ${digits.slice(2)}`;\n    return `(${digits.slice(0, 2)}) ${digits.slice(2, 7)}-${digits.slice(7)}`;\n}\n\n// yyyy-MM-dd -> Date (timezone local)\nfunction parseISODateToDate(dateISO: string): Date | null {\n    if (!/^\\d{4}-\\d{2}-\\d{2}$/.test(String(dateISO || '').trim())) return null;\n    const [y, m, d] = dateISO.split('-').map(Number);\n    if (!y || !m || !d) return null;\n    const dt = new Date(y, m - 1, d);\n    return isValid(dt) ? dt : null;\n}\n\nfunction toISODateLocal(d: Date): string {\n    return format(d, 'yyyy-MM-dd');\n}\n\nfunction IconInput(\n    props: {\n        icon: React.ComponentType<React.SVGProps<SVGSVGElement>>;\n        disabledIcon?: boolean;\n        inputClassName?: string;\n        wrapperClassName?: string;\n    } & React.ComponentProps<typeof Input>\n) {\n    const {\n        icon: Icon,\n        disabledIcon,\n        inputClassName,\n        wrapperClassName,\n        className,\n        ...rest\n    } = props;\n\n    return (\n        <div className={`relative ${wrapperClassName ?? ''}`}>\n            <div className=\"absolute left-3 top-1/2 -translate-y-1/2 -mt-px pointer-events-none\">\n                <Icon\n                    width={20}\n                    height={20}\n                    className={\n                        disabledIcon\n                            ? 'text-content-secondary/50'\n                            : 'text-content-brand'\n                    }\n                />\n            </div>\n\n            <Input\n                {...rest}\n                className={[\n                    'pl-10',\n                    inputClassName ?? '',\n                    className ?? '',\n                ].join(' ')}\n            />\n        </div>\n    );\n}\n\nexport function AdminNewClientDialog() {\n    const [open, setOpen] = React.useState(false);\n    const [isPending, setIsPending] = React.useState(false);\n\n    const [name, setName] = React.useState('');\n    const [email, setEmail] = React.useState('');\n    const [phone, setPhone] = React.useState('');\n    const [birthday, setBirthday] = React.useState(''); // yyyy-MM-dd (API)\n\n    // popover do datepicker\n    const [birthdayPopoverOpen, setBirthdayPopoverOpen] = React.useState(false);\n\n    function resetAll() {\n        setName('');\n        setEmail('');\n        setPhone('');\n        setBirthday('');\n        setBirthdayPopoverOpen(false);\n    }\n\n    const selectedBirthday = React.useMemo(() => {\n        return parseISODateToDate(birthday);\n    }, [birthday]);\n\n    async function handleSubmit(e: React.FormEvent) {\n        e.preventDefault();\n        if (isPending) return;\n\n        const n = name.trim();\n        const em = email.trim().toLowerCase();\n        const ph = phone.trim();\n        const bd = birthday.trim();\n\n        if (!n) return toast.error('Informe o nome do cliente.');\n        if (!em) return toast.error('Informe o e-mail do cliente.');\n        if (!ph) return toast.error('Informe o telefone do cliente.');\n        if (!bd) return toast.error('Preencha a data de nascimento.');\n\n        const digits = onlyDigits(ph);\n        if (digits.length < 10) {\n            return toast.error('Informe um telefone válido (com DDD).');\n        }\n\n        // fail-safe: garante que é yyyy-MM-dd válido\n        if (!parseISODateToDate(bd)) {\n            return toast.error('Informe uma data de nascimento válida.');\n        }\n\n        try {\n            setIsPending(true);\n\n            const res = await fetch('/api/admin/clients', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    name: n,\n                    email: em,\n                    phone: ph, // manda formatado, API normaliza\n                    birthday: bd, // YYYY-MM-DD\n                }),\n            });\n\n            const json = await res.json().catch(() => null);\n\n            if (!res.ok || !json?.ok) {\n                const msg =\n                    json?.error ||\n                    (res.status === 409\n                        ? 'Já existe um usuário com esse e-mail.'\n                        : 'Não foi possível criar o cliente.');\n                toast.error(msg);\n                return;\n            }\n\n            toast.success('Cliente criado com sucesso!');\n            setOpen(false);\n            resetAll();\n\n            // ✅ atualiza listagem (sem depender de router)\n            window.location.reload();\n        } catch {\n            toast.error('Falha de rede ao criar o cliente.');\n        } finally {\n            setIsPending(false);\n        }\n    }\n\n    const inputBase =\n        'bg-background-tertiary border-border-primary text-content-primary hover:border-border-secondary focus:border-border-brand focus-visible:ring-1 focus-visible:ring-border-brand focus-visible:ring-offset-0';\n\n    // intervalo de anos (nascimento)\n    const thisYear = new Date().getFullYear();\n    const fromYear = 1900;\n    const toYear = thisYear;\n\n    return (\n        <Dialog\n            open={open}\n            onOpenChange={(next) => {\n                if (isPending) return;\n                setOpen(next);\n                if (!next) resetAll();\n            }}\n        >\n            <DialogTrigger asChild>\n                <Button variant=\"brand\">Novo cliente</Button>\n            </DialogTrigger>\n\n            <DialogContent className=\"bg-background-secondary border border-border-primary sm:max-w-[560px]\">\n                <DialogHeader>\n                    <DialogTitle className=\"text-title text-content-primary\">\n                        Novo cliente\n                    </DialogTitle>\n                    <DialogDescription className=\"text-paragraph-small text-content-secondary\">\n                        Cadastre um novo cliente para acompanhar histórico,\n                        planos e nível.\n                    </DialogDescription>\n                </DialogHeader>\n\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                    {/* NOME */}\n                    <div className=\"space-y-2\">\n                        <label\n                            className=\"text-label-medium-size text-content-primary\"\n                            htmlFor=\"new-client-name\"\n                        >\n                            Nome <span className=\"text-red-500\">*</span>\n                        </label>\n\n                        <IconInput\n                            id=\"new-client-name\"\n                            name=\"name\"\n                            icon={User}\n                            value={name}\n                            onChange={(ev) => setName(ev.target.value)}\n                            disabled={isPending}\n                            disabledIcon={isPending}\n                            placeholder=\"Nome do cliente\"\n                            className={inputBase}\n                        />\n                    </div>\n\n                    {/* E-MAIL */}\n                    <div className=\"space-y-2\">\n                        <label\n                            className=\"text-label-medium-size text-content-primary\"\n                            htmlFor=\"new-client-email\"\n                        >\n                            E-mail <span className=\"text-red-500\">*</span>\n                        </label>\n\n                        <IconInput\n                            id=\"new-client-email\"\n                            type=\"email\"\n                            name=\"email\"\n                            icon={Mail}\n                            value={email}\n                            onChange={(ev) => setEmail(ev.target.value)}\n                            disabled={isPending}\n                            disabledIcon={isPending}\n                            placeholder=\"email@exemplo.com\"\n                            className={inputBase}\n                        />\n                    </div>\n\n                    {/* TELEFONE */}\n                    <div className=\"space-y-2\">\n                        <label\n                            className=\"text-label-medium-size text-content-primary\"\n                            htmlFor=\"new-client-phone\"\n                        >\n                            Telefone <span className=\"text-red-500\">*</span>\n                        </label>\n\n                        <IconInput\n                            id=\"new-client-phone\"\n                            name=\"phone\"\n                            type=\"tel\"\n                            icon={Phone}\n                            placeholder=\"(99) 99999-9999\"\n                            value={phone}\n                            onChange={(ev) =>\n                                setPhone(formatPhone(ev.target.value))\n                            }\n                            disabled={isPending}\n                            disabledIcon={isPending}\n                            className={inputBase}\n                        />\n\n                        <p className=\"text-[11px] text-content-tertiary\">\n                            Ex.: (11) 99999-9999\n                        </p>\n                    </div>\n\n                    {/* DATA DE NASCIMENTO (DatePicker style + dropdown mês/ano ✅) */}\n                    <div className=\"space-y-2\">\n                        <label className=\"text-label-medium-size text-content-primary\">\n                            Data de nascimento{' '}\n                            <span className=\"text-red-500\">*</span>\n                        </label>\n\n                        <Popover\n                            open={birthdayPopoverOpen}\n                            onOpenChange={setBirthdayPopoverOpen}\n                        >\n                            <PopoverTrigger asChild>\n                                <Button\n                                    type=\"button\"\n                                    variant=\"outline\"\n                                    className={cn(\n                                        'w-full justify-between text-left font-normal',\n                                        'bg-transparent border-border-primary text-content-primary',\n                                        'hover:bg-background-tertiary hover:border-border-secondary hover:text-content-primary',\n                                        'focus-visible:ring-offset-0 focus-visible:ring-1 focus-visible:ring-border-brand',\n                                        'focus:border-border-brand focus-visible:border-border-brand'\n                                    )}\n                                    disabled={isPending}\n                                >\n                                    <div className=\"flex items-center gap-2\">\n                                        <CalendarIcon className=\"h-4 w-4 text-content-brand\" />\n                                        {selectedBirthday ? (\n                                            format(\n                                                selectedBirthday,\n                                                'dd/MM/yyyy',\n                                                {\n                                                    locale: ptBR,\n                                                }\n                                            )\n                                        ) : (\n                                            <span className=\"text-content-secondary\">\n                                                Selecione uma data\n                                            </span>\n                                        )}\n                                    </div>\n                                    <ChevronDown className=\"h-4 w-4 opacity-50\" />\n                                </Button>\n                            </PopoverTrigger>\n\n                            <PopoverContent\n                                className=\"w-auto p-0\"\n                                align=\"start\"\n                            >\n                                <UICalendar\n                                    mode=\"single\"\n                                    selected={selectedBirthday ?? undefined}\n                                    onSelect={(d) => {\n                                        if (!d) return;\n                                        setBirthday(toISODateLocal(d));\n                                        setBirthdayPopoverOpen(false);\n                                    }}\n                                    autoFocus\n                                    locale={ptBR}\n                                    // ✅ melhora UX: dropdown de mês/ano (react-day-picker)\n                                    captionLayout=\"dropdown\"\n                                    fromYear={fromYear}\n                                    toYear={toYear}\n                                    // ✅ aniversário não faz sentido no futuro\n                                    disabled={(date) => date > new Date()}\n                                />\n                            </PopoverContent>\n                        </Popover>\n\n                        <p className=\"text-[11px] text-content-tertiary\">\n                            Usamos essa data para aniversários e relatórios.\n                        </p>\n                    </div>\n\n                    <DialogFooter className=\"gap-2 sm:gap-3 pt-2\">\n                        <Button\n                            type=\"submit\"\n                            variant=\"edit2\"\n                            size=\"sm\"\n                            disabled={isPending}\n                        >\n                            {isPending && (\n                                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                            )}\n                            {isPending ? 'Salvando...' : 'Criar cliente'}\n                        </Button>\n\n                        <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            size=\"sm\"\n                            disabled={isPending}\n                            onClick={() => {\n                                if (isPending) return;\n                                setOpen(false);\n                                resetAll();\n                            }}\n                        >\n                            Cancelar\n                        </Button>\n                    </DialogFooter>\n                </form>\n            </DialogContent>\n        </Dialog>\n    );\n}\n","// src/components/admin/clients/admin-edit-client-dialog/admin-edit-client-dialog.tsx\n'use client';\n\nimport * as React from 'react';\nimport { useRouter } from 'next/navigation';\nimport {\n    Dialog,\n    DialogContent,\n    DialogHeader,\n    DialogTitle,\n    DialogTrigger,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { toast } from 'sonner';\nimport { Calendar as CalendarIcon } from 'lucide-react';\n\ntype AdminEditClientDialogProps = {\n    client: {\n        id: string;\n        name: string;\n        email: string;\n        phone: string;\n        birthday: Date | null;\n    };\n};\n\n// máscara tel: (99) 99999-9999\nfunction formatPhone(value: string): string {\n    const digits = String(value ?? '')\n        .replace(/\\D/g, '')\n        .slice(0, 11);\n\n    if (digits.length === 0) return '';\n    if (digits.length <= 2) return `(${digits}`;\n    if (digits.length <= 7) return `(${digits.slice(0, 2)}) ${digits.slice(2)}`;\n    return `(${digits.slice(0, 2)}) ${digits.slice(2, 7)}-${digits.slice(7)}`;\n}\n\nfunction formatBirthdayToDisplay(date: Date | null): string {\n    if (!date) return '';\n    const d = String(date.getDate()).padStart(2, '0');\n    const m = String(date.getMonth() + 1).padStart(2, '0');\n    const y = date.getFullYear();\n    return `${d}/${m}/${y}`;\n}\n\nfunction isValidBirthdayDisplay(display: string): boolean {\n    return /^\\d{2}\\/\\d{2}\\/\\d{4}$/.test(display);\n}\n\nexport function AdminEditClientDialog({ client }: AdminEditClientDialogProps) {\n    const router = useRouter();\n\n    const [open, setOpen] = React.useState(false);\n    const [isPending, startTransition] = React.useTransition();\n\n    const [name, setName] = React.useState(client.name ?? '');\n    const [email, setEmail] = React.useState(client.email ?? '');\n    const [phone, setPhone] = React.useState(formatPhone(client.phone ?? ''));\n    const [birthdayInput, setBirthdayInput] = React.useState(\n        formatBirthdayToDisplay(client.birthday)\n    );\n\n    // ✅ garante que ao abrir (e ao trocar o cliente) os campos refletem o client atual\n    React.useEffect(() => {\n        if (!open) return;\n\n        setName(client.name ?? '');\n        setEmail(client.email ?? '');\n        setPhone(formatPhone(client.phone ?? ''));\n        setBirthdayInput(formatBirthdayToDisplay(client.birthday));\n    }, [\n        open,\n        client.id,\n        client.name,\n        client.email,\n        client.phone,\n        client.birthday,\n    ]);\n\n    function handlePhoneChange(e: React.ChangeEvent<HTMLInputElement>) {\n        setPhone(formatPhone(e.target.value));\n    }\n\n    function handleBirthdayChange(e: React.ChangeEvent<HTMLInputElement>) {\n        let value = e.target.value.replace(/\\D/g, '').slice(0, 8);\n\n        if (value.length >= 5) {\n            value = value.replace(\n                /(\\d{2})(\\d{2})(\\d{0,4})/,\n                (_, d, m, y) => `${d}/${m}/${y}`\n            );\n        } else if (value.length >= 3) {\n            value = value.replace(/(\\d{2})(\\d{0,2})/, (_, d, m) =>\n                m ? `${d}/${m}` : d\n            );\n        }\n\n        setBirthdayInput(value);\n    }\n\n    function handleSubmit(e: React.FormEvent) {\n        e.preventDefault();\n        if (isPending) return;\n\n        const n = name.trim();\n        const em = email.trim().toLowerCase();\n        const p = phone.trim();\n        const b = birthdayInput.trim();\n\n        if (!n) return toast.error('Informe o nome do cliente.');\n        if (!em) return toast.error('Informe o e-mail do cliente.');\n        if (!p) return toast.error('Informe o telefone do cliente.');\n        if (!b) return toast.error('Informe a data de nascimento.');\n        if (!isValidBirthdayDisplay(b)) {\n            return toast.error(\n                'Preencha a data de nascimento no formato DD/MM/AAAA.'\n            );\n        }\n\n        const phoneDigits = p.replace(/\\D/g, '');\n        if (phoneDigits.length < 10) {\n            return toast.error('Informe um telefone válido (com DDD).');\n        }\n\n        startTransition(async () => {\n            try {\n                const res = await fetch('/api/admin/clients', {\n                    method: 'PATCH',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({\n                        id: client.id,\n                        name: n,\n                        email: em,\n                        phone: p,\n                        birthday: b, // DD/MM/AAAA (api aceita)\n                    }),\n                });\n\n                const json = (await res.json().catch(() => null)) as\n                    | { ok: true; data: any }\n                    | { ok: false; error: string }\n                    | null;\n\n                if (!res.ok || !json || (json as any).ok === false) {\n                    const msg =\n                        (json as any)?.error ||\n                        `Erro ao atualizar cliente. (${res.status})`;\n                    toast.error(msg);\n                    return;\n                }\n\n                toast.success('Cliente atualizado com sucesso!');\n                setOpen(false);\n                router.refresh();\n            } catch {\n                toast.error('Falha de rede ao atualizar cliente.');\n            }\n        });\n    }\n\n    return (\n        <Dialog\n            open={open}\n            onOpenChange={(next) => {\n                if (isPending) return;\n                setOpen(next);\n            }}\n        >\n            <DialogTrigger asChild>\n                <Button\n                    variant=\"brand\"\n                    size=\"sm\"\n                    className=\"border-border-primary text-paragraph-small\"\n                >\n                    Editar\n                </Button>\n            </DialogTrigger>\n\n            <DialogContent className=\"bg-background-secondary border border-border-primary\">\n                <DialogHeader>\n                    <DialogTitle className=\"text-title text-content-primary\">\n                        Editar cliente\n                    </DialogTitle>\n                </DialogHeader>\n\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                    {/* NOME */}\n                    <div className=\"space-y-1\">\n                        <label\n                            className=\"text-label-small text-content-secondary\"\n                            htmlFor={`client-name-${client.id}`}\n                        >\n                            Nome <span className=\"text-red-500\">*</span>\n                        </label>\n                        <Input\n                            id={`client-name-${client.id}`}\n                            name=\"name\"\n                            value={name}\n                            onChange={(e) => setName(e.target.value)}\n                            disabled={isPending}\n                            className=\"bg-background-tertiary border-border-primary text-content-primary\"\n                        />\n                    </div>\n\n                    {/* E-MAIL */}\n                    <div className=\"space-y-1\">\n                        <label\n                            className=\"text-label-small text-content-secondary\"\n                            htmlFor={`client-email-${client.id}`}\n                        >\n                            E-mail <span className=\"text-red-500\">*</span>\n                        </label>\n                        <Input\n                            id={`client-email-${client.id}`}\n                            type=\"email\"\n                            name=\"email\"\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                            disabled={isPending}\n                            className=\"bg-background-tertiary border-border-primary text-content-primary\"\n                        />\n                    </div>\n\n                    {/* TELEFONE */}\n                    <div className=\"space-y-1\">\n                        <label\n                            className=\"text-label-small text-content-secondary\"\n                            htmlFor={`client-phone-${client.id}`}\n                        >\n                            Telefone <span className=\"text-red-500\">*</span>\n                        </label>\n                        <Input\n                            id={`client-phone-${client.id}`}\n                            name=\"phone\"\n                            type=\"tel\"\n                            placeholder=\"(99) 99999-9999\"\n                            value={phone}\n                            onChange={handlePhoneChange}\n                            disabled={isPending}\n                            className=\"bg-background-tertiary border-border-primary text-content-primary\"\n                        />\n                    </div>\n\n                    {/* DATA DE NASCIMENTO */}\n                    <div className=\"space-y-1\">\n                        <label\n                            className=\"text-label-small text-content-secondary\"\n                            htmlFor={`client-birthday-${client.id}`}\n                        >\n                            Data de nascimento{' '}\n                            <span className=\"text-red-500\">*</span>\n                        </label>\n\n                        <div className=\"flex items-center gap-2 rounded-lg border border-border-primary bg-background-tertiary px-3 py-2 focus-within:ring-2 focus-within:ring-brand-primary\">\n                            <CalendarIcon className=\"w-4 h-4 text-brand-primary\" />\n                            <input\n                                id={`client-birthday-${client.id}`}\n                                name=\"birthday\"\n                                type=\"text\"\n                                inputMode=\"numeric\"\n                                placeholder=\"DD/MM/AAAA\"\n                                value={birthdayInput}\n                                onChange={handleBirthdayChange}\n                                disabled={isPending}\n                                className=\"flex-1 bg-transparent outline-none border-0 text-paragraph-small-size text-content-primary placeholder:text-content-tertiary\"\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"flex justify-end gap-2 pt-2\">\n                        <Button\n                            type=\"submit\"\n                            variant=\"brand\"\n                            disabled={isPending}\n                        >\n                            {isPending ? 'Salvando...' : 'Salvar alterações'}\n                        </Button>\n                    </div>\n                </form>\n            </DialogContent>\n        </Dialog>\n    );\n}\n"],"names":[],"mappings":"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"}