{"version":3,"sources":["turbopack:///[project]/src/app/admin/review-tag/review-tag-toasts.tsx"],"sourcesContent":["// src/app/admin/review-tag/review-tag-toasts.tsx\n'use client';\n\nimport * as React from 'react';\nimport { usePathname, useRouter, useSearchParams } from 'next/navigation';\nimport { toast } from 'sonner';\n\ntype Props = {\n    success?: string;\n    error?: string;\n};\n\nexport default function ReviewTagToasts({ success, error }: Props) {\n    const router = useRouter();\n    const pathname = usePathname();\n    const sp = useSearchParams();\n\n    // ✅ evita toast duplicado em dev (React StrictMode roda effects 2x)\n    const lastKeyRef = React.useRef<string>('');\n\n    React.useEffect(() => {\n        if (!success && !error) return;\n\n        const key = `${pathname}::${sp.toString()}::${success ?? ''}::${error ?? ''}`;\n        if (lastKeyRef.current === key) return;\n        lastKeyRef.current = key;\n\n        if (success) toast.success(success);\n        if (error) toast.error(error);\n\n        // limpa querystring pra não repetir toast ao recarregar/voltar\n        const next = new URLSearchParams(sp.toString());\n        next.delete('success');\n        next.delete('error');\n\n        const qs = next.toString();\n        router.replace(qs ? `${pathname}?${qs}` : pathname, { scroll: false });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [success, error, pathname]);\n\n    return null;\n}\n"],"names":[],"mappings":"wCAGA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAOe,SAAS,EAAgB,SAAE,CAAO,OAAE,CAAK,CAAS,EAC7D,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAW,CAAA,EAAA,EAAA,WAAA,AAAW,IACtB,EAAK,CAAA,EAAA,EAAA,eAAe,AAAf,IAGL,EAAa,EAAA,MAAY,CAAS,IAsBxC,OApBA,EAAA,SAAe,CAAC,KACZ,GAAI,CAAC,GAAW,CAAC,EAAO,OAExB,IAAM,EAAM,CAAA,EAAG,EAAS,EAAE,EAAE,EAAG,QAAQ,GAAG,EAAE,EAAE,GAAW,GAAG,EAAE,EAAE,GAAS,GAAA,CAAI,CAC7E,GAAI,EAAW,OAAO,GAAK,EAAK,OAChC,EAAW,OAAO,CAAG,EAEjB,GAAS,EAAA,KAAK,CAAC,OAAO,CAAC,GACvB,GAAO,EAAA,KAAK,CAAC,KAAK,CAAC,GAGvB,IAAM,EAAO,IAAI,gBAAgB,EAAG,QAAQ,IAC5C,EAAK,MAAM,CAAC,WACZ,EAAK,MAAM,CAAC,SAEZ,IAAM,EAAK,EAAK,QAAQ,GACxB,EAAO,OAAO,CAAC,EAAK,CAAA,EAAG,EAAS,CAAC,EAAE,EAAA,CAAI,CAAG,EAAU,CAAE,QAAQ,CAAM,EAExE,EAAG,CAAC,EAAS,EAAO,EAAS,EAEtB,IACX"}