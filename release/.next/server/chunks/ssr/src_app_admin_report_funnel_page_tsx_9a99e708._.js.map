{"version":3,"sources":["turbopack:///[project]/src/app/admin/report/funnel/page.tsx"],"sourcesContent":["// app/admin/reports/funnel/page.tsx\nimport type { Metadata } from 'next';\nimport Link from 'next/link';\nimport { prisma } from '@/lib/prisma';\nimport { cookies } from 'next/headers';\nimport { requireAdminForModule } from '@/lib/admin-permissions';\nimport { MonthPicker } from '@/components/month-picker';\nimport { ProfessionalFilter } from '@/components/admin/reports/professional-filter/professional-filter';\nimport { UnitFilter } from '@/components/admin/reports/unit-filter';\nimport { CompareWithFilter } from '@/components/admin/reports/compare-with-filter';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\nimport { parse, subMonths, subYears, format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\nimport type { AppointmentStatus } from '@prisma/client';\nimport { redirect } from 'next/navigation';\n\nexport const dynamic = 'force-dynamic';\n\nexport const metadata: Metadata = {\n    title: 'Admin | Relat√≥rios',\n};\n\ntype AdminReportsFunnelPageProps = {\n    searchParams: Promise<{\n        month?: string; // yyyy-MM\n        professionalId?: string;\n        compare?: string; // \"prev_month\" | \"prev_year\"\n    }>;\n};\n\nconst SAO_PAULO_TIMEZONE = 'America/Sao_Paulo';\nconst UNIT_COOKIE_NAME = 'admin_unit_context';\nconst UNIT_ALL_VALUE = 'all';\nconst COMPANY_COOKIE_NAME = 'admin_company_context';\n\n// ===============================\n// ‚úÖ Company resolver (sem te jogar pro login)\n// ===============================\nasync function resolveCompanyIdOrThrow(admin: any): Promise<string> {\n    const cookieStore = await cookies();\n    const fromCookie = cookieStore.get(COMPANY_COOKIE_NAME)?.value;\n    if (fromCookie) return fromCookie;\n\n    const fromAdmin =\n        (typeof admin?.companyId === 'string' && admin.companyId) ||\n        (typeof admin?.company?.id === 'string' && admin.company.id);\n    if (fromAdmin) return fromAdmin;\n\n    const userId =\n        (typeof admin?.userId === 'string' && admin.userId) ||\n        (typeof admin?.id === 'string' && admin.id) ||\n        (typeof admin?.sub === 'string' && admin.sub);\n\n    if (!userId) {\n        throw new Error(\n            'N√£o consegui resolver o userId do admin para achar a company.'\n        );\n    }\n\n    const membership = await prisma.companyMember.findFirst({\n        where: { userId, isActive: true },\n        select: { companyId: true },\n        orderBy: { createdAt: 'asc' } as any,\n    });\n\n    if (!membership?.companyId) {\n        throw new Error(\n            `Company n√£o definida para este admin. (cookie \"${COMPANY_COOKIE_NAME}\" ausente e sem membership ativa).`\n        );\n    }\n\n    return membership.companyId;\n}\n\n// ===============================\n// Timezone helpers (SP)\n// ===============================\nfunction getSaoPauloYMD(date: Date): { y: number; m: number; d: number } {\n    const formatter = new Intl.DateTimeFormat('pt-BR', {\n        timeZone: SAO_PAULO_TIMEZONE,\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n    });\n\n    const parts = formatter.formatToParts(date);\n    const d = Number(parts.find((p) => p.type === 'day')?.value ?? '1');\n    const m = Number(parts.find((p) => p.type === 'month')?.value ?? '1');\n    const y = Number(parts.find((p) => p.type === 'year')?.value ?? '1970');\n    return { y, m, d };\n}\n\n// 00:00 em SP (UTC-03) = 03:00 UTC\nfunction startOfMonthSP(date: Date): Date {\n    const { y, m } = getSaoPauloYMD(date);\n    return new Date(Date.UTC(y, m - 1, 1, 3, 0, 0));\n}\n\nfunction endOfMonthSP(date: Date): Date {\n    const { y, m } = getSaoPauloYMD(date);\n    const nextMonth = new Date(Date.UTC(y, m, 1, 3, 0, 0));\n    return new Date(nextMonth.getTime() - 1);\n}\n\n// ===============================\n// Unidade (mesma regra dos outros)\n// ===============================\nasync function resolveUnitScope(admin: {\n    unitId: string | null;\n    canSeeAllUnits: boolean;\n}) {\n    if (!admin.canSeeAllUnits) return admin.unitId;\n\n    const cookieStore = await cookies();\n    const cookieValue =\n        cookieStore.get(UNIT_COOKIE_NAME)?.value ?? UNIT_ALL_VALUE;\n\n    if (!cookieValue || cookieValue === UNIT_ALL_VALUE) return null;\n    return cookieValue;\n}\n\nfunction whereAppointmentUnit(unitId: string | null) {\n    return unitId ? { unitId } : {};\n}\n\ntype UnitOption = { id: string; name: string };\n\ntype CompareMode = 'prev_month' | 'prev_year';\nfunction safeCompareMode(raw?: string): CompareMode {\n    return raw === 'prev_year' ? 'prev_year' : 'prev_month';\n}\nfunction compareLabel(mode: CompareMode) {\n    return mode === 'prev_year' ? 'ano anterior' : 'm√™s anterior';\n}\n\nfunction formatPercent(value: number) {\n    if (!Number.isFinite(value)) return '‚Äî';\n    return `${Math.round(value)}%`;\n}\nfunction safeDiv(num: number, den: number) {\n    if (!Number.isFinite(num) || !Number.isFinite(den) || den <= 0) return NaN;\n    return num / den;\n}\nfunction pct(num: number, den: number) {\n    const v = safeDiv(num, den);\n    return Number.isFinite(v) ? v * 100 : NaN;\n}\nfunction formatSignedPP(pp: number) {\n    const sign = pp > 0 ? '+' : '';\n    return `${sign}${Math.round(pp)} p.p.`;\n}\nfunction formatSignedInt(n: number) {\n    const sign = n > 0 ? '+' : '';\n    return `${sign}${n}`;\n}\nfunction formatDays(value: number) {\n    if (!Number.isFinite(value)) return '‚Äî';\n    return `${Math.round(value)}d`;\n}\n\n// ===============================\n// UI helper\n// ===============================\nfunction FunnelStepCard(props: {\n    index: number;\n    title: string;\n    value: number;\n    sub?: string;\n    convFromPrevPct?: number; // 0..100\n    dropFromPrevPct?: number; // 0..100\n}) {\n    const conv =\n        Number.isFinite(props.convFromPrevPct) && props.index > 0\n            ? `${Math.round(props.convFromPrevPct!)}%`\n            : null;\n\n    const drop =\n        Number.isFinite(props.dropFromPrevPct) && props.index > 0\n            ? `${Math.round(props.dropFromPrevPct!)}%`\n            : null;\n\n    return (\n        <div className=\"rounded-xl border border-border-primary bg-background-tertiary p-4\">\n            <div className=\"flex items-start justify-between gap-3\">\n                <div>\n                    <p className=\"text-label-small text-content-secondary\">\n                        Etapa {props.index + 1}\n                    </p>\n                    <p className=\"text-label-large text-content-primary\">\n                        {props.title}\n                    </p>\n                </div>\n\n                <div className=\"text-right\">\n                    <p className=\"text-title text-content-primary tabular-nums\">\n                        {props.value}\n                    </p>\n\n                    {conv ? (\n                        <p className=\"text-[11px] text-content-tertiary\">\n                            Convers√£o:{' '}\n                            <span className=\"text-content-primary\">{conv}</span>\n                        </p>\n                    ) : (\n                        <p className=\"text-[11px] text-content-tertiary\">\n                            Base do funil\n                        </p>\n                    )}\n\n                    {drop ? (\n                        <p className=\"text-[11px] text-content-tertiary\">\n                            Queda:{' '}\n                            <span className=\"text-content-primary\">{drop}</span>\n                        </p>\n                    ) : null}\n                </div>\n            </div>\n\n            {props.sub ? (\n                <p className=\"mt-2 text-[11px] text-content-tertiary\">\n                    {props.sub}\n                </p>\n            ) : null}\n        </div>\n    );\n}\n\nexport default async function AdminReportsFunnelPage({\n    searchParams,\n}: AdminReportsFunnelPageProps) {\n    const session = await requireAdminForModule('REPORTS');\n\n    // ‚úÖ resolve companyId sem depender do cookie (n√£o redireciona pro login)\n    const companyId = await resolveCompanyIdOrThrow(session);\n\n    const cookieStore = await cookies();\n\n    if (!session?.canSeeAllUnits && !session?.unitId) {\n        throw new Error(\n            'Admin de unidade sem unitId definido. Vincule este admin a uma unidade.'\n        );\n    }\n\n    const unitCookieValue =\n        cookieStore.get(UNIT_COOKIE_NAME)?.value ?? UNIT_ALL_VALUE;\n\n    const selectedUnitValue = session?.canSeeAllUnits\n        ? unitCookieValue\n        : (session?.unitId ?? '');\n\n    const activeUnitId = await resolveUnitScope({\n        unitId: session?.unitId ?? null,\n        canSeeAllUnits: !!session?.canSeeAllUnits,\n    });\n\n    // üîí sanity check: unidade pertence √† empresa\n    if (activeUnitId) {\n        const ok = await prisma.unit.findFirst({\n            where: { id: activeUnitId, companyId, isActive: true },\n            select: { id: true },\n        });\n        if (!ok) {\n            redirect('/admin/reports');\n        }\n    }\n\n    const { month: monthParam, professionalId, compare } = await searchParams;\n\n    const compareMode = safeCompareMode(compare);\n\n    const referenceDate = monthParam\n        ? parse(monthParam, 'yyyy-MM', new Date())\n        : new Date();\n\n    const compareDate =\n        compareMode === 'prev_year'\n            ? subYears(referenceDate, 1)\n            : subMonths(referenceDate, 1);\n\n    const monthStart = startOfMonthSP(referenceDate);\n    const monthEnd = endOfMonthSP(referenceDate);\n\n    const compareStart = startOfMonthSP(compareDate);\n    const compareEnd = endOfMonthSP(compareDate);\n\n    const monthLabel = format(referenceDate, \"MMMM 'de' yyyy\", {\n        locale: ptBR,\n    });\n\n    // ===== Unidades (para filtro) ‚úÖ companyId\n    let units: UnitOption[] = [];\n    let fixedUnitName: string | null = null;\n\n    if (session?.canSeeAllUnits) {\n        units = await prisma.unit.findMany({\n            where: { companyId, isActive: true },\n            select: { id: true, name: true },\n            orderBy: { name: 'asc' },\n        });\n    } else if (session?.unitId) {\n        const u = await prisma.unit.findFirst({\n            where: { id: session.unitId, companyId },\n            select: { name: true },\n        });\n        fixedUnitName = u?.name ?? null;\n    }\n\n    const ownerHasMultipleUnits = !!session?.canSeeAllUnits && units.length > 1;\n    const ownerSingleUnitName =\n        !!session?.canSeeAllUnits && units.length === 1 ? units[0]?.name : null;\n\n    const unitLabel = session?.canSeeAllUnits\n        ? (ownerSingleUnitName ?? 'Todas as unidades')\n        : (fixedUnitName ?? '');\n\n    // ===== Barbeiros ‚úÖ companyId\n    const professionals = activeUnitId\n        ? await prisma.professional.findMany({\n              where: {\n                  companyId,\n                  isActive: true,\n                  units: { some: { unitId: activeUnitId, isActive: true } },\n              },\n              select: { id: true, name: true },\n              orderBy: { name: 'asc' },\n          })\n        : await prisma.professional.findMany({\n              where: { companyId, isActive: true },\n              select: { id: true, name: true },\n              orderBy: { name: 'asc' },\n          });\n\n    const professionalIdSafe =\n        professionalId && professionals.some((b) => b.id === professionalId)\n            ? professionalId\n            : null;\n\n    const selectedProfessionalName = professionalIdSafe\n        ? professionals.find((b) => b.id === professionalIdSafe)?.name\n        : null;\n\n    // ===============================\n    // Dados (PENDING | DONE | CANCELED) ‚úÖ companyId\n    // ===============================\n    const baseWhere = {\n        companyId,\n        scheduleAt: { gte: monthStart, lte: monthEnd },\n        ...whereAppointmentUnit(activeUnitId),\n        ...(professionalIdSafe ? { professionalId: professionalIdSafe } : {}),\n    };\n\n    const compareWhere = {\n        companyId,\n        scheduleAt: { gte: compareStart, lte: compareEnd },\n        ...whereAppointmentUnit(activeUnitId),\n        ...(professionalIdSafe ? { professionalId: professionalIdSafe } : {}),\n    };\n\n    const unitOnlyBaseWhere = {\n        companyId,\n        scheduleAt: { gte: monthStart, lte: monthEnd },\n        ...whereAppointmentUnit(activeUnitId),\n    };\n\n    const STATUS_PENDING: AppointmentStatus = 'PENDING';\n    const STATUS_DONE: AppointmentStatus = 'DONE';\n    const STATUS_CANCELED: AppointmentStatus = 'CANCELED';\n\n    const now = new Date();\n\n    const [\n        createdCountBase,\n        pendingCountBase,\n        doneCountBase,\n        canceledCountBase,\n\n        createdCountCompare,\n        pendingCountCompare,\n        doneCountCompare,\n        canceledCountCompare,\n\n        pendingFutureCountBase,\n        pendingOverdueCountBase,\n\n        canceledBaseRows,\n        createdBaseRows,\n\n        groupByProfessionalStatus,\n    ] = await Promise.all([\n        prisma.appointment.count({ where: baseWhere }),\n        prisma.appointment.count({\n            where: { ...baseWhere, status: STATUS_PENDING },\n        }),\n        prisma.appointment.count({\n            where: { ...baseWhere, status: STATUS_DONE },\n        }),\n        prisma.appointment.count({\n            where: { ...baseWhere, status: STATUS_CANCELED },\n        }),\n\n        prisma.appointment.count({ where: compareWhere }),\n        prisma.appointment.count({\n            where: { ...compareWhere, status: STATUS_PENDING },\n        }),\n        prisma.appointment.count({\n            where: { ...compareWhere, status: STATUS_DONE },\n        }),\n        prisma.appointment.count({\n            where: { ...compareWhere, status: STATUS_CANCELED },\n        }),\n\n        prisma.appointment.count({\n            where: {\n                ...baseWhere,\n                status: STATUS_PENDING,\n                scheduleAt: { gte: now, lte: monthEnd },\n            },\n        }),\n        prisma.appointment.count({\n            where: {\n                ...baseWhere,\n                status: STATUS_PENDING,\n                scheduleAt: { gte: monthStart, lt: now },\n            },\n        }),\n\n        prisma.appointment.findMany({\n            where: { ...baseWhere, status: STATUS_CANCELED },\n            select: { createdAt: true, scheduleAt: true },\n        }),\n        prisma.appointment.findMany({\n            where: { ...baseWhere },\n            select: { createdAt: true, scheduleAt: true },\n        }),\n\n        prisma.appointment.groupBy({\n            by: ['professionalId', 'status'],\n            where: unitOnlyBaseWhere,\n            _count: { _all: true },\n        }),\n    ]);\n\n    // KPIs %\n    const completionPctBase = pct(doneCountBase, createdCountBase);\n    const cancelPctBase = pct(canceledCountBase, createdCountBase);\n    const pendingPctBase = pct(pendingCountBase, createdCountBase);\n\n    const completionPctCompare = pct(doneCountCompare, createdCountCompare);\n    const cancelPctCompare = pct(canceledCountCompare, createdCountCompare);\n    const pendingPctCompare = pct(pendingCountCompare, createdCountCompare);\n\n    const completionDeltaPP = completionPctBase - completionPctCompare;\n    const cancelDeltaPP = cancelPctBase - cancelPctCompare;\n    const pendingDeltaPP = pendingPctBase - pendingPctCompare;\n\n    // Pendentes: futuros vs vencidos\n    const pendingFuturePctBase = pct(pendingFutureCountBase, createdCountBase);\n    const pendingOverduePctBase = pct(\n        pendingOverdueCountBase,\n        createdCountBase\n    );\n\n    // Tempo m√©dio de anteced√™ncia (criados -> data agendada)\n    const leadTimesAllDays = createdBaseRows\n        .map((r) => (r.scheduleAt.getTime() - r.createdAt.getTime()) / 86400000)\n        .filter((v) => Number.isFinite(v));\n\n    const avgLeadTimeDays =\n        leadTimesAllDays.length > 0\n            ? leadTimesAllDays.reduce((a, b) => a + b, 0) /\n              leadTimesAllDays.length\n            : NaN;\n\n    // ‚ÄúTempo at√© perder‚Äù: anteced√™ncia nos cancelados (cria√ß√£o ‚Üí data agendada)\n    const leadTimesCancelDays = canceledBaseRows\n        .map((r) => (r.scheduleAt.getTime() - r.createdAt.getTime()) / 86400000)\n        .filter((v) => Number.isFinite(v));\n\n    const avgCancelLeadTimeDays =\n        leadTimesCancelDays.length > 0\n            ? leadTimesCancelDays.reduce((a, b) => a + b, 0) /\n              leadTimesCancelDays.length\n            : NaN;\n\n    // Funil principal\n    const funnel = [\n        {\n            key: 'created',\n            title: 'Agendamentos criados',\n            value: createdCountBase,\n        },\n        { key: 'done', title: 'Atendimentos realizados', value: doneCountBase },\n        {\n            key: 'not_done',\n            title: 'N√£o realizados (pendentes + cancelados)',\n            value: Math.max(0, createdCountBase - doneCountBase),\n        },\n    ] as const;\n\n    const funWithRates = funnel.map((s, idx) => {\n        const prev = idx === 0 ? null : (funnel[idx - 1]?.value ?? 0);\n        const conv = idx === 0 ? NaN : pct(s.value, prev ?? 0);\n        const drop =\n            idx === 0\n                ? NaN\n                : pct(Math.max(0, (prev ?? 0) - s.value), prev ?? 0);\n        return { ...s, idx, conv, drop };\n    });\n\n    // ===============================\n    // Ranking por profissional (unidade)\n    // ===============================\n    type ProfessionalRankRow = {\n        professionalId: string;\n        professionalName: string;\n        created: number;\n        done: number;\n        canceled: number;\n        pending: number;\n        pendingOverdue: number;\n        donePct: number;\n        cancelPct: number;\n    };\n\n    const professionalNameById = new Map(\n        professionals.map((b) => [b.id, b.name])\n    );\n\n    const countsByProfessional = new Map<\n        string,\n        { created: number; done: number; canceled: number; pending: number }\n    >();\n\n    for (const g of groupByProfessionalStatus) {\n        const pId = g.professionalId;\n        if (!pId) continue;\n\n        const curr = countsByProfessional.get(pId) ?? {\n            created: 0,\n            done: 0,\n            canceled: 0,\n            pending: 0,\n        };\n\n        const c = (g._count as any)?._all ?? 0;\n\n        curr.created += c;\n\n        if (g.status === STATUS_DONE) curr.done += c;\n        if (g.status === STATUS_CANCELED) curr.canceled += c;\n        if (g.status === STATUS_PENDING) curr.pending += c;\n\n        countsByProfessional.set(pId, curr);\n    }\n\n    // pendentes vencidos por barbeiro (query √∫nica, agrega em JS)\n    const overduePendingByBarber =\n        (await prisma.appointment.findMany({\n            where: {\n                ...unitOnlyBaseWhere,\n                status: STATUS_PENDING,\n                scheduleAt: { gte: monthStart, lt: now },\n                professionalId: { not: null },\n            },\n            select: { professionalId: true },\n        })) ?? [];\n\n    const overdueCountByProfessional = new Map<string, number>();\n    for (const a of overduePendingByBarber) {\n        if (!a.professionalId) continue;\n        overdueCountByProfessional.set(\n            a.professionalId,\n            (overdueCountByProfessional.get(a.professionalId) ?? 0) + 1\n        );\n    }\n\n    let rankingRows: ProfessionalRankRow[] = [];\n\n    if (professionalIdSafe) {\n        const base = countsByProfessional.get(professionalIdSafe) ?? {\n            created: 0,\n            done: 0,\n            canceled: 0,\n            pending: 0,\n        };\n\n        const created = base.created;\n        const done = base.done;\n        const canceled = base.canceled;\n        const pending = base.pending;\n\n        rankingRows = [\n            {\n                professionalId: professionalIdSafe,\n                professionalName:\n                    professionalNameById.get(professionalIdSafe) ?? '‚Äî',\n                created,\n                done,\n                canceled,\n                pending,\n                pendingOverdue:\n                    overdueCountByProfessional.get(professionalIdSafe) ?? 0,\n                donePct: pct(done, created),\n                cancelPct: pct(canceled, created),\n            },\n        ];\n    } else {\n        rankingRows = professionals.map((b) => {\n            const base = countsByProfessional.get(b.id) ?? {\n                created: 0,\n                done: 0,\n                canceled: 0,\n                pending: 0,\n            };\n\n            const created = base.created;\n            const done = base.done;\n            const canceled = base.canceled;\n            const pending = base.pending;\n\n            return {\n                professionalId: b.id,\n                professionalName: b.name,\n                created,\n                done,\n                canceled,\n                pending,\n                pendingOverdue: overdueCountByProfessional.get(b.id) ?? 0,\n                donePct: pct(done, created),\n                cancelPct: pct(canceled, created),\n            };\n        });\n\n        rankingRows.sort((a, b) => {\n            const aHas = a.created > 0;\n            const bHas = b.created > 0;\n            if (aHas !== bHas) return aHas ? -1 : 1;\n\n            const aDone = Number.isFinite(a.donePct) ? a.donePct : 999999;\n            const bDone = Number.isFinite(b.donePct) ? b.donePct : 999999;\n            if (aDone !== bDone) return aDone - bDone;\n\n            return (b.pendingOverdue ?? 0) - (a.pendingOverdue ?? 0);\n        });\n    }\n\n    // ===============================\n    // Insights autom√°ticos (texto)\n    // ===============================\n    const insights: string[] = [];\n\n    if (createdCountBase === 0) {\n        insights.push('Sem agendamentos no per√≠odo selecionado.');\n    } else {\n        if (pendingOverdueCountBase > 0) {\n            insights.push(\n                `${pendingOverdueCountBase} agendamento(s) pendente(s) j√° passaram do hor√°rio (prov√°vel ‚Äúfalta de baixa‚Äù).`\n            );\n        }\n\n        if (\n            Number.isFinite(pendingOverduePctBase) &&\n            pendingOverduePctBase >= 10\n        ) {\n            insights.push(\n                `Pendentes vencidos representam ${formatPercent(\n                    pendingOverduePctBase\n                )} do total criado. Isso costuma ser processo (n√£o √© s√≥ demanda).`\n            );\n        }\n\n        if (Number.isFinite(cancelPctBase) && cancelPctBase >= 15) {\n            insights.push(\n                `Cancelamento alto (${formatPercent(\n                    cancelPctBase\n                )}). Vale revisar pol√≠tica, comunica√ß√£o e lembretes.`\n            );\n        }\n\n        if (\n            Number.isFinite(completionPctBase) &&\n            completionPctBase < 60 &&\n            createdCountBase >= 20\n        ) {\n            insights.push(\n                `A taxa de atendimentos realizados est√° em ${formatPercent(\n                    completionPctBase\n                )}. Bom alvo: subir isso antes de investir em mais tr√°fego.`\n            );\n        }\n\n        if (leadTimesAllDays.length > 0 && Number.isFinite(avgLeadTimeDays)) {\n            insights.push(\n                `Em m√©dia, os clientes agendam com ${formatDays(\n                    avgLeadTimeDays\n                )} de anteced√™ncia.`\n            );\n        }\n\n        if (\n            leadTimesCancelDays.length > 0 &&\n            Number.isFinite(avgCancelLeadTimeDays)\n        ) {\n            insights.push(\n                `Nos cancelamentos, a anteced√™ncia m√©dia (cria√ß√£o ‚Üí data agendada) √© ${formatDays(\n                    avgCancelLeadTimeDays\n                )}.`\n            );\n        }\n\n        if (!professionalIdSafe && rankingRows.length > 0) {\n            const worst = rankingRows.find((r) => r.created > 0) ?? null;\n            if (worst) {\n                insights.push(\n                    `Ponto de aten√ß√£o: ${worst.professionalName} tem ${formatPercent(\n                        worst.donePct\n                    )} de atendimentos realizados no m√™s (entre os profissionais com agendamentos).`\n                );\n            }\n        }\n    }\n\n    const limitedInsights = insights.slice(0, 5);\n\n    return (\n        <div className=\"space-y-6 max-w-7xl\">\n            <header className=\"space-y-3\">\n                <div className=\"flex items-center justify-between gap-3\">\n                    <h1 className=\"text-title text-content-primary\">\n                        Funil de agendamento\n                    </h1>\n\n                    <Button variant=\"outline\" asChild>\n                        <Link href=\"/admin/report\">Voltar</Link>\n                    </Button>\n                </div>\n\n                <div\n                    className={cn(\n                        'rounded-xl border border-border-primary bg-background-tertiary p-3'\n                    )}\n                >\n                    <div className=\"grid gap-3 md:grid-cols-[1fr_1fr_1fr_auto] md:items-end\">\n                        <div className=\"w-full [&_select]:h-12 [&_select]:min-h-12 [&_select]:py-2\">\n                            {ownerHasMultipleUnits ? (\n                                <UnitFilter\n                                    units={units}\n                                    value={selectedUnitValue}\n                                />\n                            ) : (\n                                <div className=\"space-y-2\">\n                                    <p className=\"text-label-small text-content-secondary\">\n                                        Unidade\n                                    </p>\n                                    <div\n                                        className={cn(\n                                            'h-12 w-full rounded-md border border-border-primary',\n                                            'bg-background-secondary px-3',\n                                            'flex items-center',\n                                            'text-content-primary text-sm'\n                                        )}\n                                        title={unitLabel}\n                                    >\n                                        <span className=\"truncate\">\n                                            {unitLabel}\n                                        </span>\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n\n                        <div className=\"w-full [&_select]:h-12 [&_select]:min-h-12 [&_select]:py-2\">\n                            <ProfessionalFilter\n                                professionals={professionals}\n                                value={professionalIdSafe}\n                            />\n                        </div>\n\n                        <div className=\"w-full [&_select]:h-12 [&_select]:min-h-12 [&_select]:py-2\">\n                            <CompareWithFilter value={compareMode} />\n                        </div>\n\n                        <div className=\"justify-self-end\">\n                            <MonthPicker />\n                        </div>\n                    </div>\n                </div>\n            </header>\n\n            {/* KPIs */}\n            <section className=\"grid gap-4 md:grid-cols-4\">\n                <div className=\"rounded-xl border border-border-primary bg-background-tertiary px-4 py-3\">\n                    <p className=\"text-label-small text-content-secondary\">\n                        Agendamentos criados\n                    </p>\n                    <p className=\"text-title text-content-primary tabular-nums\">\n                        {createdCountBase}\n                    </p>\n                    <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                        Total do per√≠odo (inclui pendentes e cancelados)\n                    </p>\n                    <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                        Comparativo: {createdCountCompare} (\n                        {formatSignedInt(\n                            createdCountBase - createdCountCompare\n                        )}\n                        )\n                    </p>\n                </div>\n\n                <div className=\"rounded-xl border border-border-primary bg-background-tertiary px-4 py-3\">\n                    <p className=\"text-label-small text-content-secondary\">\n                        Taxa de atendimento realizado\n                    </p>\n                    <p className=\"text-title text-content-primary tabular-nums\">\n                        {formatPercent(completionPctBase)}\n                    </p>\n                    <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                        Realizados:{' '}\n                        <span className=\"text-content-primary\">\n                            {doneCountBase}\n                        </span>\n                    </p>\n                    <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                        vs {compareLabel(compareMode)}:{' '}\n                        {Number.isFinite(completionDeltaPP)\n                            ? formatSignedPP(completionDeltaPP)\n                            : '‚Äî'}\n                    </p>\n                </div>\n\n                <div className=\"rounded-xl border border-border-primary bg-background-tertiary px-4 py-3\">\n                    <p className=\"text-label-small text-content-secondary\">\n                        Taxa de cancelamento\n                    </p>\n                    <p className=\"text-title text-content-primary tabular-nums\">\n                        {formatPercent(cancelPctBase)}\n                    </p>\n                    <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                        Cancelados:{' '}\n                        <span className=\"text-content-primary\">\n                            {canceledCountBase}\n                        </span>\n                    </p>\n                    <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                        vs {compareLabel(compareMode)}:{' '}\n                        {Number.isFinite(cancelDeltaPP)\n                            ? formatSignedPP(cancelDeltaPP)\n                            : '‚Äî'}\n                    </p>\n                </div>\n\n                <div className=\"rounded-xl border border-border-primary bg-background-tertiary px-4 py-3\">\n                    <p className=\"text-label-small text-content-secondary\">\n                        Pendentes (ainda n√£o atendidos)\n                    </p>\n                    <p className=\"text-title text-content-primary tabular-nums\">\n                        {formatPercent(pendingPctBase)}\n                    </p>\n                    <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                        Pendentes:{' '}\n                        <span className=\"text-content-primary\">\n                            {pendingCountBase}\n                        </span>\n                    </p>\n                    <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                        vs {compareLabel(compareMode)}:{' '}\n                        {Number.isFinite(pendingDeltaPP)\n                            ? formatSignedPP(pendingDeltaPP)\n                            : '‚Äî'}\n                    </p>\n                </div>\n            </section>\n\n            {/* Funil */}\n            <section className=\"rounded-xl border border-border-primary bg-background-tertiary p-4\">\n                <div className=\"flex items-start justify-between gap-3\">\n                    <div>\n                        <p className=\"text-label-large text-content-primary\">\n                            Funil (m√™s)\n                        </p>\n                        <p className=\"text-paragraph-small text-content-tertiary\">\n                            A convers√£o principal √© ‚ÄúAgendamentos criados ‚Üí\n                            Atendimentos realizados‚Äù. O restante aparece como\n                            ‚Äún√£o realizados‚Äù.\n                        </p>\n                    </div>\n\n                    <div className=\"text-[11px] text-content-tertiary text-right\">\n                        <div>Criados: {createdCountBase}</div>\n                        <div>Realizados: {doneCountBase}</div>\n                    </div>\n                </div>\n\n                <div className=\"mt-4 grid gap-3 lg:grid-cols-3\">\n                    {funWithRates.map((s) => (\n                        <FunnelStepCard\n                            key={s.key}\n                            index={s.idx}\n                            title={s.title}\n                            value={s.value}\n                            convFromPrevPct={s.conv}\n                            dropFromPrevPct={s.drop}\n                            sub={\n                                s.key === 'created'\n                                    ? 'Tudo que entrou na agenda no per√≠odo.'\n                                    : s.key === 'done'\n                                      ? 'Atendimentos finalizados (viraram receita).'\n                                      : 'O que ficou pelo caminho: pendentes + cancelados.'\n                            }\n                        />\n                    ))}\n                </div>\n\n                <div className=\"mt-4 overflow-x-auto\">\n                    <table className=\"min-w-full text-left text-[12px]\">\n                        <thead>\n                            <tr className=\"border-b border-border-primary text-content-secondary\">\n                                <th className=\"py-2 pr-3\">Etapa</th>\n                                <th className=\"py-2 pr-3 text-right\">Qtd</th>\n                                <th className=\"py-2 pr-3 text-right\">\n                                    Convers√£o\n                                </th>\n                                <th className=\"py-2 pr-3 text-right\">Queda</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {funWithRates.map((s) => (\n                                <tr\n                                    key={`row-${s.key}`}\n                                    className=\"border-b border-border-primary/60 last:border-0\"\n                                >\n                                    <td className=\"py-2 pr-3 text-content-primary font-medium\">\n                                        {s.title}\n                                    </td>\n                                    <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                        {s.value}\n                                    </td>\n                                    <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                        {s.idx === 0\n                                            ? '‚Äî'\n                                            : formatPercent(s.conv)}\n                                    </td>\n                                    <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                        {s.idx === 0\n                                            ? '‚Äî'\n                                            : formatPercent(s.drop)}\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n            </section>\n\n            {/* Motivos / Quebra: Pendentes futuros vs vencidos + Tempo m√©dio */}\n            <section className=\"grid gap-4 lg:grid-cols-2\">\n                <div className=\"rounded-xl border border-border-primary bg-background-tertiary p-4\">\n                    <p className=\"text-label-large text-content-primary\">\n                        Pendentes: futuros vs vencidos\n                    </p>\n                    <p className=\"text-paragraph-small text-content-tertiary\">\n                        Se ‚Äúvencidos‚Äù estiver alto, geralmente √© falta de baixa\n                        (atendimento aconteceu mas ficou pendente).\n                    </p>\n\n                    <div className=\"mt-4 grid gap-3 sm:grid-cols-2\">\n                        <div className=\"rounded-xl border border-border-primary bg-background-secondary px-4 py-3\">\n                            <p className=\"text-label-small text-content-secondary\">\n                                Agendados no futuro\n                            </p>\n                            <p className=\"text-title text-content-primary tabular-nums\">\n                                {pendingFutureCountBase}\n                            </p>\n                            <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                                {formatPercent(pendingFuturePctBase)} do total\n                                criado\n                            </p>\n                        </div>\n\n                        <div className=\"rounded-xl border border-border-primary bg-background-secondary px-4 py-3\">\n                            <p className=\"text-label-small text-content-secondary\">\n                                Pendentes vencidos\n                            </p>\n                            <p className=\"text-title text-content-primary tabular-nums\">\n                                {pendingOverdueCountBase}\n                            </p>\n                            <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                                {formatPercent(pendingOverduePctBase)} do total\n                                criado\n                            </p>\n                        </div>\n                    </div>\n\n                    <div className=\"mt-4 overflow-x-auto\">\n                        <table className=\"min-w-full text-left text-[12px]\">\n                            <thead>\n                                <tr className=\"border-b border-border-primary text-content-secondary\">\n                                    <th className=\"py-2 pr-3\">Leitura</th>\n                                    <th className=\"py-2 pr-3 text-right\">\n                                        Qtd\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr className=\"border-b border-border-primary/60\">\n                                    <td className=\"py-2 pr-3 text-content-primary font-medium\">\n                                        Pendentes futuros (ok, agenda pra\n                                        frente)\n                                    </td>\n                                    <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                        {pendingFutureCountBase}\n                                    </td>\n                                </tr>\n                                <tr className=\"border-b border-border-primary/60\">\n                                    <td className=\"py-2 pr-3 text-content-primary font-medium\">\n                                        Pendentes vencidos (prov√°vel baixa n√£o\n                                        feita)\n                                    </td>\n                                    <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                        {pendingOverdueCountBase}\n                                    </td>\n                                </tr>\n                                <tr className=\"border-t border-border-primary\">\n                                    <td className=\"py-2 pr-3 text-content-primary font-medium\">\n                                        Total pendentes\n                                    </td>\n                                    <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                        {pendingCountBase}\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n\n                <div className=\"rounded-xl border border-border-primary bg-background-tertiary p-4\">\n                    <p className=\"text-label-large text-content-primary\">\n                        Tempo e comportamento (sinal de processo)\n                    </p>\n                    <p className=\"text-paragraph-small text-content-tertiary\">\n                        Ajuda a entender com quanta anteced√™ncia as pessoas\n                        agendam e como os cancelamentos se comportam.\n                    </p>\n\n                    <div className=\"mt-4 grid gap-3 sm:grid-cols-2\">\n                        <div className=\"rounded-xl border border-border-primary bg-background-secondary px-4 py-3\">\n                            <p className=\"text-label-small text-content-secondary\">\n                                Anteced√™ncia m√©dia (criados)\n                            </p>\n                            <p className=\"text-title text-content-primary tabular-nums\">\n                                {formatDays(avgLeadTimeDays)}\n                            </p>\n                            <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                                M√©dia de dias entre cria√ß√£o e data agendada\n                            </p>\n                        </div>\n\n                        <div className=\"rounded-xl border border-border-primary bg-background-secondary px-4 py-3\">\n                            <p className=\"text-label-small text-content-secondary\">\n                                Anteced√™ncia m√©dia (cancelados)\n                            </p>\n                            <p className=\"text-title text-content-primary tabular-nums\">\n                                {formatDays(avgCancelLeadTimeDays)}\n                            </p>\n                            <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                                Se for muito alta, o cancelamento pode estar\n                                ‚Äúlonge do compromisso‚Äù\n                            </p>\n                        </div>\n                    </div>\n\n                    <div\n                        className={cn(\n                            'mt-4 rounded-lg border border-border-primary bg-background-secondary p-3'\n                        )}\n                    >\n                        <p className=\"text-[12px] text-content-primary font-medium\">\n                            Leitura r√°pida\n                        </p>\n                        <p className=\"mt-1 text-[11px] text-content-tertiary\">\n                            ‚Ä¢ Se a anteced√™ncia m√©dia √© alta, d√° para trabalhar\n                            lembretes e reengajamento.\n                            <br />‚Ä¢ Se pendentes vencidos s√£o altos, o principal\n                            ganho √© processo: ‚Äúdar baixa‚Äù no fim do dia.\n                        </p>\n                    </div>\n                </div>\n            </section>\n\n            {/* Ranking por profissional */}\n            <section className=\"rounded-xl border border-border-primary bg-background-tertiary p-4\">\n                <div className=\"flex items-start justify-between gap-3\">\n                    <div>\n                        <p className=\"text-label-large text-content-primary\">\n                            Onde est√° o gargalo (por profissional)\n                        </p>\n                        <p className=\"text-paragraph-small text-content-tertiary\">\n                            Ordenado por pior taxa de atendimento realizado (e\n                            depois por mais pendentes vencidos).\n                        </p>\n                    </div>\n                    <div className=\"text-[11px] text-content-tertiary text-right\">\n                        <div>Unidade: {unitLabel}</div>\n                        <div>\n                            {selectedProfessionalName\n                                ? `Filtro: ${selectedProfessionalName} ‚Ä¢ `\n                                : ''}\n                            M√™s: {monthLabel}\n                        </div>\n                    </div>\n                </div>\n\n                {rankingRows.length === 0 ? (\n                    <div\n                        className={cn(\n                            'mt-4 h-32 w-full rounded-lg border border-border-primary',\n                            'bg-background-secondary',\n                            'flex items-center justify-center',\n                            'text-content-tertiary text-sm'\n                        )}\n                    >\n                        Sem dados para o per√≠odo.\n                    </div>\n                ) : (\n                    <div className=\"mt-4 overflow-x-auto\">\n                        <table className=\"min-w-full text-left text-[12px]\">\n                            <thead>\n                                <tr className=\"border-b border-border-primary text-content-secondary\">\n                                    <th className=\"py-2 pr-3\">Profissional</th>\n                                    <th className=\"py-2 pr-3 text-right\">\n                                        Criados\n                                    </th>\n                                    <th className=\"py-2 pr-3 text-right\">\n                                        Realizados\n                                    </th>\n                                    <th className=\"py-2 pr-3 text-right\">\n                                        % realizados\n                                    </th>\n                                    <th className=\"py-2 pr-3 text-right\">\n                                        Cancelados\n                                    </th>\n                                    <th className=\"py-2 pr-3 text-right\">\n                                        % cancel.\n                                    </th>\n                                    <th className=\"py-2 pr-3 text-right\">\n                                        Pend. vencidos\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {rankingRows.map((r) => (\n                                    <tr\n                                        key={r.professionalId}\n                                        className=\"border-b border-border-primary/60 last:border-0\"\n                                    >\n                                        <td className=\"py-2 pr-3 text-content-primary font-medium whitespace-nowrap\">\n                                            {r.professionalName}\n                                            {professionalIdSafe &&\n                                            r.professionalId ===\n                                                professionalIdSafe ? (\n                                                <span className=\"ml-2 text-[11px] text-content-tertiary\">\n                                                    (selecionado)\n                                                </span>\n                                            ) : null}\n                                        </td>\n                                        <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                            {r.created}\n                                        </td>\n                                        <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                            {r.done}\n                                        </td>\n                                        <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                            {formatPercent(r.donePct)}\n                                        </td>\n                                        <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                            {r.canceled}\n                                        </td>\n                                        <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                            {formatPercent(r.cancelPct)}\n                                        </td>\n                                        <td className=\"py-2 pr-3 text-content-primary text-right tabular-nums\">\n                                            {r.pendingOverdue}\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </div>\n                )}\n            </section>\n\n            {/* Insights autom√°ticos */}\n            <section className=\"rounded-xl border border-border-primary bg-background-tertiary p-4\">\n                <p className=\"text-label-large text-content-primary\">\n                    Resumo do m√™s\n                </p>\n                <p className=\"text-paragraph-small text-content-tertiary\">\n                    Um diagn√≥stico curto, para bater o olho e saber o que fazer.\n                </p>\n\n                {limitedInsights.length === 0 ? (\n                    <div\n                        className={cn(\n                            'mt-4 h-24 w-full rounded-lg border border-border-primary',\n                            'bg-background-secondary',\n                            'flex items-center justify-center',\n                            'text-content-tertiary text-sm'\n                        )}\n                    >\n                        Sem insights no momento.\n                    </div>\n                ) : (\n                    <ul className=\"mt-4 space-y-2 text-[12px] text-content-primary\">\n                        {limitedInsights.map((t, idx) => (\n                            <li key={idx} className=\"flex gap-2\">\n                                <span className=\"text-content-tertiary\">‚Ä¢</span>\n                                <span>{t}</span>\n                            </li>\n                        ))}\n                    </ul>\n                )}\n            </section>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}