{"version":3,"sources":["turbopack:///[project]/src/app/plataform/dashboard/page.tsx"],"sourcesContent":["// src/app/plataform/dashboard/page.tsx\nimport type { Metadata } from 'next';\n\nimport { prisma } from '@/lib/prisma';\nimport { requirePlatformForModule } from '@/lib/plataform-permissions';\n\nimport {\n    endOfDay,\n    endOfMonth,\n    format,\n    startOfDay,\n    startOfMonth,\n} from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\n\nimport { DatePicker } from '@/components/date-picker';\n\nexport const dynamic = 'force-dynamic';\n\nexport const metadata: Metadata = {\n    title: 'Plataforma | Dashboard',\n};\n\n/**\n * ✅ Next (versões recentes) pode tipar `searchParams` como Promise nos tipos gerados.\n * Para evitar conflito com `.next/dev/types/...`, tratamos como Promise<any>.\n */\ntype PageProps = {\n    searchParams?: Promise<any>;\n};\n\nfunction normalizeString(v: unknown): string {\n    return String(v ?? '').trim();\n}\n\nfunction normalizeCompanyId(v: unknown): string | null {\n    const s = normalizeString(v);\n    if (!s || s === 'all') return null;\n    return s;\n}\n\nfunction parseDateParam(dateParam?: string): Date {\n    const raw = normalizeString(dateParam);\n    if (!raw) return new Date();\n\n    // esperado yyyy-MM-dd\n    const [y, m, d] = raw.split('-').map(Number);\n    if (!y || !m || !d) return new Date();\n\n    return new Date(y, m - 1, d);\n}\n\nexport default async function PlataformaDashboardPage({\n    searchParams,\n}: PageProps) {\n    const sp = (await searchParams) as\n        | {\n              companyId?: string; // \"all\" | <companyId>\n              date?: string; // yyyy-MM-dd\n          }\n        | undefined;\n\n    await requirePlatformForModule('DASHBOARD');\n\n    const companyId = normalizeCompanyId(sp?.companyId);\n\n    const dayBase = parseDateParam(sp?.date);\n    const dayStart = startOfDay(dayBase);\n    const dayEnd = endOfDay(dayBase);\n\n    // ✅ acumulado do mês (mês inteiro fechado)\n    const monthStart = startOfMonth(dayBase);\n    const monthEnd = endOfMonth(dayBase);\n\n    const dayLabel = format(dayBase, \"dd 'de' MMMM 'de' yyyy\", {\n        locale: ptBR,\n    });\n\n    const monthLabel = format(dayBase, \"MMMM 'de' yyyy\", { locale: ptBR });\n\n    const companies = await prisma.company.findMany({\n        orderBy: [{ name: 'asc' }, { id: 'asc' }],\n        select: {\n            id: true,\n            name: true,\n            isActive: true,\n        },\n    });\n\n    const whereCompany = companyId ? { companyId } : undefined;\n\n    // ---------------------------------------------------------\n    // ✅ Estado atual (não depende do dia)\n    // ---------------------------------------------------------\n    const [companiesActive, companiesInactive] = await Promise.all([\n        prisma.company.count({ where: { isActive: true } }),\n        prisma.company.count({ where: { isActive: false } }),\n    ]);\n\n    const [unitsActive, unitsInactive] = await Promise.all([\n        prisma.unit.count({\n            where: { ...(whereCompany ?? {}), isActive: true },\n        }),\n        prisma.unit.count({\n            where: { ...(whereCompany ?? {}), isActive: false },\n        }),\n    ]);\n\n    const [professionalsActive, professionalsInactive] = await Promise.all([\n        prisma.professional.count({\n            where: { ...(whereCompany ?? {}), isActive: true },\n        }),\n        prisma.professional.count({\n            where: { ...(whereCompany ?? {}), isActive: false },\n        }),\n    ]);\n\n    const servicesCount = await prisma.service.count({\n        where: { ...(whereCompany ?? {}) },\n    });\n\n    const [productsActive, productsInactive, productsOutOfStock] =\n        await Promise.all([\n            prisma.product.count({\n                where: { ...(whereCompany ?? {}), isActive: true },\n            }),\n            prisma.product.count({\n                where: { ...(whereCompany ?? {}), isActive: false },\n            }),\n            prisma.product.count({\n                where: {\n                    ...(whereCompany ?? {}),\n                    stockQuantity: { lte: 0 },\n                },\n            }),\n        ]);\n\n    const clientsCount = companyId\n        ? await prisma.companyMember.count({\n              where: {\n                  companyId,\n                  role: 'CLIENT',\n                  isActive: true,\n              },\n          })\n        : await prisma.companyMember.count({\n              where: {\n                  role: 'CLIENT',\n                  isActive: true,\n              },\n          });\n\n    // ---------------------------------------------------------\n    // ✅ Movimento do DIA (evolução dia a dia)\n    // ---------------------------------------------------------\n    const [\n        appointmentsPendingCount,\n        appointmentsDoneCount,\n        appointmentsCanceledCount,\n        checkoutsCompletedCount,\n    ] = await Promise.all([\n        prisma.appointment.count({\n            where: {\n                ...(whereCompany ?? {}),\n                status: 'PENDING',\n                scheduleAt: { gte: dayStart, lte: dayEnd },\n            },\n        }),\n        prisma.appointment.count({\n            where: {\n                ...(whereCompany ?? {}),\n                status: 'DONE',\n                doneAt: { gte: dayStart, lte: dayEnd },\n            },\n        }),\n        prisma.appointment.count({\n            where: {\n                ...(whereCompany ?? {}),\n                status: 'CANCELED',\n                cancelledAt: { gte: dayStart, lte: dayEnd },\n            },\n        }),\n        prisma.order.count({\n            where: {\n                ...(whereCompany ?? {}),\n                status: 'COMPLETED', // ✅ vem do checkout\n                updatedAt: { gte: dayStart, lte: dayEnd },\n            },\n        }),\n    ]);\n\n    const appointmentsTotalCount =\n        appointmentsPendingCount +\n        appointmentsDoneCount +\n        appointmentsCanceledCount;\n\n    // vendidos (dia) = soma quantity de OrderItem com productId,\n    // onde Order.status = COMPLETED e Order.updatedAt no dia\n    const soldAggDay = await prisma.orderItem.aggregate({\n        where: {\n            ...(whereCompany ?? {}),\n            productId: { not: null },\n            order: {\n                status: 'COMPLETED',\n                updatedAt: { gte: dayStart, lte: dayEnd },\n            },\n        },\n        _sum: { quantity: true },\n    });\n\n    const productsSoldQtyDay = soldAggDay._sum.quantity ?? 0;\n\n    // ---------------------------------------------------------\n    // ✅ Movimento do MÊS (mês inteiro fechado)\n    // ---------------------------------------------------------\n    const [\n        appointmentsPendingMonthCount,\n        appointmentsDoneMonthCount,\n        appointmentsCanceledMonthCount,\n        checkoutsCompletedMonthCount,\n    ] = await Promise.all([\n        prisma.appointment.count({\n            where: {\n                ...(whereCompany ?? {}),\n                status: 'PENDING',\n                scheduleAt: { gte: monthStart, lte: monthEnd },\n            },\n        }),\n        prisma.appointment.count({\n            where: {\n                ...(whereCompany ?? {}),\n                status: 'DONE',\n                doneAt: { gte: monthStart, lte: monthEnd },\n            },\n        }),\n        prisma.appointment.count({\n            where: {\n                ...(whereCompany ?? {}),\n                status: 'CANCELED',\n                cancelledAt: { gte: monthStart, lte: monthEnd },\n            },\n        }),\n        prisma.order.count({\n            where: {\n                ...(whereCompany ?? {}),\n                status: 'COMPLETED', // ✅ vem do checkout\n                updatedAt: { gte: monthStart, lte: monthEnd },\n            },\n        }),\n    ]);\n\n    const appointmentsTotalMonthCount =\n        appointmentsPendingMonthCount +\n        appointmentsDoneMonthCount +\n        appointmentsCanceledMonthCount;\n\n    const soldAggMonth = await prisma.orderItem.aggregate({\n        where: {\n            ...(whereCompany ?? {}),\n            productId: { not: null },\n            order: {\n                status: 'COMPLETED',\n                updatedAt: { gte: monthStart, lte: monthEnd },\n            },\n        },\n        _sum: { quantity: true },\n    });\n\n    const productsSoldQtyMonth = soldAggMonth._sum.quantity ?? 0;\n\n    const selectedCompanyLabel = companyId\n        ? (companies.find((c) => c.id === companyId)?.name ?? 'Empresa')\n        : 'Todas as empresas';\n\n    return (\n        <div className=\"space-y-6\">\n            {/* HEADER + DATA (igual Admin) */}\n            <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n                <div>\n                    <h1 className=\"text-title text-content-primary\">\n                        Dashboard\n                    </h1>\n                    <p className=\"text-paragraph-medium-size text-content-secondary\">\n                        Visão geral da plataforma, com filtros por empresa e\n                        evolução diária.\n                    </p>\n                </div>\n\n                <DatePicker />\n            </div>\n\n            {/* CONTEXTO / FILTRO (mesmo “card” do admin) */}\n            <section className=\"space-y-3 rounded-xl border border-border-primary bg-background-tertiary p-4\">\n                <div className=\"flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\n                    <div>\n                        <p className=\"text-title text-content-primary\">\n                            {selectedCompanyLabel}\n                        </p>\n                    </div>\n\n                    {/* ✅ Server Component: sem onChange.\n                        Form GET no mesmo padrão “limpo”. */}\n                    <form\n                        method=\"GET\"\n                        className=\"flex w-full flex-col gap-2 md:w-auto md:flex-row md:items-center\"\n                    >\n                        {/* preserva date ao trocar empresa */}\n                        <input\n                            type=\"hidden\"\n                            name=\"date\"\n                            value={format(dayBase, 'yyyy-MM-dd')}\n                        />\n\n                        <label className=\"sr-only\" htmlFor=\"companyId\">\n                            Empresa\n                        </label>\n\n                        <select\n                            id=\"companyId\"\n                            name=\"companyId\"\n                            defaultValue={companyId ?? 'all'}\n                            className=\"h-10 w-full max-w-[200px] rounded-xl border border-border-primary bg-background-secondary px-3 text-paragraph-small text-content-primary outline-none focus:ring-2 focus:ring-border-primary md:w-[360px]\"\n                        >\n                            <option value=\"all\">Todas as empresas</option>\n\n                            {companies.map((c) => (\n                                <option key={c.id} value={c.id}>\n                                    {c.name}\n                                    {c.isActive ? '' : ' (inativa)'}\n                                </option>\n                            ))}\n                        </select>\n\n                        <button\n                            type=\"submit\"\n                            className=\"h-10 rounded-xl border border-border-primary bg-background-tertiary px-4 text-paragraph-small font-semibold text-content-primary hover:bg-background-secondary\"\n                        >\n                            Aplicar\n                        </button>\n                    </form>\n                </div>\n            </section>\n\n            {/* DADOS (mesma estética do Admin: cards com borda, bg, tipografia) */}\n            <div className=\"grid gap-4 md:grid-cols-2\">\n                {/* SEÇÃO: OPERAÇÃO */}\n                <section className=\"space-y-4 rounded-xl border border-border-primary bg-background-tertiary p-4\">\n                    <div>\n                        <p className=\"text-title text-content-primary\">\n                            Estrutura e cadastros\n                        </p>\n                    </div>\n\n                    <div className=\"grid gap-3\">\n                        {/* Empresas */}\n                        <div className=\"rounded-xl border border-border-primary bg-background-secondary p-3\">\n                            <p className=\"text-paragraph text-content-primary\">\n                                Empresas\n                            </p>\n\n                            <div className=\"mt-2 space-y-2 text-paragraph-small\">\n                                <div className=\"flex items-center justify-between\">\n                                    <span className=\"text-content-secondary\">\n                                        Ativas\n                                    </span>\n                                    <span className=\"font-semibold text-content-primary\">\n                                        {companiesActive}\n                                    </span>\n                                </div>\n\n                                <div className=\"flex items-center justify-between\">\n                                    <span className=\"text-content-secondary\">\n                                        Inativas\n                                    </span>\n                                    <span className=\"font-semibold text-content-primary\">\n                                        {companiesInactive}\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Unidades */}\n                        <div className=\"rounded-xl border border-border-primary bg-background-secondary p-3\">\n                            <p className=\"text-paragraph text-content-primary\">\n                                Unidades\n                            </p>\n\n                            <div className=\"mt-2 space-y-2 text-paragraph-small\">\n                                <div className=\"flex items-center justify-between\">\n                                    <span className=\"text-content-secondary\">\n                                        Ativas\n                                    </span>\n                                    <span className=\"font-semibold text-content-primary\">\n                                        {unitsActive}\n                                    </span>\n                                </div>\n\n                                <div className=\"flex items-center justify-between\">\n                                    <span className=\"text-content-secondary\">\n                                        Inativas\n                                    </span>\n                                    <span className=\"font-semibold text-content-primary\">\n                                        {unitsInactive}\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Profissionais */}\n                        <div className=\"rounded-xl border border-border-primary bg-background-secondary p-3\">\n                            <p className=\"text-paragraph text-content-primary\">\n                                Profissionais\n                            </p>\n\n                            <div className=\"mt-2 space-y-2 text-paragraph-small\">\n                                <div className=\"flex items-center justify-between\">\n                                    <span className=\"text-content-secondary\">\n                                        Ativos\n                                    </span>\n                                    <span className=\"font-semibold text-content-primary\">\n                                        {professionalsActive}\n                                    </span>\n                                </div>\n\n                                <div className=\"flex items-center justify-between\">\n                                    <span className=\"text-content-secondary\">\n                                        Inativos\n                                    </span>\n                                    <span className=\"font-semibold text-content-primary\">\n                                        {professionalsInactive}\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Serviços */}\n                        <div className=\"rounded-xl border border-border-primary bg-background-secondary p-3\">\n                            <p className=\"text-paragraph text-content-primary\">\n                                Serviços\n                            </p>\n\n                            <div className=\"mt-2 flex items-center justify-between text-paragraph-small\">\n                                <span className=\"text-content-secondary\">\n                                    Quantidade\n                                </span>\n                                <span className=\"font-semibold text-content-primary\">\n                                    {servicesCount}\n                                </span>\n                            </div>\n                        </div>\n\n                        {/* Produtos */}\n                        <div className=\"rounded-xl border border-border-primary bg-background-secondary p-3\">\n                            <p className=\"text-paragraph text-content-primary\">\n                                Produtos\n                            </p>\n\n                            <div className=\"mt-2 space-y-2 text-paragraph-small\">\n                                <div className=\"flex items-center justify-between\">\n                                    <span className=\"text-content-secondary\">\n                                        Ativos\n                                    </span>\n                                    <span className=\"font-semibold text-content-primary\">\n                                        {productsActive}\n                                    </span>\n                                </div>\n\n                                <div className=\"flex items-center justify-between\">\n                                    <span className=\"text-content-secondary\">\n                                        Inativos\n                                    </span>\n                                    <span className=\"font-semibold text-content-primary\">\n                                        {productsInactive}\n                                    </span>\n                                </div>\n\n                                <div className=\"flex items-center justify-between\">\n                                    <span className=\"text-content-secondary\">\n                                        Sem estoque\n                                    </span>\n                                    <span className=\"font-semibold text-content-primary\">\n                                        {productsOutOfStock}\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Clientes */}\n                        <div className=\"rounded-xl border border-border-primary bg-background-secondary p-3\">\n                            <p className=\"text-paragraph text-content-primary\">\n                                Clientes\n                            </p>\n\n                            <div className=\"mt-2 flex items-center justify-between text-paragraph-small\">\n                                <span className=\"text-content-secondary\">\n                                    Cadastrados\n                                </span>\n                                <span className=\"font-semibold text-content-primary\">\n                                    {clientsCount}\n                                </span>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n\n                {/* SEÇÃO: MOVIMENTO DO DIA */}\n                <section className=\"space-y-4 rounded-xl border border-border-primary bg-background-tertiary p-4\">\n                    <div>\n                        <p className=\"text-title text-content-primary\">\n                            Movimento do dia\n                        </p>\n                    </div>\n\n                    {/* Agendamentos */}\n                    <div className=\"rounded-xl border border-border-primary bg-background-secondary p-4\">\n                        <p className=\"text-paragraph text-content-primary\">\n                            Agendamentos\n                        </p>\n\n                        <div className=\"mt-3 grid gap-6 md:grid-cols-2\">\n                            {/* DIA */}\n                            <div className=\"space-y-2\">\n                                <p className=\"text-paragraph-small text-content-secondary\">\n                                    Dia\n                                </p>\n\n                                <p className=\"text-title font-semibold text-content-primary\">\n                                    Total:{' '}\n                                    <span className=\"font-semibold\">\n                                        {appointmentsTotalCount}\n                                    </span>\n                                </p>\n\n                                <div className=\"mt-2 space-y-2 text-paragraph-small\">\n                                    <div className=\"flex items-center justify-between\">\n                                        <span className=\"text-content-secondary\">\n                                            Pendentes\n                                        </span>\n                                        <span className=\"font-semibold text-content-primary\">\n                                            {appointmentsPendingCount}\n                                        </span>\n                                    </div>\n\n                                    <div className=\"flex items-center justify-between\">\n                                        <span className=\"text-content-secondary\">\n                                            Concluídos\n                                        </span>\n                                        <span className=\"font-semibold text-content-primary\">\n                                            {appointmentsDoneCount}\n                                        </span>\n                                    </div>\n\n                                    <div className=\"flex items-center justify-between\">\n                                        <span className=\"text-content-secondary\">\n                                            Cancelados\n                                        </span>\n                                        <span className=\"font-semibold text-content-primary\">\n                                            {appointmentsCanceledCount}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* MÊS */}\n                            <div className=\"space-y-2 border-t border-border-primary/60 pt-4 md:border-l md:border-t-0 md:pl-6 md:pt-0\">\n                                <p className=\"text-paragraph-small text-content-secondary\">\n                                    Mês\n                                </p>\n\n                                <p className=\"text-title font-semibold text-content-primary\">\n                                    Total:{' '}\n                                    <span className=\"font-semibold\">\n                                        {appointmentsTotalMonthCount}\n                                    </span>\n                                </p>\n\n                                <div className=\"mt-2 space-y-2 text-paragraph-small\">\n                                    <div className=\"flex items-center justify-between\">\n                                        <span className=\"text-content-secondary\">\n                                            Pendentes\n                                        </span>\n                                        <span className=\"font-semibold text-content-primary\">\n                                            {appointmentsPendingMonthCount}\n                                        </span>\n                                    </div>\n\n                                    <div className=\"flex items-center justify-between\">\n                                        <span className=\"text-content-secondary\">\n                                            Concluídos\n                                        </span>\n                                        <span className=\"font-semibold text-content-primary\">\n                                            {appointmentsDoneMonthCount}\n                                        </span>\n                                    </div>\n\n                                    <div className=\"flex items-center justify-between\">\n                                        <span className=\"text-content-secondary\">\n                                            Cancelados\n                                        </span>\n                                        <span className=\"font-semibold text-content-primary\">\n                                            {appointmentsCanceledMonthCount}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Checkouts */}\n                    <div className=\"rounded-xl border border-border-primary bg-background-secondary p-4\">\n                        <p className=\"text-paragraph text-content-primary\">\n                            Checkouts\n                        </p>\n\n                        <div className=\"mt-3 grid gap-6 md:grid-cols-2\">\n                            {/* DIA */}\n                            <div className=\"space-y-2\">\n                                <p className=\"text-paragraph-small text-content-secondary\">\n                                    Dia\n                                </p>\n\n                                <p className=\"text-title font-semibold text-content-primary\">\n                                    Concluídos:{' '}\n                                    <span className=\"font-semibold\">\n                                        {checkoutsCompletedCount}\n                                    </span>\n                                </p>\n                            </div>\n\n                            {/* MÊS */}\n                            <div className=\"space-y-2 border-t border-border-primary/60 pt-4 md:border-l md:border-t-0 md:pl-6 md:pt-0\">\n                                <p className=\"text-paragraph-small text-content-secondary\">\n                                    Mês\n                                </p>\n\n                                <p className=\"text-title font-semibold text-content-primary\">\n                                    Concluídos:{' '}\n                                    <span className=\"font-semibold\">\n                                        {checkoutsCompletedMonthCount}\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Produtos */}\n                    <div className=\"rounded-xl border border-border-primary bg-background-secondary p-4\">\n                        <p className=\"text-paragraph text-content-primary\">\n                            Produtos\n                        </p>\n\n                        <div className=\"mt-3 grid gap-6 md:grid-cols-2\">\n                            {/* DIA */}\n                            <div className=\"space-y-2\">\n                                <p className=\"text-paragraph-small text-content-secondary\">\n                                    Dia\n                                </p>\n\n                                <p className=\"text-title font-semibold text-content-primary\">\n                                    Vendidos:{' '}\n                                    <span className=\"font-semibold\">\n                                        {productsSoldQtyDay}\n                                    </span>\n                                </p>\n                            </div>\n\n                            {/* MÊS */}\n                            <div className=\"space-y-2 border-t border-border-primary/60 pt-4 md:border-l md:border-t-0 md:pl-6 md:pt-0\">\n                                <p className=\"text-paragraph-small text-content-secondary\">\n                                    Mês\n                                </p>\n\n                                <p className=\"text-title font-semibold text-content-primary\">\n                                    Vendidos:{' '}\n                                    <span className=\"font-semibold\">\n                                        {productsSoldQtyMonth}\n                                    </span>\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}