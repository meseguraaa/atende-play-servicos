module.exports=[270406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},29173,(e,t,r)=>{t.exports=e.x("@prisma/client",()=>require("@prisma/client"))},698043,e=>{"use strict";var t=e.i(29173);let r=globalThis.prisma??new t.PrismaClient({log:["error"]});e.s(["prisma",0,r])},595504,e=>{"use strict";var t=e.i(716880),r=e.i(996646),a=e.i(590996),i=e.i(704176);async function n(e,t,n,o){let d=await (0,i.getSigKey)(e,t,"verify");(0,a.checkKeyLength)(e,d);let s=(0,r.subtleAlgorithm)(e,d.algorithm);try{return await crypto.subtle.verify(s,d,n,o)}catch{return!1}}var o=e.i(747064),d=e.i(468746),s=e.i(166278),l=e.i(129590),c=e.i(30670),p=e.i(48414),h=e.i(663681);async function u(e,r,a){let i,u;if(!(0,l.isObject)(e))throw new o.JWSInvalid("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new o.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new o.JWSInvalid("JWS Protected Header incorrect type");if(void 0===e.payload)throw new o.JWSInvalid("JWS Payload missing");if("string"!=typeof e.signature)throw new o.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==e.header&&!(0,l.isObject)(e.header))throw new o.JWSInvalid("JWS Unprotected Header incorrect type");let y={};if(e.protected)try{let r=(0,t.decode)(e.protected);y=JSON.parse(d.decoder.decode(r))}catch{throw new o.JWSInvalid("JWS Protected Header is invalid")}if(!(0,s.isDisjoint)(y,e.header))throw new o.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let w={...y,...e.header},f=(0,p.validateCrit)(o.JWSInvalid,new Map([["b64",!0]]),a?.crit,y,w),S=!0;if(f.has("b64")&&"boolean"!=typeof(S=y.b64))throw new o.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:g}=w;if("string"!=typeof g||!g)throw new o.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let m=a&&function(e,t){if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}("algorithms",a.algorithms);if(m&&!m.has(g))throw new o.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(S){if("string"!=typeof e.payload)throw new o.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new o.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let v=!1;"function"==typeof r&&(r=await r(y,e),v=!0),(0,c.checkKeyType)(g,r,"verify");let b=(0,d.concat)(void 0!==e.protected?(0,d.encode)(e.protected):new Uint8Array,(0,d.encode)("."),"string"==typeof e.payload?S?(0,d.encode)(e.payload):d.encoder.encode(e.payload):e.payload);try{i=(0,t.decode)(e.signature)}catch{throw new o.JWSInvalid("Failed to base64url decode the signature")}let H=await (0,h.normalizeKey)(r,g);if(!await n(g,H,i,b))throw new o.JWSSignatureVerificationFailed;if(S)try{u=(0,t.decode)(e.payload)}catch{throw new o.JWSInvalid("Failed to base64url decode the payload")}else u="string"==typeof e.payload?d.encoder.encode(e.payload):e.payload;let J={payload:u};return(void 0!==e.protected&&(J.protectedHeader=y),void 0!==e.header&&(J.unprotectedHeader=e.header),v)?{...J,key:H}:J}async function y(e,t,r){if(e instanceof Uint8Array&&(e=d.decoder.decode(e)),"string"!=typeof e)throw new o.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:a,1:i,2:n,length:s}=e.split(".");if(3!==s)throw new o.JWSInvalid("Invalid Compact JWS");let l=await u({payload:i,protected:a,signature:n},t,r),c={payload:l.payload,protectedHeader:l.protectedHeader};return"function"==typeof t?{...c,key:l.key}:c}var w=e.i(948880);async function f(e,t,r){let a=await y(e,t,r);if(a.protectedHeader.crit?.includes("b64")&&!1===a.protectedHeader.b64)throw new o.JWTInvalid("JWTs MUST NOT use unencoded payload");let i={payload:(0,w.validateClaimsSet)(a.protectedHeader,a.payload,r),protectedHeader:a.protectedHeader};return"function"==typeof t?{...i,key:a.key}:i}e.s(["jwtVerify",()=>f],595504)},45334,e=>{"use strict";var t=e.i(716880),r=e.i(996646),a=e.i(590996),i=e.i(704176);async function n(e,t,n){let o=await (0,i.getSigKey)(e,t,"sign");return(0,a.checkKeyLength)(e,o),new Uint8Array(await crypto.subtle.sign((0,r.subtleAlgorithm)(e,o.algorithm),o,n))}var o=e.i(166278),d=e.i(747064),s=e.i(468746),l=e.i(30670),c=e.i(48414),p=e.i(663681);class h{#e;#t;#r;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#e=e}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setUnprotectedHeader(e){if(this.#r)throw TypeError("setUnprotectedHeader can only be called once");return this.#r=e,this}async sign(e,r){let a,i,h,u;if(!this.#t&&!this.#r)throw new d.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,o.isDisjoint)(this.#t,this.#r))throw new d.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let y={...this.#t,...this.#r},w=(0,c.validateCrit)(d.JWSInvalid,new Map([["b64",!0]]),r?.crit,this.#t,y),f=!0;if(w.has("b64")&&"boolean"!=typeof(f=this.#t.b64))throw new d.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:S}=y;if("string"!=typeof S||!S)throw new d.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,l.checkKeyType)(S,e,"sign"),f?(a=(0,t.encode)(this.#e),i=(0,s.encode)(a)):(i=this.#e,a=""),this.#t?(h=(0,t.encode)(JSON.stringify(this.#t)),u=(0,s.encode)(h)):(h="",u=new Uint8Array);let g=(0,s.concat)(u,(0,s.encode)("."),i),m=await (0,p.normalizeKey)(e,S),v=await n(S,m,g),b={signature:(0,t.encode)(v),payload:a};return this.#r&&(b.header=this.#r),this.#t&&(b.protected=h),b}}class u{#a;constructor(e){this.#a=new h(e)}setProtectedHeader(e){return this.#a.setProtectedHeader(e),this}async sign(e,t){let r=await this.#a.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}var y=e.i(948880);class w{#t;#i;constructor(e={}){this.#i=new y.JWTClaimsBuilder(e)}setIssuer(e){return this.#i.iss=e,this}setSubject(e){return this.#i.sub=e,this}setAudience(e){return this.#i.aud=e,this}setJti(e){return this.#i.jti=e,this}setNotBefore(e){return this.#i.nbf=e,this}setExpirationTime(e){return this.#i.exp=e,this}setIssuedAt(e){return this.#i.iat=e,this}setProtectedHeader(e){return this.#t=e,this}async sign(e,t){let r=new u(this.#i.data());if(r.setProtectedHeader(this.#t),Array.isArray(this.#t?.crit)&&this.#t.crit.includes("b64")&&!1===this.#t.b64)throw new d.JWTInvalid("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}e.s(["SignJWT",()=>w],45334)},52359,e=>{"use strict";var t=e.i(387148);e.i(45334);var r=e.i(595504);async function a(e){try{let t,{payload:a}=await (0,r.jwtVerify)(e,function(){let e=process.env.PAINEL_JWT_SECRET;if(!e)throw Error("PAINEL_JWT_SECRET nÃ£o definido no .env");return new TextEncoder().encode(e)}()),i=String(a?.role??"").toUpperCase();if("ADMIN"!==i&&"PROFESSIONAL"!==i&&"PLATFORM_OWNER"!==i&&"PLATFORM_STAFF"!==i)return null;let n={sub:String(a?.sub??""),role:i,email:String(a?.email??""),name:a?.name??null,unitId:a?.unitId==null?null:String(a.unitId),canSeeAllUnits:"boolean"==typeof a?.canSeeAllUnits?a.canSeeAllUnits:void 0,professionalId:a?.professionalId==null?null:String(a.professionalId)};if(t=String(i||"").toUpperCase(),"PLATFORM_OWNER"===t||"PLATFORM_STAFF"===t){if(!n.sub||!n.email)return null;return n}let o=String(a?.tenantSlug??"").trim().toLowerCase(),d=String(a?.companyId??"").trim();if(!o||!d)return null;return{...n,tenantSlug:o,companyId:d}}catch{return null}}async function i(){let e=await (0,t.cookies)(),r=e.get("painel_session")?.value;return r?await a(r):null}e.i(698043),e.s(["getCurrentPainelUser",()=>i])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__bfa661e3._.js.map